(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $m(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const Ye={},Xu=[],hs=()=>{},Vx=()=>!1,Ff=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),jm=n=>n.startsWith("onUpdate:"),pi=Object.assign,Km=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},Fx=Object.prototype.hasOwnProperty,je=(n,t)=>Fx.call(n,t),Yt=Array.isArray,tl=n=>Bc(n)==="[object Map]",El=n=>Bc(n)==="[object Set]",qv=n=>Bc(n)==="[object Date]",fe=n=>typeof n=="function",On=n=>typeof n=="string",_s=n=>typeof n=="symbol",nn=n=>n!==null&&typeof n=="object",xT=n=>(nn(n)||fe(n))&&fe(n.then)&&fe(n.catch),LT=Object.prototype.toString,Bc=n=>LT.call(n),Ux=n=>Bc(n).slice(8,-1),OT=n=>Bc(n)==="[object Object]",Gm=n=>On(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ac=$m(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Uf=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},Bx=/-(\w)/g,wr=Uf(n=>n.replace(Bx,(t,e)=>e?e.toUpperCase():"")),zx=/\B([A-Z])/g,pu=Uf(n=>n.replace(zx,"-$1").toLowerCase()),Bf=Uf(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ap=Uf(n=>n?`on${Bf(n)}`:""),Ko=(n,t)=>!Object.is(n,t),Wh=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},kT=(n,t,e,i=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:i,value:e})},uf=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let $v;const zf=()=>$v||($v=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zm(n){if(Yt(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],s=On(i)?$x(i):Zm(i);if(s)for(const a in s)t[a]=s[a]}return t}else if(On(n)||nn(n))return n}const Hx=/;(?![^(]*\))/g,Wx=/:([^]+)/,qx=/\/\*[^]*?\*\//g;function $x(n){const t={};return n.replace(qx,"").split(Hx).forEach(e=>{if(e){const i=e.split(Wx);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Hf(n){let t="";if(On(n))t=n;else if(Yt(n))for(let e=0;e<n.length;e++){const i=Hf(n[e]);i&&(t+=i+" ")}else if(nn(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const jx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kx=$m(jx);function MT(n){return!!n||n===""}function Gx(n,t){if(n.length!==t.length)return!1;let e=!0;for(let i=0;e&&i<n.length;i++)e=zc(n[i],t[i]);return e}function zc(n,t){if(n===t)return!0;let e=qv(n),i=qv(t);if(e||i)return e&&i?n.getTime()===t.getTime():!1;if(e=_s(n),i=_s(t),e||i)return n===t;if(e=Yt(n),i=Yt(t),e||i)return e&&i?Gx(n,t):!1;if(e=nn(n),i=nn(t),e||i){if(!e||!i)return!1;const s=Object.keys(n).length,a=Object.keys(t).length;if(s!==a)return!1;for(const c in n){const d=n.hasOwnProperty(c),m=t.hasOwnProperty(c);if(d&&!m||!d&&m||!zc(n[c],t[c]))return!1}}return String(n)===String(t)}function Qm(n,t){return n.findIndex(e=>zc(e,t))}const DT=n=>!!(n&&n.__v_isRef===!0),Me=n=>On(n)?n:n==null?"":Yt(n)||nn(n)&&(n.toString===LT||!fe(n.toString))?DT(n)?Me(n.value):JSON.stringify(n,NT,2):String(n),NT=(n,t)=>DT(t)?NT(n,t.value):tl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,s],a)=>(e[Pp(i,a)+" =>"]=s,e),{})}:El(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Pp(e))}:_s(t)?Pp(t):nn(t)&&!Yt(t)&&!OT(t)?String(t):t,Pp=(n,t="")=>{var e;return _s(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tr;class Zx{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tr,!t&&tr&&(this.index=(tr.scopes||(tr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=tr;try{return tr=this,t()}finally{tr=e}}}on(){tr=this}off(){tr=this.parent}stop(t){if(this._active){this._active=!1;let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(this.effects.length=0,e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Qx(){return tr}let en;const Sp=new WeakSet;class VT{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tr&&tr.active&&tr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sp.has(this)&&(Sp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||UT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jv(this),BT(this);const t=en,e=Br;en=this,Br=!0;try{return this.fn()}finally{zT(this),en=t,Br=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Xm(t);this.deps=this.depsTail=void 0,jv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yp(this)&&this.run()}get dirty(){return Yp(this)}}let FT=0,uc,lc;function UT(n,t=!1){if(n.flags|=8,t){n.next=lc,lc=n;return}n.next=uc,uc=n}function Jm(){FT++}function Ym(){if(--FT>0)return;if(lc){let t=lc;for(lc=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;uc;){let t=uc;for(uc=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){n||(n=i)}t=e}}if(n)throw n}function BT(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function zT(n){let t,e=n.depsTail,i=e;for(;i;){const s=i.prevDep;i.version===-1?(i===e&&(e=s),Xm(i),Jx(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=t,n.depsTail=e}function Yp(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(HT(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function HT(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===wc))return;n.globalVersion=wc;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Yp(n)){n.flags&=-3;return}const e=en,i=Br;en=n,Br=!0;try{BT(n);const s=n.fn(n._value);(t.version===0||Ko(s,n._value))&&(n._value=s,t.version++)}catch(s){throw t.version++,s}finally{en=e,Br=i,zT(n),n.flags&=-3}}function Xm(n,t=!1){const{dep:e,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),e.subs===n&&(e.subs=i,!i&&e.computed)){e.computed.flags&=-5;for(let a=e.computed.deps;a;a=a.nextDep)Xm(a,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Jx(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Br=!0;const WT=[];function oa(){WT.push(Br),Br=!1}function aa(){const n=WT.pop();Br=n===void 0?!0:n}function jv(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=en;en=void 0;try{t()}finally{en=e}}}let wc=0;class Yx{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class t_{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!en||!Br||en===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==en)e=this.activeLink=new Yx(en,this),en.deps?(e.prevDep=en.depsTail,en.depsTail.nextDep=e,en.depsTail=e):en.deps=en.depsTail=e,qT(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=en.depsTail,e.nextDep=void 0,en.depsTail.nextDep=e,en.depsTail=e,en.deps===e&&(en.deps=i)}return e}trigger(t){this.version++,wc++,this.notify(t)}notify(t){Jm();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Ym()}}}function qT(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)qT(i)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Xp=new WeakMap,iu=Symbol(""),tm=Symbol(""),Tc=Symbol("");function ui(n,t,e){if(Br&&en){let i=Xp.get(n);i||Xp.set(n,i=new Map);let s=i.get(e);s||(i.set(e,s=new t_),s.map=i,s.key=e),s.track()}}function Ks(n,t,e,i,s,a){const c=Xp.get(n);if(!c){wc++;return}const d=m=>{m&&m.trigger()};if(Jm(),t==="clear")c.forEach(d);else{const m=Yt(n),g=m&&Gm(e);if(m&&e==="length"){const w=Number(i);c.forEach((E,S)=>{(S==="length"||S===Tc||!_s(S)&&S>=w)&&d(E)})}else switch((e!==void 0||c.has(void 0))&&d(c.get(e)),g&&d(c.get(Tc)),t){case"add":m?g&&d(c.get("length")):(d(c.get(iu)),tl(n)&&d(c.get(tm)));break;case"delete":m||(d(c.get(iu)),tl(n)&&d(c.get(tm)));break;case"set":tl(n)&&d(c.get(iu));break}}Ym()}function ju(n){const t=$e(n);return t===n?t:(ui(t,"iterate",Tc),yr(n)?t:t.map(li))}function Wf(n){return ui(n=$e(n),"iterate",Tc),n}const Xx={__proto__:null,[Symbol.iterator](){return Rp(this,Symbol.iterator,li)},concat(...n){return ju(this).concat(...n.map(t=>Yt(t)?ju(t):t))},entries(){return Rp(this,"entries",n=>(n[1]=li(n[1]),n))},every(n,t){return qs(this,"every",n,t,void 0,arguments)},filter(n,t){return qs(this,"filter",n,t,e=>e.map(li),arguments)},find(n,t){return qs(this,"find",n,t,li,arguments)},findIndex(n,t){return qs(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return qs(this,"findLast",n,t,li,arguments)},findLastIndex(n,t){return qs(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return qs(this,"forEach",n,t,void 0,arguments)},includes(...n){return Cp(this,"includes",n)},indexOf(...n){return Cp(this,"indexOf",n)},join(n){return ju(this).join(n)},lastIndexOf(...n){return Cp(this,"lastIndexOf",n)},map(n,t){return qs(this,"map",n,t,void 0,arguments)},pop(){return Gl(this,"pop")},push(...n){return Gl(this,"push",n)},reduce(n,...t){return Kv(this,"reduce",n,t)},reduceRight(n,...t){return Kv(this,"reduceRight",n,t)},shift(){return Gl(this,"shift")},some(n,t){return qs(this,"some",n,t,void 0,arguments)},splice(...n){return Gl(this,"splice",n)},toReversed(){return ju(this).toReversed()},toSorted(n){return ju(this).toSorted(n)},toSpliced(...n){return ju(this).toSpliced(...n)},unshift(...n){return Gl(this,"unshift",n)},values(){return Rp(this,"values",li)}};function Rp(n,t,e){const i=Wf(n),s=i[t]();return i!==n&&!yr(n)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=e(a.value)),a}),s}const t1=Array.prototype;function qs(n,t,e,i,s,a){const c=Wf(n),d=c!==n&&!yr(n),m=c[t];if(m!==t1[t]){const E=m.apply(n,a);return d?li(E):E}let g=e;c!==n&&(d?g=function(E,S){return e.call(this,li(E),S,n)}:e.length>2&&(g=function(E,S){return e.call(this,E,S,n)}));const w=m.call(c,g,i);return d&&s?s(w):w}function Kv(n,t,e,i){const s=Wf(n);let a=e;return s!==n&&(yr(n)?e.length>3&&(a=function(c,d,m){return e.call(this,c,d,m,n)}):a=function(c,d,m){return e.call(this,c,li(d),m,n)}),s[t](a,...i)}function Cp(n,t,e){const i=$e(n);ui(i,"iterate",Tc);const s=i[t](...e);return(s===-1||s===!1)&&i_(e[0])?(e[0]=$e(e[0]),i[t](...e)):s}function Gl(n,t,e=[]){oa(),Jm();const i=$e(n)[t].apply(n,e);return Ym(),aa(),i}const e1=$m("__proto__,__v_isRef,__isVue"),$T=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(_s));function n1(n){_s(n)||(n=String(n));const t=$e(this);return ui(t,"has",n),t.hasOwnProperty(n)}class jT{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){if(e==="__v_skip")return t.__v_skip;const s=this._isReadonly,a=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return a;if(e==="__v_raw")return i===(s?a?f1:QT:a?ZT:GT).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const c=Yt(t);if(!s){let m;if(c&&(m=Xx[e]))return m;if(e==="hasOwnProperty")return n1}const d=Reflect.get(t,e,di(t)?t:i);return(_s(e)?$T.has(e):e1(e))||(s||ui(t,"get",e),a)?d:di(d)?c&&Gm(e)?d:d.value:nn(d)?s?YT(d):qf(d):d}}class KT extends jT{constructor(t=!1){super(!1,t)}set(t,e,i,s){let a=t[e];if(!this._isShallow){const m=su(a);if(!yr(i)&&!su(i)&&(a=$e(a),i=$e(i)),!Yt(t)&&di(a)&&!di(i))return m?!1:(a.value=i,!0)}const c=Yt(t)&&Gm(e)?Number(e)<t.length:je(t,e),d=Reflect.set(t,e,i,di(t)?t:s);return t===$e(s)&&(c?Ko(i,a)&&Ks(t,"set",e,i):Ks(t,"add",e,i)),d}deleteProperty(t,e){const i=je(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&Ks(t,"delete",e,void 0),s}has(t,e){const i=Reflect.has(t,e);return(!_s(e)||!$T.has(e))&&ui(t,"has",e),i}ownKeys(t){return ui(t,"iterate",Yt(t)?"length":iu),Reflect.ownKeys(t)}}class i1 extends jT{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const r1=new KT,s1=new i1,o1=new KT(!0);const em=n=>n,Oh=n=>Reflect.getPrototypeOf(n);function a1(n,t,e){return function(...i){const s=this.__v_raw,a=$e(s),c=tl(a),d=n==="entries"||n===Symbol.iterator&&c,m=n==="keys"&&c,g=s[n](...i),w=e?em:t?nm:li;return!t&&ui(a,"iterate",m?tm:iu),{next(){const{value:E,done:S}=g.next();return S?{value:E,done:S}:{value:d?[w(E[0]),w(E[1])]:w(E),done:S}},[Symbol.iterator](){return this}}}}function kh(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function u1(n,t){const e={get(s){const a=this.__v_raw,c=$e(a),d=$e(s);n||(Ko(s,d)&&ui(c,"get",s),ui(c,"get",d));const{has:m}=Oh(c),g=t?em:n?nm:li;if(m.call(c,s))return g(a.get(s));if(m.call(c,d))return g(a.get(d));a!==c&&a.get(s)},get size(){const s=this.__v_raw;return!n&&ui($e(s),"iterate",iu),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,c=$e(a),d=$e(s);return n||(Ko(s,d)&&ui(c,"has",s),ui(c,"has",d)),s===d?a.has(s):a.has(s)||a.has(d)},forEach(s,a){const c=this,d=c.__v_raw,m=$e(d),g=t?em:n?nm:li;return!n&&ui(m,"iterate",iu),d.forEach((w,E)=>s.call(a,g(w),g(E),c))}};return pi(e,n?{add:kh("add"),set:kh("set"),delete:kh("delete"),clear:kh("clear")}:{add(s){!t&&!yr(s)&&!su(s)&&(s=$e(s));const a=$e(this);return Oh(a).has.call(a,s)||(a.add(s),Ks(a,"add",s,s)),this},set(s,a){!t&&!yr(a)&&!su(a)&&(a=$e(a));const c=$e(this),{has:d,get:m}=Oh(c);let g=d.call(c,s);g||(s=$e(s),g=d.call(c,s));const w=m.call(c,s);return c.set(s,a),g?Ko(a,w)&&Ks(c,"set",s,a):Ks(c,"add",s,a),this},delete(s){const a=$e(this),{has:c,get:d}=Oh(a);let m=c.call(a,s);m||(s=$e(s),m=c.call(a,s)),d&&d.call(a,s);const g=a.delete(s);return m&&Ks(a,"delete",s,void 0),g},clear(){const s=$e(this),a=s.size!==0,c=s.clear();return a&&Ks(s,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=a1(s,n,t)}),e}function e_(n,t){const e=u1(n,t);return(i,s,a)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(je(e,s)&&s in i?e:i,s,a)}const l1={get:e_(!1,!1)},c1={get:e_(!1,!0)},h1={get:e_(!0,!1)};const GT=new WeakMap,ZT=new WeakMap,QT=new WeakMap,f1=new WeakMap;function d1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function p1(n){return n.__v_skip||!Object.isExtensible(n)?0:d1(Ux(n))}function qf(n){return su(n)?n:n_(n,!1,r1,l1,GT)}function JT(n){return n_(n,!1,o1,c1,ZT)}function YT(n){return n_(n,!0,s1,h1,QT)}function n_(n,t,e,i,s){if(!nn(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const a=s.get(n);if(a)return a;const c=p1(n);if(c===0)return n;const d=new Proxy(n,c===2?i:e);return s.set(n,d),d}function el(n){return su(n)?el(n.__v_raw):!!(n&&n.__v_isReactive)}function su(n){return!!(n&&n.__v_isReadonly)}function yr(n){return!!(n&&n.__v_isShallow)}function i_(n){return n?!!n.__v_raw:!1}function $e(n){const t=n&&n.__v_raw;return t?$e(t):n}function m1(n){return!je(n,"__v_skip")&&Object.isExtensible(n)&&kT(n,"__v_skip",!0),n}const li=n=>nn(n)?qf(n):n,nm=n=>nn(n)?YT(n):n;function di(n){return n?n.__v_isRef===!0:!1}function Cn(n){return XT(n,!1)}function _1(n){return XT(n,!0)}function XT(n,t){return di(n)?n:new g1(n,t)}class g1{constructor(t,e){this.dep=new t_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:$e(t),this._value=e?t:li(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||yr(t)||su(t);t=i?t:$e(t),Ko(t,e)&&(this._rawValue=t,this._value=i?t:li(t),this.dep.trigger())}}function nl(n){return di(n)?n.value:n}const v1={get:(n,t,e)=>t==="__v_raw"?n:nl(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const s=n[t];return di(s)&&!di(e)?(s.value=e,!0):Reflect.set(n,t,e,i)}};function tE(n){return el(n)?n:new Proxy(n,v1)}class y1{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new t_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&en!==this)return UT(this,!0),!0}get value(){const t=this.dep.track();return HT(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function w1(n,t,e=!1){let i,s;return fe(n)?i=n:(i=n.get,s=n.set),new y1(i,s,e)}const Mh={},lf=new WeakMap;let Ya;function T1(n,t=!1,e=Ya){if(e){let i=lf.get(e);i||lf.set(e,i=[]),i.push(n)}}function E1(n,t,e=Ye){const{immediate:i,deep:s,once:a,scheduler:c,augmentJob:d,call:m}=e,g=vt=>s?vt:yr(vt)||s===!1||s===0?Gs(vt,1):Gs(vt);let w,E,S,x,z=!1,q=!1;if(di(n)?(E=()=>n.value,z=yr(n)):el(n)?(E=()=>g(n),z=!0):Yt(n)?(q=!0,z=n.some(vt=>el(vt)||yr(vt)),E=()=>n.map(vt=>{if(di(vt))return vt.value;if(el(vt))return g(vt);if(fe(vt))return m?m(vt,2):vt()})):fe(n)?t?E=m?()=>m(n,2):n:E=()=>{if(S){oa();try{S()}finally{aa()}}const vt=Ya;Ya=w;try{return m?m(n,3,[x]):n(x)}finally{Ya=vt}}:E=hs,t&&s){const vt=E,xt=s===!0?1/0:s;E=()=>Gs(vt(),xt)}const K=Qx(),ht=()=>{w.stop(),K&&K.active&&Km(K.effects,w)};if(a&&t){const vt=t;t=(...xt)=>{vt(...xt),ht()}}let lt=q?new Array(n.length).fill(Mh):Mh;const at=vt=>{if(!(!(w.flags&1)||!w.dirty&&!vt))if(t){const xt=w.run();if(s||z||(q?xt.some((Ut,U)=>Ko(Ut,lt[U])):Ko(xt,lt))){S&&S();const Ut=Ya;Ya=w;try{const U=[xt,lt===Mh?void 0:q&&lt[0]===Mh?[]:lt,x];m?m(t,3,U):t(...U),lt=xt}finally{Ya=Ut}}}else w.run()};return d&&d(at),w=new VT(E),w.scheduler=c?()=>c(at,!1):at,x=vt=>T1(vt,!1,w),S=w.onStop=()=>{const vt=lf.get(w);if(vt){if(m)m(vt,4);else for(const xt of vt)xt();lf.delete(w)}},t?i?at(!0):lt=w.run():c?c(at.bind(null,!0),!0):w.run(),ht.pause=w.pause.bind(w),ht.resume=w.resume.bind(w),ht.stop=ht,ht}function Gs(n,t=1/0,e){if(t<=0||!nn(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,di(n))Gs(n.value,t,e);else if(Yt(n))for(let i=0;i<n.length;i++)Gs(n[i],t,e);else if(El(n)||tl(n))n.forEach(i=>{Gs(i,t,e)});else if(OT(n)){for(const i in n)Gs(n[i],t,e);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&Gs(n[i],t,e)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Hc(n,t,e,i){try{return i?n(...i):n()}catch(s){$f(s,t,e)}}function gs(n,t,e,i){if(fe(n)){const s=Hc(n,t,e,i);return s&&xT(s)&&s.catch(a=>{$f(a,t,e)}),s}if(Yt(n)){const s=[];for(let a=0;a<n.length;a++)s.push(gs(n[a],t,e,i));return s}}function $f(n,t,e,i=!0){const s=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||Ye;if(t){let d=t.parent;const m=t.proxy,g=`https://vuejs.org/error-reference/#runtime-${e}`;for(;d;){const w=d.ec;if(w){for(let E=0;E<w.length;E++)if(w[E](n,m,g)===!1)return}d=d.parent}if(a){oa(),Hc(a,null,10,[n,m,g]),aa();return}}I1(n,e,s,i,c)}function I1(n,t,e,i=!0,s=!1){if(s)throw n;console.error(n)}const Ai=[];let us=-1;const il=[];let Fo=null,Ku=0;const eE=Promise.resolve();let cf=null;function r_(n){const t=cf||eE;return n?t.then(this?n.bind(this):n):t}function b1(n){let t=us+1,e=Ai.length;for(;t<e;){const i=t+e>>>1,s=Ai[i],a=Ec(s);a<n||a===n&&s.flags&2?t=i+1:e=i}return t}function s_(n){if(!(n.flags&1)){const t=Ec(n),e=Ai[Ai.length-1];!e||!(n.flags&2)&&t>=Ec(e)?Ai.push(n):Ai.splice(b1(t),0,n),n.flags|=1,nE()}}function nE(){cf||(cf=eE.then(rE))}function A1(n){Yt(n)?il.push(...n):Fo&&n.id===-1?Fo.splice(Ku+1,0,n):n.flags&1||(il.push(n),n.flags|=1),nE()}function Gv(n,t,e=us+1){for(;e<Ai.length;e++){const i=Ai[e];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;Ai.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function iE(n){if(il.length){const t=[...new Set(il)].sort((e,i)=>Ec(e)-Ec(i));if(il.length=0,Fo){Fo.push(...t);return}for(Fo=t,Ku=0;Ku<Fo.length;Ku++){const e=Fo[Ku];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Fo=null,Ku=0}}const Ec=n=>n.id==null?n.flags&2?-1:1/0:n.id;function rE(n){try{for(us=0;us<Ai.length;us++){const t=Ai[us];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Hc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;us<Ai.length;us++){const t=Ai[us];t&&(t.flags&=-2)}us=-1,Ai.length=0,iE(),cf=null,(Ai.length||il.length)&&rE()}}let nr=null,sE=null;function hf(n){const t=nr;return nr=n,sE=n&&n.type.__scopeId||null,t}function o_(n,t=nr,e){if(!t||n._n)return n;const i=(...s)=>{i._d&&ry(-1);const a=hf(t);let c;try{c=n(...s)}finally{hf(a),i._d&&ry(1)}return c};return i._n=!0,i._c=!0,i._d=!0,i}function Tn(n,t){if(nr===null)return n;const e=Qf(nr),i=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[a,c,d,m=Ye]=t[s];a&&(fe(a)&&(a={mounted:a,updated:a}),a.deep&&Gs(c),i.push({dir:a,instance:e,value:c,oldValue:void 0,arg:d,modifiers:m}))}return n}function Qa(n,t,e,i){const s=n.dirs,a=t&&t.dirs;for(let c=0;c<s.length;c++){const d=s[c];a&&(d.oldValue=a[c].value);let m=d.dir[i];m&&(oa(),gs(m,e,8,[n.el,d,n,t]),aa())}}const P1=Symbol("_vte"),S1=n=>n.__isTeleport;function a_(n,t){n.shapeFlag&6&&n.component?(n.transition=t,a_(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function oE(n,t){return fe(n)?pi({name:n.name},t,{setup:n}):n}function aE(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function ff(n,t,e,i,s=!1){if(Yt(n)){n.forEach((z,q)=>ff(z,t&&(Yt(t)?t[q]:t),e,i,s));return}if(cc(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&ff(n,t,e,i.component.subTree);return}const a=i.shapeFlag&4?Qf(i.component):i.el,c=s?null:a,{i:d,r:m}=n,g=t&&t.r,w=d.refs===Ye?d.refs={}:d.refs,E=d.setupState,S=$e(E),x=E===Ye?()=>!1:z=>je(S,z);if(g!=null&&g!==m&&(On(g)?(w[g]=null,x(g)&&(E[g]=null)):di(g)&&(g.value=null)),fe(m))Hc(m,d,12,[c,w]);else{const z=On(m),q=di(m);if(z||q){const K=()=>{if(n.f){const ht=z?x(m)?E[m]:w[m]:m.value;s?Yt(ht)&&Km(ht,a):Yt(ht)?ht.includes(a)||ht.push(a):z?(w[m]=[a],x(m)&&(E[m]=w[m])):(m.value=[a],n.k&&(w[n.k]=m.value))}else z?(w[m]=c,x(m)&&(E[m]=c)):q&&(m.value=c,n.k&&(w[n.k]=c))};c?(K.id=-1,Xi(K,e)):K()}}}zf().requestIdleCallback;zf().cancelIdleCallback;const cc=n=>!!n.type.__asyncLoader,uE=n=>n.type.__isKeepAlive;function R1(n,t){lE(n,"a",t)}function C1(n,t){lE(n,"da",t)}function lE(n,t,e=hi){const i=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(jf(t,i,e),e){let s=e.parent;for(;s&&s.parent;)uE(s.parent.vnode)&&x1(i,t,e,s),s=s.parent}}function x1(n,t,e,i){const s=jf(t,n,i,!0);cE(()=>{Km(i[t],s)},e)}function jf(n,t,e=hi,i=!1){if(e){const s=e[n]||(e[n]=[]),a=t.__weh||(t.__weh=(...c)=>{oa();const d=Wc(e),m=gs(t,e,n,c);return d(),aa(),m});return i?s.unshift(a):s.push(a),a}}const ao=n=>(t,e=hi)=>{(!bc||n==="sp")&&jf(n,(...i)=>t(...i),e)},L1=ao("bm"),Kf=ao("m"),O1=ao("bu"),k1=ao("u"),M1=ao("bum"),cE=ao("um"),D1=ao("sp"),N1=ao("rtg"),V1=ao("rtc");function F1(n,t=hi){jf("ec",n,t)}const U1="components";function Zs(n,t){return z1(U1,n,!0,t)||n}const B1=Symbol.for("v-ndc");function z1(n,t,e=!0,i=!1){const s=nr||hi;if(s){const a=s.type;{const d=SL(a,!1);if(d&&(d===t||d===wr(t)||d===Bf(wr(t))))return a}const c=Zv(s[n]||a[n],t)||Zv(s.appContext[n],t);return!c&&i?a:c}}function Zv(n,t){return n&&(n[t]||n[wr(t)]||n[Bf(wr(t))])}function Xo(n,t,e,i){let s;const a=e,c=Yt(n);if(c||On(n)){const d=c&&el(n);let m=!1;d&&(m=!yr(n),n=Wf(n)),s=new Array(n.length);for(let g=0,w=n.length;g<w;g++)s[g]=t(m?li(n[g]):n[g],g,void 0,a)}else if(typeof n=="number"){s=new Array(n);for(let d=0;d<n;d++)s[d]=t(d+1,d,void 0,a)}else if(nn(n))if(n[Symbol.iterator])s=Array.from(n,(d,m)=>t(d,m,void 0,a));else{const d=Object.keys(n);s=new Array(d.length);for(let m=0,g=d.length;m<g;m++){const w=d[m];s[m]=t(n[w],w,m,a)}}else s=[];return s}const im=n=>n?LE(n)?Qf(n):im(n.parent):null,hc=pi(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>im(n.parent),$root:n=>im(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>fE(n),$forceUpdate:n=>n.f||(n.f=()=>{s_(n.update)}),$nextTick:n=>n.n||(n.n=r_.bind(n.proxy)),$watch:n=>uL.bind(n)}),xp=(n,t)=>n!==Ye&&!n.__isScriptSetup&&je(n,t),H1={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:s,props:a,accessCache:c,type:d,appContext:m}=n;let g;if(t[0]!=="$"){const x=c[t];if(x!==void 0)switch(x){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return a[t]}else{if(xp(i,t))return c[t]=1,i[t];if(s!==Ye&&je(s,t))return c[t]=2,s[t];if((g=n.propsOptions[0])&&je(g,t))return c[t]=3,a[t];if(e!==Ye&&je(e,t))return c[t]=4,e[t];rm&&(c[t]=0)}}const w=hc[t];let E,S;if(w)return t==="$attrs"&&ui(n.attrs,"get",""),w(n);if((E=d.__cssModules)&&(E=E[t]))return E;if(e!==Ye&&je(e,t))return c[t]=4,e[t];if(S=m.config.globalProperties,je(S,t))return S[t]},set({_:n},t,e){const{data:i,setupState:s,ctx:a}=n;return xp(s,t)?(s[t]=e,!0):i!==Ye&&je(i,t)?(i[t]=e,!0):je(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(a[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:a}},c){let d;return!!e[c]||n!==Ye&&je(n,c)||xp(t,c)||(d=a[0])&&je(d,c)||je(i,c)||je(hc,c)||je(s.config.globalProperties,c)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:je(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Qv(n){return Yt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let rm=!0;function W1(n){const t=fE(n),e=n.proxy,i=n.ctx;rm=!1,t.beforeCreate&&Jv(t.beforeCreate,n,"bc");const{data:s,computed:a,methods:c,watch:d,provide:m,inject:g,created:w,beforeMount:E,mounted:S,beforeUpdate:x,updated:z,activated:q,deactivated:K,beforeDestroy:ht,beforeUnmount:lt,destroyed:at,unmounted:vt,render:xt,renderTracked:Ut,renderTriggered:U,errorCaptured:O,serverPrefetch:N,expose:H,inheritAttrs:W,components:G,directives:V,filters:Ze}=t;if(g&&q1(g,i,null),c)for(const ae in c){const Tt=c[ae];fe(Tt)&&(i[ae]=Tt.bind(e))}if(s){const ae=s.call(e,e);nn(ae)&&(n.data=qf(ae))}if(rm=!0,a)for(const ae in a){const Tt=a[ae],Un=fe(Tt)?Tt.bind(e,e):fe(Tt.get)?Tt.get.bind(e,e):hs,Mt=!fe(Tt)&&fe(Tt.set)?Tt.set.bind(e):hs,ie=Vr({get:Un,set:Mt});Object.defineProperty(i,ae,{enumerable:!0,configurable:!0,get:()=>ie.value,set:ve=>ie.value=ve})}if(d)for(const ae in d)hE(d[ae],i,e,ae);if(m){const ae=fe(m)?m.call(e):m;Reflect.ownKeys(ae).forEach(Tt=>{qh(Tt,ae[Tt])})}w&&Jv(w,n,"c");function Ce(ae,Tt){Yt(Tt)?Tt.forEach(Un=>ae(Un.bind(e))):Tt&&ae(Tt.bind(e))}if(Ce(L1,E),Ce(Kf,S),Ce(O1,x),Ce(k1,z),Ce(R1,q),Ce(C1,K),Ce(F1,O),Ce(V1,Ut),Ce(N1,U),Ce(M1,lt),Ce(cE,vt),Ce(D1,N),Yt(H))if(H.length){const ae=n.exposed||(n.exposed={});H.forEach(Tt=>{Object.defineProperty(ae,Tt,{get:()=>e[Tt],set:Un=>e[Tt]=Un})})}else n.exposed||(n.exposed={});xt&&n.render===hs&&(n.render=xt),W!=null&&(n.inheritAttrs=W),G&&(n.components=G),V&&(n.directives=V),N&&aE(n)}function q1(n,t,e=hs){Yt(n)&&(n=sm(n));for(const i in n){const s=n[i];let a;nn(s)?"default"in s?a=fs(s.from||i,s.default,!0):a=fs(s.from||i):a=fs(s),di(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[i]=a}}function Jv(n,t,e){gs(Yt(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function hE(n,t,e,i){let s=i.includes(".")?PE(e,i):()=>e[i];if(On(n)){const a=t[n];fe(a)&&$h(s,a)}else if(fe(n))$h(s,n.bind(e));else if(nn(n))if(Yt(n))n.forEach(a=>hE(a,t,e,i));else{const a=fe(n.handler)?n.handler.bind(e):t[n.handler];fe(a)&&$h(s,a,n)}}function fE(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:a,config:{optionMergeStrategies:c}}=n.appContext,d=a.get(t);let m;return d?m=d:!s.length&&!e&&!i?m=t:(m={},s.length&&s.forEach(g=>df(m,g,c,!0)),df(m,t,c)),nn(t)&&a.set(t,m),m}function df(n,t,e,i=!1){const{mixins:s,extends:a}=t;a&&df(n,a,e,!0),s&&s.forEach(c=>df(n,c,e,!0));for(const c in t)if(!(i&&c==="expose")){const d=$1[c]||e&&e[c];n[c]=d?d(n[c],t[c]):t[c]}return n}const $1={data:Yv,props:Xv,emits:Xv,methods:Yl,computed:Yl,beforeCreate:bi,created:bi,beforeMount:bi,mounted:bi,beforeUpdate:bi,updated:bi,beforeDestroy:bi,beforeUnmount:bi,destroyed:bi,unmounted:bi,activated:bi,deactivated:bi,errorCaptured:bi,serverPrefetch:bi,components:Yl,directives:Yl,watch:K1,provide:Yv,inject:j1};function Yv(n,t){return t?n?function(){return pi(fe(n)?n.call(this,this):n,fe(t)?t.call(this,this):t)}:t:n}function j1(n,t){return Yl(sm(n),sm(t))}function sm(n){if(Yt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function bi(n,t){return n?[...new Set([].concat(n,t))]:t}function Yl(n,t){return n?pi(Object.create(null),n,t):t}function Xv(n,t){return n?Yt(n)&&Yt(t)?[...new Set([...n,...t])]:pi(Object.create(null),Qv(n),Qv(t??{})):t}function K1(n,t){if(!n)return t;if(!t)return n;const e=pi(Object.create(null),n);for(const i in t)e[i]=bi(n[i],t[i]);return e}function dE(){return{app:null,config:{isNativeTag:Vx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let G1=0;function Z1(n,t){return function(i,s=null){fe(i)||(i=pi({},i)),s!=null&&!nn(s)&&(s=null);const a=dE(),c=new WeakSet,d=[];let m=!1;const g=a.app={_uid:G1++,_component:i,_props:s,_container:null,_context:a,_instance:null,version:CL,get config(){return a.config},set config(w){},use(w,...E){return c.has(w)||(w&&fe(w.install)?(c.add(w),w.install(g,...E)):fe(w)&&(c.add(w),w(g,...E))),g},mixin(w){return a.mixins.includes(w)||a.mixins.push(w),g},component(w,E){return E?(a.components[w]=E,g):a.components[w]},directive(w,E){return E?(a.directives[w]=E,g):a.directives[w]},mount(w,E,S){if(!m){const x=g._ceVNode||xn(i,s);return x.appContext=a,S===!0?S="svg":S===!1&&(S=void 0),n(x,w,S),m=!0,g._container=w,w.__vue_app__=g,Qf(x.component)}},onUnmount(w){d.push(w)},unmount(){m&&(gs(d,g._instance,16),n(null,g._container),delete g._container.__vue_app__)},provide(w,E){return a.provides[w]=E,g},runWithContext(w){const E=rl;rl=g;try{return w()}finally{rl=E}}};return g}}let rl=null;function qh(n,t){if(hi){let e=hi.provides;const i=hi.parent&&hi.parent.provides;i===e&&(e=hi.provides=Object.create(i)),e[n]=t}}function fs(n,t,e=!1){const i=hi||nr;if(i||rl){const s=rl?rl._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return e&&fe(t)?t.call(i&&i.proxy):t}}const pE={},mE=()=>Object.create(pE),_E=n=>Object.getPrototypeOf(n)===pE;function Q1(n,t,e,i=!1){const s={},a=mE();n.propsDefaults=Object.create(null),gE(n,t,s,a);for(const c in n.propsOptions[0])c in s||(s[c]=void 0);e?n.props=i?s:JT(s):n.type.props?n.props=s:n.props=a,n.attrs=a}function J1(n,t,e,i){const{props:s,attrs:a,vnode:{patchFlag:c}}=n,d=$e(s),[m]=n.propsOptions;let g=!1;if((i||c>0)&&!(c&16)){if(c&8){const w=n.vnode.dynamicProps;for(let E=0;E<w.length;E++){let S=w[E];if(Gf(n.emitsOptions,S))continue;const x=t[S];if(m)if(je(a,S))x!==a[S]&&(a[S]=x,g=!0);else{const z=wr(S);s[z]=om(m,d,z,x,n,!1)}else x!==a[S]&&(a[S]=x,g=!0)}}}else{gE(n,t,s,a)&&(g=!0);let w;for(const E in d)(!t||!je(t,E)&&((w=pu(E))===E||!je(t,w)))&&(m?e&&(e[E]!==void 0||e[w]!==void 0)&&(s[E]=om(m,d,E,void 0,n,!0)):delete s[E]);if(a!==d)for(const E in a)(!t||!je(t,E))&&(delete a[E],g=!0)}g&&Ks(n.attrs,"set","")}function gE(n,t,e,i){const[s,a]=n.propsOptions;let c=!1,d;if(t)for(let m in t){if(ac(m))continue;const g=t[m];let w;s&&je(s,w=wr(m))?!a||!a.includes(w)?e[w]=g:(d||(d={}))[w]=g:Gf(n.emitsOptions,m)||(!(m in i)||g!==i[m])&&(i[m]=g,c=!0)}if(a){const m=$e(e),g=d||Ye;for(let w=0;w<a.length;w++){const E=a[w];e[E]=om(s,m,E,g[E],n,!je(g,E))}}return c}function om(n,t,e,i,s,a){const c=n[e];if(c!=null){const d=je(c,"default");if(d&&i===void 0){const m=c.default;if(c.type!==Function&&!c.skipFactory&&fe(m)){const{propsDefaults:g}=s;if(e in g)i=g[e];else{const w=Wc(s);i=g[e]=m.call(null,t),w()}}else i=m;s.ce&&s.ce._setProp(e,i)}c[0]&&(a&&!d?i=!1:c[1]&&(i===""||i===pu(e))&&(i=!0))}return i}const Y1=new WeakMap;function vE(n,t,e=!1){const i=e?Y1:t.propsCache,s=i.get(n);if(s)return s;const a=n.props,c={},d=[];let m=!1;if(!fe(n)){const w=E=>{m=!0;const[S,x]=vE(E,t,!0);pi(c,S),x&&d.push(...x)};!e&&t.mixins.length&&t.mixins.forEach(w),n.extends&&w(n.extends),n.mixins&&n.mixins.forEach(w)}if(!a&&!m)return nn(n)&&i.set(n,Xu),Xu;if(Yt(a))for(let w=0;w<a.length;w++){const E=wr(a[w]);ty(E)&&(c[E]=Ye)}else if(a)for(const w in a){const E=wr(w);if(ty(E)){const S=a[w],x=c[E]=Yt(S)||fe(S)?{type:S}:pi({},S),z=x.type;let q=!1,K=!0;if(Yt(z))for(let ht=0;ht<z.length;++ht){const lt=z[ht],at=fe(lt)&&lt.name;if(at==="Boolean"){q=!0;break}else at==="String"&&(K=!1)}else q=fe(z)&&z.name==="Boolean";x[0]=q,x[1]=K,(q||je(x,"default"))&&d.push(E)}}const g=[c,d];return nn(n)&&i.set(n,g),g}function ty(n){return n[0]!=="$"&&!ac(n)}const yE=n=>n[0]==="_"||n==="$stable",u_=n=>Yt(n)?n.map(cs):[cs(n)],X1=(n,t,e)=>{if(t._n)return t;const i=o_((...s)=>u_(t(...s)),e);return i._c=!1,i},wE=(n,t,e)=>{const i=n._ctx;for(const s in n){if(yE(s))continue;const a=n[s];if(fe(a))t[s]=X1(s,a,i);else if(a!=null){const c=u_(a);t[s]=()=>c}}},TE=(n,t)=>{const e=u_(t);n.slots.default=()=>e},EE=(n,t,e)=>{for(const i in t)(e||i!=="_")&&(n[i]=t[i])},tL=(n,t,e)=>{const i=n.slots=mE();if(n.vnode.shapeFlag&32){const s=t._;s?(EE(i,t,e),e&&kT(i,"_",s,!0)):wE(t,i)}else t&&TE(n,t)},eL=(n,t,e)=>{const{vnode:i,slots:s}=n;let a=!0,c=Ye;if(i.shapeFlag&32){const d=t._;d?e&&d===1?a=!1:EE(s,t,e):(a=!t.$stable,wE(t,s)),c=t}else t&&(TE(n,t),c={default:1});if(a)for(const d in s)!yE(d)&&c[d]==null&&delete s[d]},Xi=mL;function nL(n){return iL(n)}function iL(n,t){const e=zf();e.__VUE__=!0;const{insert:i,remove:s,patchProp:a,createElement:c,createText:d,createComment:m,setText:g,setElementText:w,parentNode:E,nextSibling:S,setScopeId:x=hs,insertStaticContent:z}=n,q=(k,D,j,st=null,ft=null,ot=null,At=void 0,Et=null,yt=!!D.dynamicChildren)=>{if(k===D)return;k&&!Zl(k,D)&&(st=it(k),ve(k,ft,ot,!0),k=null),D.patchFlag===-2&&(yt=!1,D.dynamicChildren=null);const{type:dt,ref:Dt,shapeFlag:Pt}=D;switch(dt){case Zf:K(k,D,j,st);break;case ou:ht(k,D,j,st);break;case Op:k==null&&lt(D,j,st,At);break;case Qn:G(k,D,j,st,ft,ot,At,Et,yt);break;default:Pt&1?xt(k,D,j,st,ft,ot,At,Et,yt):Pt&6?V(k,D,j,st,ft,ot,At,Et,yt):(Pt&64||Pt&128)&&dt.process(k,D,j,st,ft,ot,At,Et,yt,Lt)}Dt!=null&&ft&&ff(Dt,k&&k.ref,ot,D||k,!D)},K=(k,D,j,st)=>{if(k==null)i(D.el=d(D.children),j,st);else{const ft=D.el=k.el;D.children!==k.children&&g(ft,D.children)}},ht=(k,D,j,st)=>{k==null?i(D.el=m(D.children||""),j,st):D.el=k.el},lt=(k,D,j,st)=>{[k.el,k.anchor]=z(k.children,D,j,st,k.el,k.anchor)},at=({el:k,anchor:D},j,st)=>{let ft;for(;k&&k!==D;)ft=S(k),i(k,j,st),k=ft;i(D,j,st)},vt=({el:k,anchor:D})=>{let j;for(;k&&k!==D;)j=S(k),s(k),k=j;s(D)},xt=(k,D,j,st,ft,ot,At,Et,yt)=>{D.type==="svg"?At="svg":D.type==="math"&&(At="mathml"),k==null?Ut(D,j,st,ft,ot,At,Et,yt):N(k,D,ft,ot,At,Et,yt)},Ut=(k,D,j,st,ft,ot,At,Et)=>{let yt,dt;const{props:Dt,shapeFlag:Pt,transition:Nt,dirs:zt}=k;if(yt=k.el=c(k.type,ot,Dt&&Dt.is,Dt),Pt&8?w(yt,k.children):Pt&16&&O(k.children,yt,null,st,ft,Lp(k,ot),At,Et),zt&&Qa(k,null,st,"created"),U(yt,k,k.scopeId,At,st),Dt){for(const Kt in Dt)Kt!=="value"&&!ac(Kt)&&a(yt,Kt,null,Dt[Kt],ot,st);"value"in Dt&&a(yt,"value",null,Dt.value,ot),(dt=Dt.onVnodeBeforeMount)&&os(dt,st,k)}zt&&Qa(k,null,st,"beforeMount");const Bt=rL(ft,Nt);Bt&&Nt.beforeEnter(yt),i(yt,D,j),((dt=Dt&&Dt.onVnodeMounted)||Bt||zt)&&Xi(()=>{dt&&os(dt,st,k),Bt&&Nt.enter(yt),zt&&Qa(k,null,st,"mounted")},ft)},U=(k,D,j,st,ft)=>{if(j&&x(k,j),st)for(let ot=0;ot<st.length;ot++)x(k,st[ot]);if(ft){let ot=ft.subTree;if(D===ot||RE(ot.type)&&(ot.ssContent===D||ot.ssFallback===D)){const At=ft.vnode;U(k,At,At.scopeId,At.slotScopeIds,ft.parent)}}},O=(k,D,j,st,ft,ot,At,Et,yt=0)=>{for(let dt=yt;dt<k.length;dt++){const Dt=k[dt]=Et?Uo(k[dt]):cs(k[dt]);q(null,Dt,D,j,st,ft,ot,At,Et)}},N=(k,D,j,st,ft,ot,At)=>{const Et=D.el=k.el;let{patchFlag:yt,dynamicChildren:dt,dirs:Dt}=D;yt|=k.patchFlag&16;const Pt=k.props||Ye,Nt=D.props||Ye;let zt;if(j&&Ja(j,!1),(zt=Nt.onVnodeBeforeUpdate)&&os(zt,j,D,k),Dt&&Qa(D,k,j,"beforeUpdate"),j&&Ja(j,!0),(Pt.innerHTML&&Nt.innerHTML==null||Pt.textContent&&Nt.textContent==null)&&w(Et,""),dt?H(k.dynamicChildren,dt,Et,j,st,Lp(D,ft),ot):At||Tt(k,D,Et,null,j,st,Lp(D,ft),ot,!1),yt>0){if(yt&16)W(Et,Pt,Nt,j,ft);else if(yt&2&&Pt.class!==Nt.class&&a(Et,"class",null,Nt.class,ft),yt&4&&a(Et,"style",Pt.style,Nt.style,ft),yt&8){const Bt=D.dynamicProps;for(let Kt=0;Kt<Bt.length;Kt++){const le=Bt[Kt],mn=Pt[le],on=Nt[le];(on!==mn||le==="value")&&a(Et,le,mn,on,ft,j)}}yt&1&&k.children!==D.children&&w(Et,D.children)}else!At&&dt==null&&W(Et,Pt,Nt,j,ft);((zt=Nt.onVnodeUpdated)||Dt)&&Xi(()=>{zt&&os(zt,j,D,k),Dt&&Qa(D,k,j,"updated")},st)},H=(k,D,j,st,ft,ot,At)=>{for(let Et=0;Et<D.length;Et++){const yt=k[Et],dt=D[Et],Dt=yt.el&&(yt.type===Qn||!Zl(yt,dt)||yt.shapeFlag&70)?E(yt.el):j;q(yt,dt,Dt,null,st,ft,ot,At,!0)}},W=(k,D,j,st,ft)=>{if(D!==j){if(D!==Ye)for(const ot in D)!ac(ot)&&!(ot in j)&&a(k,ot,D[ot],null,ft,st);for(const ot in j){if(ac(ot))continue;const At=j[ot],Et=D[ot];At!==Et&&ot!=="value"&&a(k,ot,Et,At,ft,st)}"value"in j&&a(k,"value",D.value,j.value,ft)}},G=(k,D,j,st,ft,ot,At,Et,yt)=>{const dt=D.el=k?k.el:d(""),Dt=D.anchor=k?k.anchor:d("");let{patchFlag:Pt,dynamicChildren:Nt,slotScopeIds:zt}=D;zt&&(Et=Et?Et.concat(zt):zt),k==null?(i(dt,j,st),i(Dt,j,st),O(D.children||[],j,Dt,ft,ot,At,Et,yt)):Pt>0&&Pt&64&&Nt&&k.dynamicChildren?(H(k.dynamicChildren,Nt,j,ft,ot,At,Et),(D.key!=null||ft&&D===ft.subTree)&&IE(k,D,!0)):Tt(k,D,j,Dt,ft,ot,At,Et,yt)},V=(k,D,j,st,ft,ot,At,Et,yt)=>{D.slotScopeIds=Et,k==null?D.shapeFlag&512?ft.ctx.activate(D,j,st,At,yt):Ze(D,j,st,ft,ot,At,yt):Xn(k,D,yt)},Ze=(k,D,j,st,ft,ot,At)=>{const Et=k.component=EL(k,st,ft);if(uE(k)&&(Et.ctx.renderer=Lt),IL(Et,!1,At),Et.asyncDep){if(ft&&ft.registerDep(Et,Ce,At),!k.el){const yt=Et.subTree=xn(ou);ht(null,yt,D,j)}}else Ce(Et,k,D,j,ft,ot,At)},Xn=(k,D,j)=>{const st=D.component=k.component;if(dL(k,D,j))if(st.asyncDep&&!st.asyncResolved){ae(st,D,j);return}else st.next=D,st.update();else D.el=k.el,st.vnode=D},Ce=(k,D,j,st,ft,ot,At)=>{const Et=()=>{if(k.isMounted){let{next:Pt,bu:Nt,u:zt,parent:Bt,vnode:Kt}=k;{const _n=bE(k);if(_n){Pt&&(Pt.el=Kt.el,ae(k,Pt,At)),_n.asyncDep.then(()=>{k.isUnmounted||Et()});return}}let le=Pt,mn;Ja(k,!1),Pt?(Pt.el=Kt.el,ae(k,Pt,At)):Pt=Kt,Nt&&Wh(Nt),(mn=Pt.props&&Pt.props.onVnodeBeforeUpdate)&&os(mn,Bt,Pt,Kt),Ja(k,!0);const on=ny(k),kn=k.subTree;k.subTree=on,q(kn,on,E(kn.el),it(kn),k,ft,ot),Pt.el=on.el,le===null&&pL(k,on.el),zt&&Xi(zt,ft),(mn=Pt.props&&Pt.props.onVnodeUpdated)&&Xi(()=>os(mn,Bt,Pt,Kt),ft)}else{let Pt;const{el:Nt,props:zt}=D,{bm:Bt,m:Kt,parent:le,root:mn,type:on}=k,kn=cc(D);Ja(k,!1),Bt&&Wh(Bt),!kn&&(Pt=zt&&zt.onVnodeBeforeMount)&&os(Pt,le,D),Ja(k,!0);{mn.ce&&mn.ce._injectChildStyle(on);const _n=k.subTree=ny(k);q(null,_n,j,st,k,ft,ot),D.el=_n.el}if(Kt&&Xi(Kt,ft),!kn&&(Pt=zt&&zt.onVnodeMounted)){const _n=D;Xi(()=>os(Pt,le,_n),ft)}(D.shapeFlag&256||le&&cc(le.vnode)&&le.vnode.shapeFlag&256)&&k.a&&Xi(k.a,ft),k.isMounted=!0,D=j=st=null}};k.scope.on();const yt=k.effect=new VT(Et);k.scope.off();const dt=k.update=yt.run.bind(yt),Dt=k.job=yt.runIfDirty.bind(yt);Dt.i=k,Dt.id=k.uid,yt.scheduler=()=>s_(Dt),Ja(k,!0),dt()},ae=(k,D,j)=>{D.component=k;const st=k.vnode.props;k.vnode=D,k.next=null,J1(k,D.props,st,j),eL(k,D.children,j),oa(),Gv(k),aa()},Tt=(k,D,j,st,ft,ot,At,Et,yt=!1)=>{const dt=k&&k.children,Dt=k?k.shapeFlag:0,Pt=D.children,{patchFlag:Nt,shapeFlag:zt}=D;if(Nt>0){if(Nt&128){Mt(dt,Pt,j,st,ft,ot,At,Et,yt);return}else if(Nt&256){Un(dt,Pt,j,st,ft,ot,At,Et,yt);return}}zt&8?(Dt&16&&qt(dt,ft,ot),Pt!==dt&&w(j,Pt)):Dt&16?zt&16?Mt(dt,Pt,j,st,ft,ot,At,Et,yt):qt(dt,ft,ot,!0):(Dt&8&&w(j,""),zt&16&&O(Pt,j,st,ft,ot,At,Et,yt))},Un=(k,D,j,st,ft,ot,At,Et,yt)=>{k=k||Xu,D=D||Xu;const dt=k.length,Dt=D.length,Pt=Math.min(dt,Dt);let Nt;for(Nt=0;Nt<Pt;Nt++){const zt=D[Nt]=yt?Uo(D[Nt]):cs(D[Nt]);q(k[Nt],zt,j,null,ft,ot,At,Et,yt)}dt>Dt?qt(k,ft,ot,!0,!1,Pt):O(D,j,st,ft,ot,At,Et,yt,Pt)},Mt=(k,D,j,st,ft,ot,At,Et,yt)=>{let dt=0;const Dt=D.length;let Pt=k.length-1,Nt=Dt-1;for(;dt<=Pt&&dt<=Nt;){const zt=k[dt],Bt=D[dt]=yt?Uo(D[dt]):cs(D[dt]);if(Zl(zt,Bt))q(zt,Bt,j,null,ft,ot,At,Et,yt);else break;dt++}for(;dt<=Pt&&dt<=Nt;){const zt=k[Pt],Bt=D[Nt]=yt?Uo(D[Nt]):cs(D[Nt]);if(Zl(zt,Bt))q(zt,Bt,j,null,ft,ot,At,Et,yt);else break;Pt--,Nt--}if(dt>Pt){if(dt<=Nt){const zt=Nt+1,Bt=zt<Dt?D[zt].el:st;for(;dt<=Nt;)q(null,D[dt]=yt?Uo(D[dt]):cs(D[dt]),j,Bt,ft,ot,At,Et,yt),dt++}}else if(dt>Nt)for(;dt<=Pt;)ve(k[dt],ft,ot,!0),dt++;else{const zt=dt,Bt=dt,Kt=new Map;for(dt=Bt;dt<=Nt;dt++){const an=D[dt]=yt?Uo(D[dt]):cs(D[dt]);an.key!=null&&Kt.set(an.key,dt)}let le,mn=0;const on=Nt-Bt+1;let kn=!1,_n=0;const _i=new Array(on);for(dt=0;dt<on;dt++)_i[dt]=0;for(dt=zt;dt<=Pt;dt++){const an=k[dt];if(mn>=on){ve(an,ft,ot,!0);continue}let Bn;if(an.key!=null)Bn=Kt.get(an.key);else for(le=Bt;le<=Nt;le++)if(_i[le-Bt]===0&&Zl(an,D[le])){Bn=le;break}Bn===void 0?ve(an,ft,ot,!0):(_i[Bn-Bt]=dt+1,Bn>=_n?_n=Bn:kn=!0,q(an,D[Bn],j,null,ft,ot,At,Et,yt),mn++)}const Wi=kn?sL(_i):Xu;for(le=Wi.length-1,dt=on-1;dt>=0;dt--){const an=Bt+dt,Bn=D[an],Pi=an+1<Dt?D[an+1].el:st;_i[dt]===0?q(null,Bn,j,Pi,ft,ot,At,Et,yt):kn&&(le<0||dt!==Wi[le]?ie(Bn,j,Pi,2):le--)}}},ie=(k,D,j,st,ft=null)=>{const{el:ot,type:At,transition:Et,children:yt,shapeFlag:dt}=k;if(dt&6){ie(k.component.subTree,D,j,st);return}if(dt&128){k.suspense.move(D,j,st);return}if(dt&64){At.move(k,D,j,Lt);return}if(At===Qn){i(ot,D,j);for(let Pt=0;Pt<yt.length;Pt++)ie(yt[Pt],D,j,st);i(k.anchor,D,j);return}if(At===Op){at(k,D,j);return}if(st!==2&&dt&1&&Et)if(st===0)Et.beforeEnter(ot),i(ot,D,j),Xi(()=>Et.enter(ot),ft);else{const{leave:Pt,delayLeave:Nt,afterLeave:zt}=Et,Bt=()=>i(ot,D,j),Kt=()=>{Pt(ot,()=>{Bt(),zt&&zt()})};Nt?Nt(ot,Bt,Kt):Kt()}else i(ot,D,j)},ve=(k,D,j,st=!1,ft=!1)=>{const{type:ot,props:At,ref:Et,children:yt,dynamicChildren:dt,shapeFlag:Dt,patchFlag:Pt,dirs:Nt,cacheIndex:zt}=k;if(Pt===-2&&(ft=!1),Et!=null&&ff(Et,null,j,k,!0),zt!=null&&(D.renderCache[zt]=void 0),Dt&256){D.ctx.deactivate(k);return}const Bt=Dt&1&&Nt,Kt=!cc(k);let le;if(Kt&&(le=At&&At.onVnodeBeforeUnmount)&&os(le,D,k),Dt&6)re(k.component,j,st);else{if(Dt&128){k.suspense.unmount(j,st);return}Bt&&Qa(k,null,D,"beforeUnmount"),Dt&64?k.type.remove(k,D,j,Lt,st):dt&&!dt.hasOnce&&(ot!==Qn||Pt>0&&Pt&64)?qt(dt,D,j,!1,!0):(ot===Qn&&Pt&384||!ft&&Dt&16)&&qt(yt,D,j),st&&ye(k)}(Kt&&(le=At&&At.onVnodeUnmounted)||Bt)&&Xi(()=>{le&&os(le,D,k),Bt&&Qa(k,null,D,"unmounted")},j)},ye=k=>{const{type:D,el:j,anchor:st,transition:ft}=k;if(D===Qn){Fe(j,st);return}if(D===Op){vt(k);return}const ot=()=>{s(j),ft&&!ft.persisted&&ft.afterLeave&&ft.afterLeave()};if(k.shapeFlag&1&&ft&&!ft.persisted){const{leave:At,delayLeave:Et}=ft,yt=()=>At(j,ot);Et?Et(k.el,ot,yt):yt()}else ot()},Fe=(k,D)=>{let j;for(;k!==D;)j=S(k),s(k),k=j;s(D)},re=(k,D,j)=>{const{bum:st,scope:ft,job:ot,subTree:At,um:Et,m:yt,a:dt}=k;ey(yt),ey(dt),st&&Wh(st),ft.stop(),ot&&(ot.flags|=8,ve(At,k,D,j)),Et&&Xi(Et,D),Xi(()=>{k.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},qt=(k,D,j,st=!1,ft=!1,ot=0)=>{for(let At=ot;At<k.length;At++)ve(k[At],D,j,st,ft)},it=k=>{if(k.shapeFlag&6)return it(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const D=S(k.anchor||k.el),j=D&&D[P1];return j?S(j):D};let It=!1;const bt=(k,D,j)=>{k==null?D._vnode&&ve(D._vnode,null,null,!0):q(D._vnode||null,k,D,null,null,null,j),D._vnode=k,It||(It=!0,Gv(),iE(),It=!1)},Lt={p:q,um:ve,m:ie,r:ye,mt:Ze,mc:O,pc:Tt,pbc:H,n:it,o:n};return{render:bt,hydrate:void 0,createApp:Z1(bt)}}function Lp({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Ja({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function rL(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function IE(n,t,e=!1){const i=n.children,s=t.children;if(Yt(i)&&Yt(s))for(let a=0;a<i.length;a++){const c=i[a];let d=s[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[a]=Uo(s[a]),d.el=c.el),!e&&d.patchFlag!==-2&&IE(c,d)),d.type===Zf&&(d.el=c.el)}}function sL(n){const t=n.slice(),e=[0];let i,s,a,c,d;const m=n.length;for(i=0;i<m;i++){const g=n[i];if(g!==0){if(s=e[e.length-1],n[s]<g){t[i]=s,e.push(i);continue}for(a=0,c=e.length-1;a<c;)d=a+c>>1,n[e[d]]<g?a=d+1:c=d;g<n[e[a]]&&(a>0&&(t[i]=e[a-1]),e[a]=i)}}for(a=e.length,c=e[a-1];a-- >0;)e[a]=c,c=t[c];return e}function bE(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:bE(t)}function ey(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const oL=Symbol.for("v-scx"),aL=()=>fs(oL);function $h(n,t,e){return AE(n,t,e)}function AE(n,t,e=Ye){const{immediate:i,deep:s,flush:a,once:c}=e,d=pi({},e),m=t&&i||!t&&a!=="post";let g;if(bc){if(a==="sync"){const x=aL();g=x.__watcherHandles||(x.__watcherHandles=[])}else if(!m){const x=()=>{};return x.stop=hs,x.resume=hs,x.pause=hs,x}}const w=hi;d.call=(x,z,q)=>gs(x,w,z,q);let E=!1;a==="post"?d.scheduler=x=>{Xi(x,w&&w.suspense)}:a!=="sync"&&(E=!0,d.scheduler=(x,z)=>{z?x():s_(x)}),d.augmentJob=x=>{t&&(x.flags|=4),E&&(x.flags|=2,w&&(x.id=w.uid,x.i=w))};const S=E1(n,t,d);return bc&&(g?g.push(S):m&&S()),S}function uL(n,t,e){const i=this.proxy,s=On(n)?n.includes(".")?PE(i,n):()=>i[n]:n.bind(i,i);let a;fe(t)?a=t:(a=t.handler,e=t);const c=Wc(this),d=AE(s,a.bind(i),e);return c(),d}function PE(n,t){const e=t.split(".");return()=>{let i=n;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}const lL=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${wr(t)}Modifiers`]||n[`${pu(t)}Modifiers`];function cL(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||Ye;let s=e;const a=t.startsWith("update:"),c=a&&lL(i,t.slice(7));c&&(c.trim&&(s=e.map(w=>On(w)?w.trim():w)),c.number&&(s=e.map(uf)));let d,m=i[d=Ap(t)]||i[d=Ap(wr(t))];!m&&a&&(m=i[d=Ap(pu(t))]),m&&gs(m,n,6,s);const g=i[d+"Once"];if(g){if(!n.emitted)n.emitted={};else if(n.emitted[d])return;n.emitted[d]=!0,gs(g,n,6,s)}}function SE(n,t,e=!1){const i=t.emitsCache,s=i.get(n);if(s!==void 0)return s;const a=n.emits;let c={},d=!1;if(!fe(n)){const m=g=>{const w=SE(g,t,!0);w&&(d=!0,pi(c,w))};!e&&t.mixins.length&&t.mixins.forEach(m),n.extends&&m(n.extends),n.mixins&&n.mixins.forEach(m)}return!a&&!d?(nn(n)&&i.set(n,null),null):(Yt(a)?a.forEach(m=>c[m]=null):pi(c,a),nn(n)&&i.set(n,c),c)}function Gf(n,t){return!n||!Ff(t)?!1:(t=t.slice(2).replace(/Once$/,""),je(n,t[0].toLowerCase()+t.slice(1))||je(n,pu(t))||je(n,t))}function ny(n){const{type:t,vnode:e,proxy:i,withProxy:s,propsOptions:[a],slots:c,attrs:d,emit:m,render:g,renderCache:w,props:E,data:S,setupState:x,ctx:z,inheritAttrs:q}=n,K=hf(n);let ht,lt;try{if(e.shapeFlag&4){const vt=s||i,xt=vt;ht=cs(g.call(xt,vt,w,E,x,S,z)),lt=d}else{const vt=t;ht=cs(vt.length>1?vt(E,{attrs:d,slots:c,emit:m}):vt(E,null)),lt=t.props?d:hL(d)}}catch(vt){fc.length=0,$f(vt,n,1),ht=xn(ou)}let at=ht;if(lt&&q!==!1){const vt=Object.keys(lt),{shapeFlag:xt}=at;vt.length&&xt&7&&(a&&vt.some(jm)&&(lt=fL(lt,a)),at=ll(at,lt,!1,!0))}return e.dirs&&(at=ll(at,null,!1,!0),at.dirs=at.dirs?at.dirs.concat(e.dirs):e.dirs),e.transition&&a_(at,e.transition),ht=at,hf(K),ht}const hL=n=>{let t;for(const e in n)(e==="class"||e==="style"||Ff(e))&&((t||(t={}))[e]=n[e]);return t},fL=(n,t)=>{const e={};for(const i in n)(!jm(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function dL(n,t,e){const{props:i,children:s,component:a}=n,{props:c,children:d,patchFlag:m}=t,g=a.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&m>=0){if(m&1024)return!0;if(m&16)return i?iy(i,c,g):!!c;if(m&8){const w=t.dynamicProps;for(let E=0;E<w.length;E++){const S=w[E];if(c[S]!==i[S]&&!Gf(g,S))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:i===c?!1:i?c?iy(i,c,g):!0:!!c;return!1}function iy(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const a=i[s];if(t[a]!==n[a]&&!Gf(e,a))return!0}return!1}function pL({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const RE=n=>n.__isSuspense;function mL(n,t){t&&t.pendingBranch?Yt(n)?t.effects.push(...n):t.effects.push(n):A1(n)}const Qn=Symbol.for("v-fgt"),Zf=Symbol.for("v-txt"),ou=Symbol.for("v-cmt"),Op=Symbol.for("v-stc"),fc=[];let ir=null;function Wt(n=!1){fc.push(ir=n?null:[])}function _L(){fc.pop(),ir=fc[fc.length-1]||null}let Ic=1;function ry(n,t=!1){Ic+=n,n<0&&ir&&t&&(ir.hasOnce=!0)}function CE(n){return n.dynamicChildren=Ic>0?ir||Xu:null,_L(),Ic>0&&ir&&ir.push(n),n}function jt(n,t,e,i,s,a){return CE(J(n,t,e,i,s,a,!0))}function am(n,t,e,i,s){return CE(xn(n,t,e,i,s,!0))}function pf(n){return n?n.__v_isVNode===!0:!1}function Zl(n,t){return n.type===t.type&&n.key===t.key}const xE=({key:n})=>n??null,jh=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?On(n)||di(n)||fe(n)?{i:nr,r:n,k:t,f:!!e}:n:null);function J(n,t=null,e=null,i=0,s=null,a=n===Qn?0:1,c=!1,d=!1){const m={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&xE(t),ref:t&&jh(t),scopeId:sE,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:nr};return d?(l_(m,e),a&128&&n.normalize(m)):e&&(m.shapeFlag|=On(e)?8:16),Ic>0&&!c&&ir&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&ir.push(m),m}const xn=gL;function gL(n,t=null,e=null,i=0,s=null,a=!1){if((!n||n===B1)&&(n=ou),pf(n)){const d=ll(n,t,!0);return e&&l_(d,e),Ic>0&&!a&&ir&&(d.shapeFlag&6?ir[ir.indexOf(n)]=d:ir.push(d)),d.patchFlag=-2,d}if(RL(n)&&(n=n.__vccOpts),t){t=vL(t);let{class:d,style:m}=t;d&&!On(d)&&(t.class=Hf(d)),nn(m)&&(i_(m)&&!Yt(m)&&(m=pi({},m)),t.style=Zm(m))}const c=On(n)?1:RE(n)?128:S1(n)?64:nn(n)?4:fe(n)?2:0;return J(n,t,e,i,s,c,a,!0)}function vL(n){return n?i_(n)||_E(n)?pi({},n):n:null}function ll(n,t,e=!1,i=!1){const{props:s,ref:a,patchFlag:c,children:d,transition:m}=n,g=t?yL(s||{},t):s,w={__v_isVNode:!0,__v_skip:!0,type:n.type,props:g,key:g&&xE(g),ref:t&&t.ref?e&&a?Yt(a)?a.concat(jh(t)):[a,jh(t)]:jh(t):a,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:d,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Qn?c===-1?16:c|16:c,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:m,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ll(n.ssContent),ssFallback:n.ssFallback&&ll(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return m&&i&&a_(w,m.clone(w)),w}function $o(n=" ",t=0){return xn(Zf,null,n,t)}function dn(n="",t=!1){return t?(Wt(),am(ou,null,n)):xn(ou,null,n)}function cs(n){return n==null||typeof n=="boolean"?xn(ou):Yt(n)?xn(Qn,null,n.slice()):pf(n)?Uo(n):xn(Zf,null,String(n))}function Uo(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ll(n)}function l_(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(Yt(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),l_(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!_E(t)?t._ctx=nr:s===3&&nr&&(nr.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else fe(t)?(t={default:t,_ctx:nr},e=32):(t=String(t),i&64?(e=16,t=[$o(t)]):e=8);n.children=t,n.shapeFlag|=e}function yL(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=Hf([t.class,i.class]));else if(s==="style")t.style=Zm([t.style,i.style]);else if(Ff(s)){const a=t[s],c=i[s];c&&a!==c&&!(Yt(a)&&a.includes(c))&&(t[s]=a?[].concat(a,c):c)}else s!==""&&(t[s]=i[s])}return t}function os(n,t,e,i=null){gs(n,t,7,[e,i])}const wL=dE();let TL=0;function EL(n,t,e){const i=n.type,s=(t?t.appContext:n.appContext)||wL,a={uid:TL++,vnode:n,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Zx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vE(i,s),emitsOptions:SE(i,s),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:i.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=cL.bind(null,a),n.ce&&n.ce(a),a}let hi=null,mf,um;{const n=zf(),t=(e,i)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(i),a=>{s.length>1?s.forEach(c=>c(a)):s[0](a)}};mf=t("__VUE_INSTANCE_SETTERS__",e=>hi=e),um=t("__VUE_SSR_SETTERS__",e=>bc=e)}const Wc=n=>{const t=hi;return mf(n),n.scope.on(),()=>{n.scope.off(),mf(t)}},sy=()=>{hi&&hi.scope.off(),mf(null)};function LE(n){return n.vnode.shapeFlag&4}let bc=!1;function IL(n,t=!1,e=!1){t&&um(t);const{props:i,children:s}=n.vnode,a=LE(n);Q1(n,i,a,t),tL(n,s,e);const c=a?bL(n,t):void 0;return t&&um(!1),c}function bL(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,H1);const{setup:i}=e;if(i){oa();const s=n.setupContext=i.length>1?PL(n):null,a=Wc(n),c=Hc(i,n,0,[n.props,s]),d=xT(c);if(aa(),a(),(d||n.sp)&&!cc(n)&&aE(n),d){if(c.then(sy,sy),t)return c.then(m=>{oy(n,m)}).catch(m=>{$f(m,n,0)});n.asyncDep=c}else oy(n,c)}else OE(n)}function oy(n,t,e){fe(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:nn(t)&&(n.setupState=tE(t)),OE(n)}function OE(n,t,e){const i=n.type;n.render||(n.render=i.render||hs);{const s=Wc(n);oa();try{W1(n)}finally{aa(),s()}}}const AL={get(n,t){return ui(n,"get",""),n[t]}};function PL(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,AL),slots:n.slots,emit:n.emit,expose:t}}function Qf(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(tE(m1(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in hc)return hc[e](n)},has(t,e){return e in t||e in hc}})):n.proxy}function SL(n,t=!0){return fe(n)?n.displayName||n.name:n.name||t&&n.__name}function RL(n){return fe(n)&&"__vccOpts"in n}const Vr=(n,t)=>w1(n,t,bc);function kE(n,t,e){const i=arguments.length;return i===2?nn(t)&&!Yt(t)?pf(t)?xn(n,null,[t]):xn(n,t):xn(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&pf(e)&&(e=[e]),xn(n,t,e))}const CL="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lm;const ay=typeof window<"u"&&window.trustedTypes;if(ay)try{lm=ay.createPolicy("vue",{createHTML:n=>n})}catch{}const ME=lm?n=>lm.createHTML(n):n=>n,xL="http://www.w3.org/2000/svg",LL="http://www.w3.org/1998/Math/MathML",js=typeof document<"u"?document:null,uy=js&&js.createElement("template"),OL={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const s=t==="svg"?js.createElementNS(xL,n):t==="mathml"?js.createElementNS(LL,n):e?js.createElement(n,{is:e}):js.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>js.createTextNode(n),createComment:n=>js.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>js.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,s,a){const c=e?e.previousSibling:t.lastChild;if(s&&(s===a||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===a||!(s=s.nextSibling)););else{uy.innerHTML=ME(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const d=uy.content;if(i==="svg"||i==="mathml"){const m=d.firstChild;for(;m.firstChild;)d.appendChild(m.firstChild);d.removeChild(m)}t.insertBefore(d,e)}return[c?c.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},kL=Symbol("_vtc");function ML(n,t,e){const i=n[kL];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const ly=Symbol("_vod"),DL=Symbol("_vsh"),NL=Symbol(""),VL=/(^|;)\s*display\s*:/;function FL(n,t,e){const i=n.style,s=On(e);let a=!1;if(e&&!s){if(t)if(On(t))for(const c of t.split(";")){const d=c.slice(0,c.indexOf(":")).trim();e[d]==null&&Kh(i,d,"")}else for(const c in t)e[c]==null&&Kh(i,c,"");for(const c in e)c==="display"&&(a=!0),Kh(i,c,e[c])}else if(s){if(t!==e){const c=i[NL];c&&(e+=";"+c),i.cssText=e,a=VL.test(e)}}else t&&n.removeAttribute("style");ly in n&&(n[ly]=a?i.display:"",n[DL]&&(i.display="none"))}const cy=/\s*!important$/;function Kh(n,t,e){if(Yt(e))e.forEach(i=>Kh(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=UL(n,t);cy.test(e)?n.setProperty(pu(i),e.replace(cy,""),"important"):n[i]=e}}const hy=["Webkit","Moz","ms"],kp={};function UL(n,t){const e=kp[t];if(e)return e;let i=wr(t);if(i!=="filter"&&i in n)return kp[t]=i;i=Bf(i);for(let s=0;s<hy.length;s++){const a=hy[s]+i;if(a in n)return kp[t]=a}return t}const fy="http://www.w3.org/1999/xlink";function dy(n,t,e,i,s,a=Kx(t)){i&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(fy,t.slice(6,t.length)):n.setAttributeNS(fy,t,e):e==null||a&&!MT(e)?n.removeAttribute(t):n.setAttribute(t,a?"":_s(e)?String(e):e)}function py(n,t,e,i,s){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?ME(e):e);return}const a=n.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?n.getAttribute("value")||"":n.value,m=e==null?n.type==="checkbox"?"on":"":String(e);(d!==m||!("_value"in n))&&(n.value=m),e==null&&n.removeAttribute(t),n._value=e;return}let c=!1;if(e===""||e==null){const d=typeof n[t];d==="boolean"?e=MT(e):e==null&&d==="string"?(e="",c=!0):d==="number"&&(e=0,c=!0)}try{n[t]=e}catch{}c&&n.removeAttribute(s||t)}function zo(n,t,e,i){n.addEventListener(t,e,i)}function BL(n,t,e,i){n.removeEventListener(t,e,i)}const my=Symbol("_vei");function zL(n,t,e,i,s=null){const a=n[my]||(n[my]={}),c=a[t];if(i&&c)c.value=i;else{const[d,m]=HL(t);if(i){const g=a[t]=$L(i,s);zo(n,d,g,m)}else c&&(BL(n,d,c,m),a[t]=void 0)}}const _y=/(?:Once|Passive|Capture)$/;function HL(n){let t;if(_y.test(n)){t={};let i;for(;i=n.match(_y);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):pu(n.slice(2)),t]}let Mp=0;const WL=Promise.resolve(),qL=()=>Mp||(WL.then(()=>Mp=0),Mp=Date.now());function $L(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;gs(jL(i,e.value),t,5,[i])};return e.value=n,e.attached=qL(),e}function jL(n,t){if(Yt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const gy=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,KL=(n,t,e,i,s,a)=>{const c=s==="svg";t==="class"?ML(n,i,c):t==="style"?FL(n,e,i):Ff(t)?jm(t)||zL(n,t,e,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):GL(n,t,i,c))?(py(n,t,i),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&dy(n,t,i,c,a,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!On(i))?py(n,wr(t),i,a,t):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),dy(n,t,i,c))};function GL(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&gy(t)&&fe(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return gy(t)&&On(e)?!1:t in n}const cl=n=>{const t=n.props["onUpdate:modelValue"]||!1;return Yt(t)?e=>Wh(t,e):t};function ZL(n){n.target.composing=!0}function vy(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Xs=Symbol("_assign"),Nn={created(n,{modifiers:{lazy:t,trim:e,number:i}},s){n[Xs]=cl(s);const a=i||s.props&&s.props.type==="number";zo(n,t?"change":"input",c=>{if(c.target.composing)return;let d=n.value;e&&(d=d.trim()),a&&(d=uf(d)),n[Xs](d)}),e&&zo(n,"change",()=>{n.value=n.value.trim()}),t||(zo(n,"compositionstart",ZL),zo(n,"compositionend",vy),zo(n,"change",vy))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:i,trim:s,number:a}},c){if(n[Xs]=cl(c),n.composing)return;const d=(a||n.type==="number")&&!/^0\d/.test(n.value)?uf(n.value):n.value,m=t??"";d!==m&&(document.activeElement===n&&n.type!=="range"&&(i&&t===e||s&&n.value.trim()===m)||(n.value=m))}},DE={deep:!0,created(n,t,e){n[Xs]=cl(e),zo(n,"change",()=>{const i=n._modelValue,s=Ac(n),a=n.checked,c=n[Xs];if(Yt(i)){const d=Qm(i,s),m=d!==-1;if(a&&!m)c(i.concat(s));else if(!a&&m){const g=[...i];g.splice(d,1),c(g)}}else if(El(i)){const d=new Set(i);a?d.add(s):d.delete(s),c(d)}else c(NE(n,a))})},mounted:yy,beforeUpdate(n,t,e){n[Xs]=cl(e),yy(n,t,e)}};function yy(n,{value:t,oldValue:e},i){n._modelValue=t;let s;if(Yt(t))s=Qm(t,i.props.value)>-1;else if(El(t))s=t.has(i.props.value);else{if(t===e)return;s=zc(t,NE(n,!0))}n.checked!==s&&(n.checked=s)}const QL={deep:!0,created(n,{value:t,modifiers:{number:e}},i){const s=El(t);zo(n,"change",()=>{const a=Array.prototype.filter.call(n.options,c=>c.selected).map(c=>e?uf(Ac(c)):Ac(c));n[Xs](n.multiple?s?new Set(a):a:a[0]),n._assigning=!0,r_(()=>{n._assigning=!1})}),n[Xs]=cl(i)},mounted(n,{value:t}){wy(n,t)},beforeUpdate(n,t,e){n[Xs]=cl(e)},updated(n,{value:t}){n._assigning||wy(n,t)}};function wy(n,t){const e=n.multiple,i=Yt(t);if(!(e&&!i&&!El(t))){for(let s=0,a=n.options.length;s<a;s++){const c=n.options[s],d=Ac(c);if(e)if(i){const m=typeof d;m==="string"||m==="number"?c.selected=t.some(g=>String(g)===String(d)):c.selected=Qm(t,d)>-1}else c.selected=t.has(d);else if(zc(Ac(c),t)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ac(n){return"_value"in n?n._value:n.value}function NE(n,t){const e=t?"_trueValue":"_falseValue";return e in n?n[e]:t}const JL=["ctrl","shift","alt","meta"],YL={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>JL.some(e=>n[`${e}Key`]&&!t.includes(e))},c_=(n,t)=>{const e=n._withMods||(n._withMods={}),i=t.join(".");return e[i]||(e[i]=(s,...a)=>{for(let c=0;c<t.length;c++){const d=YL[t[c]];if(d&&d(s,t))return}return n(s,...a)})},XL=pi({patchProp:KL},OL);let Ty;function tO(){return Ty||(Ty=nL(XL))}const eO=(...n)=>{const t=tO().createApp(...n),{mount:e}=t;return t.mount=i=>{const s=iO(i);if(!s)return;const a=t._component;!fe(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const c=e(s,!1,nO(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),c},t};function nO(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function iO(n){return On(n)?document.querySelector(n):n}const or=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e},rO={name:"App"};function sO(n,t,e,i,s,a){const c=Zs("router-view");return Wt(),jt("div",null,[xn(c)])}const oO=or(rO,[["render",sO]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Gu=typeof document<"u";function VE(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function aO(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&VE(n.default)}const qe=Object.assign;function Dp(n,t){const e={};for(const i in t){const s=t[i];e[i]=Hr(s)?s.map(n):n(s)}return e}const dc=()=>{},Hr=Array.isArray,FE=/#/g,uO=/&/g,lO=/\//g,cO=/=/g,hO=/\?/g,UE=/\+/g,fO=/%5B/g,dO=/%5D/g,BE=/%5E/g,pO=/%60/g,zE=/%7B/g,mO=/%7C/g,HE=/%7D/g,_O=/%20/g;function h_(n){return encodeURI(""+n).replace(mO,"|").replace(fO,"[").replace(dO,"]")}function gO(n){return h_(n).replace(zE,"{").replace(HE,"}").replace(BE,"^")}function cm(n){return h_(n).replace(UE,"%2B").replace(_O,"+").replace(FE,"%23").replace(uO,"%26").replace(pO,"`").replace(zE,"{").replace(HE,"}").replace(BE,"^")}function vO(n){return cm(n).replace(cO,"%3D")}function yO(n){return h_(n).replace(FE,"%23").replace(hO,"%3F")}function wO(n){return n==null?"":yO(n).replace(lO,"%2F")}function Pc(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const TO=/\/$/,EO=n=>n.replace(TO,"");function Np(n,t,e="/"){let i,s={},a="",c="";const d=t.indexOf("#");let m=t.indexOf("?");return d<m&&d>=0&&(m=-1),m>-1&&(i=t.slice(0,m),a=t.slice(m+1,d>-1?d:t.length),s=n(a)),d>-1&&(i=i||t.slice(0,d),c=t.slice(d,t.length)),i=PO(i??t,e),{fullPath:i+(a&&"?")+a+c,path:i,query:s,hash:Pc(c)}}function IO(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Ey(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function bO(n,t,e){const i=t.matched.length-1,s=e.matched.length-1;return i>-1&&i===s&&hl(t.matched[i],e.matched[s])&&WE(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function hl(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function WE(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!AO(n[e],t[e]))return!1;return!0}function AO(n,t){return Hr(n)?Iy(n,t):Hr(t)?Iy(t,n):n===t}function Iy(n,t){return Hr(t)?n.length===t.length&&n.every((e,i)=>e===t[i]):n.length===1&&n[0]===t}function PO(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let a=e.length-1,c,d;for(c=0;c<i.length;c++)if(d=i[c],d!==".")if(d==="..")a>1&&a--;else break;return e.slice(0,a).join("/")+"/"+i.slice(c).join("/")}const No={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Sc;(function(n){n.pop="pop",n.push="push"})(Sc||(Sc={}));var pc;(function(n){n.back="back",n.forward="forward",n.unknown=""})(pc||(pc={}));function SO(n){if(!n)if(Gu){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),EO(n)}const RO=/^[^#]+#/;function CO(n,t){return n.replace(RO,"#")+t}function xO(n,t){const e=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const Jf=()=>({left:window.scrollX,top:window.scrollY});function LO(n){let t;if("el"in n){const e=n.el,i=typeof e=="string"&&e.startsWith("#"),s=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!s)return;t=xO(s,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function by(n,t){return(history.state?history.state.position-t:-1)+n}const hm=new Map;function OO(n,t){hm.set(n,t)}function kO(n){const t=hm.get(n);return hm.delete(n),t}let MO=()=>location.protocol+"//"+location.host;function qE(n,t){const{pathname:e,search:i,hash:s}=t,a=n.indexOf("#");if(a>-1){let d=s.includes(n.slice(a))?n.slice(a).length:1,m=s.slice(d);return m[0]!=="/"&&(m="/"+m),Ey(m,"")}return Ey(e,n)+i+s}function DO(n,t,e,i){let s=[],a=[],c=null;const d=({state:S})=>{const x=qE(n,location),z=e.value,q=t.value;let K=0;if(S){if(e.value=x,t.value=S,c&&c===z){c=null;return}K=q?S.position-q.position:0}else i(x);s.forEach(ht=>{ht(e.value,z,{delta:K,type:Sc.pop,direction:K?K>0?pc.forward:pc.back:pc.unknown})})};function m(){c=e.value}function g(S){s.push(S);const x=()=>{const z=s.indexOf(S);z>-1&&s.splice(z,1)};return a.push(x),x}function w(){const{history:S}=window;S.state&&S.replaceState(qe({},S.state,{scroll:Jf()}),"")}function E(){for(const S of a)S();a=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:m,listen:g,destroy:E}}function Ay(n,t,e,i=!1,s=!1){return{back:n,current:t,forward:e,replaced:i,position:window.history.length,scroll:s?Jf():null}}function NO(n){const{history:t,location:e}=window,i={value:qE(n,e)},s={value:t.state};s.value||a(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(m,g,w){const E=n.indexOf("#"),S=E>-1?(e.host&&document.querySelector("base")?n:n.slice(E))+m:MO()+n+m;try{t[w?"replaceState":"pushState"](g,"",S),s.value=g}catch(x){console.error(x),e[w?"replace":"assign"](S)}}function c(m,g){const w=qe({},t.state,Ay(s.value.back,m,s.value.forward,!0),g,{position:s.value.position});a(m,w,!0),i.value=m}function d(m,g){const w=qe({},s.value,t.state,{forward:m,scroll:Jf()});a(w.current,w,!0);const E=qe({},Ay(i.value,m,null),{position:w.position+1},g);a(m,E,!1),i.value=m}return{location:i,state:s,push:d,replace:c}}function VO(n){n=SO(n);const t=NO(n),e=DO(n,t.state,t.location,t.replace);function i(a,c=!0){c||e.pauseListeners(),history.go(a)}const s=qe({location:"",base:n,go:i,createHref:CO.bind(null,n)},t,e);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function FO(n){return typeof n=="string"||n&&typeof n=="object"}function $E(n){return typeof n=="string"||typeof n=="symbol"}const jE=Symbol("");var Py;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Py||(Py={}));function fl(n,t){return qe(new Error,{type:n,[jE]:!0},t)}function $s(n,t){return n instanceof Error&&jE in n&&(t==null||!!(n.type&t))}const Sy="[^/]+?",UO={sensitive:!1,strict:!1,start:!0,end:!0},BO=/[.+*?^${}()[\]/\\]/g;function zO(n,t){const e=qe({},UO,t),i=[];let s=e.start?"^":"";const a=[];for(const g of n){const w=g.length?[]:[90];e.strict&&!g.length&&(s+="/");for(let E=0;E<g.length;E++){const S=g[E];let x=40+(e.sensitive?.25:0);if(S.type===0)E||(s+="/"),s+=S.value.replace(BO,"\\$&"),x+=40;else if(S.type===1){const{value:z,repeatable:q,optional:K,regexp:ht}=S;a.push({name:z,repeatable:q,optional:K});const lt=ht||Sy;if(lt!==Sy){x+=10;try{new RegExp(`(${lt})`)}catch(vt){throw new Error(`Invalid custom RegExp for param "${z}" (${lt}): `+vt.message)}}let at=q?`((?:${lt})(?:/(?:${lt}))*)`:`(${lt})`;E||(at=K&&g.length<2?`(?:/${at})`:"/"+at),K&&(at+="?"),s+=at,x+=20,K&&(x+=-8),q&&(x+=-20),lt===".*"&&(x+=-50)}w.push(x)}i.push(w)}if(e.strict&&e.end){const g=i.length-1;i[g][i[g].length-1]+=.7000000000000001}e.strict||(s+="/?"),e.end?s+="$":e.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,e.sensitive?"":"i");function d(g){const w=g.match(c),E={};if(!w)return null;for(let S=1;S<w.length;S++){const x=w[S]||"",z=a[S-1];E[z.name]=x&&z.repeatable?x.split("/"):x}return E}function m(g){let w="",E=!1;for(const S of n){(!E||!w.endsWith("/"))&&(w+="/"),E=!1;for(const x of S)if(x.type===0)w+=x.value;else if(x.type===1){const{value:z,repeatable:q,optional:K}=x,ht=z in g?g[z]:"";if(Hr(ht)&&!q)throw new Error(`Provided param "${z}" is an array but it is not repeatable (* or + modifiers)`);const lt=Hr(ht)?ht.join("/"):ht;if(!lt)if(K)S.length<2&&(w.endsWith("/")?w=w.slice(0,-1):E=!0);else throw new Error(`Missing required param "${z}"`);w+=lt}}return w||"/"}return{re:c,score:i,keys:a,parse:d,stringify:m}}function HO(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=t[e]-n[e];if(i)return i;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function KE(n,t){let e=0;const i=n.score,s=t.score;for(;e<i.length&&e<s.length;){const a=HO(i[e],s[e]);if(a)return a;e++}if(Math.abs(s.length-i.length)===1){if(Ry(i))return 1;if(Ry(s))return-1}return s.length-i.length}function Ry(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const WO={type:0,value:""},qO=/[a-zA-Z0-9_]/;function $O(n){if(!n)return[[]];if(n==="/")return[[WO]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(x){throw new Error(`ERR (${e})/"${g}": ${x}`)}let e=0,i=e;const s=[];let a;function c(){a&&s.push(a),a=[]}let d=0,m,g="",w="";function E(){g&&(e===0?a.push({type:0,value:g}):e===1||e===2||e===3?(a.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:g,regexp:w,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),g="")}function S(){g+=m}for(;d<n.length;){if(m=n[d++],m==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:m==="/"?(g&&E(),c()):m===":"?(E(),e=1):S();break;case 4:S(),e=i;break;case 1:m==="("?e=2:qO.test(m)?S():(E(),e=0,m!=="*"&&m!=="?"&&m!=="+"&&d--);break;case 2:m===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+m:e=3:w+=m;break;case 3:E(),e=0,m!=="*"&&m!=="?"&&m!=="+"&&d--,w="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${g}"`),E(),c(),s}function jO(n,t,e){const i=zO($O(n.path),e),s=qe(i,{record:n,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function KO(n,t){const e=[],i=new Map;t=Oy({strict:!1,end:!0,sensitive:!1},t);function s(E){return i.get(E)}function a(E,S,x){const z=!x,q=xy(E);q.aliasOf=x&&x.record;const K=Oy(t,E),ht=[q];if("alias"in E){const vt=typeof E.alias=="string"?[E.alias]:E.alias;for(const xt of vt)ht.push(xy(qe({},q,{components:x?x.record.components:q.components,path:xt,aliasOf:x?x.record:q})))}let lt,at;for(const vt of ht){const{path:xt}=vt;if(S&&xt[0]!=="/"){const Ut=S.record.path,U=Ut[Ut.length-1]==="/"?"":"/";vt.path=S.record.path+(xt&&U+xt)}if(lt=jO(vt,S,K),x?x.alias.push(lt):(at=at||lt,at!==lt&&at.alias.push(lt),z&&E.name&&!Ly(lt)&&c(E.name)),GE(lt)&&m(lt),q.children){const Ut=q.children;for(let U=0;U<Ut.length;U++)a(Ut[U],lt,x&&x.children[U])}x=x||lt}return at?()=>{c(at)}:dc}function c(E){if($E(E)){const S=i.get(E);S&&(i.delete(E),e.splice(e.indexOf(S),1),S.children.forEach(c),S.alias.forEach(c))}else{const S=e.indexOf(E);S>-1&&(e.splice(S,1),E.record.name&&i.delete(E.record.name),E.children.forEach(c),E.alias.forEach(c))}}function d(){return e}function m(E){const S=QO(E,e);e.splice(S,0,E),E.record.name&&!Ly(E)&&i.set(E.record.name,E)}function g(E,S){let x,z={},q,K;if("name"in E&&E.name){if(x=i.get(E.name),!x)throw fl(1,{location:E});K=x.record.name,z=qe(Cy(S.params,x.keys.filter(at=>!at.optional).concat(x.parent?x.parent.keys.filter(at=>at.optional):[]).map(at=>at.name)),E.params&&Cy(E.params,x.keys.map(at=>at.name))),q=x.stringify(z)}else if(E.path!=null)q=E.path,x=e.find(at=>at.re.test(q)),x&&(z=x.parse(q),K=x.record.name);else{if(x=S.name?i.get(S.name):e.find(at=>at.re.test(S.path)),!x)throw fl(1,{location:E,currentLocation:S});K=x.record.name,z=qe({},S.params,E.params),q=x.stringify(z)}const ht=[];let lt=x;for(;lt;)ht.unshift(lt.record),lt=lt.parent;return{name:K,path:q,params:z,matched:ht,meta:ZO(ht)}}n.forEach(E=>a(E));function w(){e.length=0,i.clear()}return{addRoute:a,resolve:g,removeRoute:c,clearRoutes:w,getRoutes:d,getRecordMatcher:s}}function Cy(n,t){const e={};for(const i of t)i in n&&(e[i]=n[i]);return e}function xy(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:GO(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function GO(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const i in n.components)t[i]=typeof e=="object"?e[i]:e;return t}function Ly(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function ZO(n){return n.reduce((t,e)=>qe(t,e.meta),{})}function Oy(n,t){const e={};for(const i in n)e[i]=i in t?t[i]:n[i];return e}function QO(n,t){let e=0,i=t.length;for(;e!==i;){const a=e+i>>1;KE(n,t[a])<0?i=a:e=a+1}const s=JO(n);return s&&(i=t.lastIndexOf(s,i-1)),i}function JO(n){let t=n;for(;t=t.parent;)if(GE(t)&&KE(n,t)===0)return t}function GE({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function YO(n){const t={};if(n===""||n==="?")return t;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const a=i[s].replace(UE," "),c=a.indexOf("="),d=Pc(c<0?a:a.slice(0,c)),m=c<0?null:Pc(a.slice(c+1));if(d in t){let g=t[d];Hr(g)||(g=t[d]=[g]),g.push(m)}else t[d]=m}return t}function ky(n){let t="";for(let e in n){const i=n[e];if(e=vO(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(Hr(i)?i.map(a=>a&&cm(a)):[i&&cm(i)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+e,a!=null&&(t+="="+a))})}return t}function XO(n){const t={};for(const e in n){const i=n[e];i!==void 0&&(t[e]=Hr(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const tk=Symbol(""),My=Symbol(""),Yf=Symbol(""),ZE=Symbol(""),fm=Symbol("");function Ql(){let n=[];function t(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function Bo(n,t,e,i,s,a=c=>c()){const c=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((d,m)=>{const g=S=>{S===!1?m(fl(4,{from:e,to:t})):S instanceof Error?m(S):FO(S)?m(fl(2,{from:t,to:S})):(c&&i.enterCallbacks[s]===c&&typeof S=="function"&&c.push(S),d())},w=a(()=>n.call(i&&i.instances[s],t,e,g));let E=Promise.resolve(w);n.length<3&&(E=E.then(g)),E.catch(S=>m(S))})}function Vp(n,t,e,i,s=a=>a()){const a=[];for(const c of n)for(const d in c.components){let m=c.components[d];if(!(t!=="beforeRouteEnter"&&!c.instances[d]))if(VE(m)){const w=(m.__vccOpts||m)[t];w&&a.push(Bo(w,e,i,c,d,s))}else{let g=m();a.push(()=>g.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${d}" at "${c.path}"`);const E=aO(w)?w.default:w;c.mods[d]=w,c.components[d]=E;const x=(E.__vccOpts||E)[t];return x&&Bo(x,e,i,c,d,s)()}))}}return a}function Dy(n){const t=fs(Yf),e=fs(ZE),i=Vr(()=>{const m=nl(n.to);return t.resolve(m)}),s=Vr(()=>{const{matched:m}=i.value,{length:g}=m,w=m[g-1],E=e.matched;if(!w||!E.length)return-1;const S=E.findIndex(hl.bind(null,w));if(S>-1)return S;const x=Ny(m[g-2]);return g>1&&Ny(w)===x&&E[E.length-1].path!==x?E.findIndex(hl.bind(null,m[g-2])):S}),a=Vr(()=>s.value>-1&&sk(e.params,i.value.params)),c=Vr(()=>s.value>-1&&s.value===e.matched.length-1&&WE(e.params,i.value.params));function d(m={}){if(rk(m)){const g=t[nl(n.replace)?"replace":"push"](nl(n.to)).catch(dc);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>g),g}return Promise.resolve()}return{route:i,href:Vr(()=>i.value.href),isActive:a,isExactActive:c,navigate:d}}function ek(n){return n.length===1?n[0]:n}const nk=oE({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Dy,setup(n,{slots:t}){const e=qf(Dy(n)),{options:i}=fs(Yf),s=Vr(()=>({[Vy(n.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[Vy(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const a=t.default&&ek(t.default(e));return n.custom?a:kE("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:s.value},a)}}}),ik=nk;function rk(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function sk(n,t){for(const e in t){const i=t[e],s=n[e];if(typeof i=="string"){if(i!==s)return!1}else if(!Hr(s)||s.length!==i.length||i.some((a,c)=>a!==s[c]))return!1}return!0}function Ny(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Vy=(n,t,e)=>n??t??e,ok=oE({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const i=fs(fm),s=Vr(()=>n.route||i.value),a=fs(My,0),c=Vr(()=>{let g=nl(a);const{matched:w}=s.value;let E;for(;(E=w[g])&&!E.components;)g++;return g}),d=Vr(()=>s.value.matched[c.value]);qh(My,Vr(()=>c.value+1)),qh(tk,d),qh(fm,s);const m=Cn();return $h(()=>[m.value,d.value,n.name],([g,w,E],[S,x,z])=>{w&&(w.instances[E]=g,x&&x!==w&&g&&g===S&&(w.leaveGuards.size||(w.leaveGuards=x.leaveGuards),w.updateGuards.size||(w.updateGuards=x.updateGuards))),g&&w&&(!x||!hl(w,x)||!S)&&(w.enterCallbacks[E]||[]).forEach(q=>q(g))},{flush:"post"}),()=>{const g=s.value,w=n.name,E=d.value,S=E&&E.components[w];if(!S)return Fy(e.default,{Component:S,route:g});const x=E.props[w],z=x?x===!0?g.params:typeof x=="function"?x(g):x:null,K=kE(S,qe({},z,t,{onVnodeUnmounted:ht=>{ht.component.isUnmounted&&(E.instances[w]=null)},ref:m}));return Fy(e.default,{Component:K,route:g})||K}}});function Fy(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const ak=ok;function uk(n){const t=KO(n.routes,n),e=n.parseQuery||YO,i=n.stringifyQuery||ky,s=n.history,a=Ql(),c=Ql(),d=Ql(),m=_1(No);let g=No;Gu&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=Dp.bind(null,it=>""+it),E=Dp.bind(null,wO),S=Dp.bind(null,Pc);function x(it,It){let bt,Lt;return $E(it)?(bt=t.getRecordMatcher(it),Lt=It):Lt=it,t.addRoute(Lt,bt)}function z(it){const It=t.getRecordMatcher(it);It&&t.removeRoute(It)}function q(){return t.getRoutes().map(it=>it.record)}function K(it){return!!t.getRecordMatcher(it)}function ht(it,It){if(It=qe({},It||m.value),typeof it=="string"){const j=Np(e,it,It.path),st=t.resolve({path:j.path},It),ft=s.createHref(j.fullPath);return qe(j,st,{params:S(st.params),hash:Pc(j.hash),redirectedFrom:void 0,href:ft})}let bt;if(it.path!=null)bt=qe({},it,{path:Np(e,it.path,It.path).path});else{const j=qe({},it.params);for(const st in j)j[st]==null&&delete j[st];bt=qe({},it,{params:E(j)}),It.params=E(It.params)}const Lt=t.resolve(bt,It),_e=it.hash||"";Lt.params=w(S(Lt.params));const k=IO(i,qe({},it,{hash:gO(_e),path:Lt.path})),D=s.createHref(k);return qe({fullPath:k,hash:_e,query:i===ky?XO(it.query):it.query||{}},Lt,{redirectedFrom:void 0,href:D})}function lt(it){return typeof it=="string"?Np(e,it,m.value.path):qe({},it)}function at(it,It){if(g!==it)return fl(8,{from:It,to:it})}function vt(it){return U(it)}function xt(it){return vt(qe(lt(it),{replace:!0}))}function Ut(it){const It=it.matched[it.matched.length-1];if(It&&It.redirect){const{redirect:bt}=It;let Lt=typeof bt=="function"?bt(it):bt;return typeof Lt=="string"&&(Lt=Lt.includes("?")||Lt.includes("#")?Lt=lt(Lt):{path:Lt},Lt.params={}),qe({query:it.query,hash:it.hash,params:Lt.path!=null?{}:it.params},Lt)}}function U(it,It){const bt=g=ht(it),Lt=m.value,_e=it.state,k=it.force,D=it.replace===!0,j=Ut(bt);if(j)return U(qe(lt(j),{state:typeof j=="object"?qe({},_e,j.state):_e,force:k,replace:D}),It||bt);const st=bt;st.redirectedFrom=It;let ft;return!k&&bO(i,Lt,bt)&&(ft=fl(16,{to:st,from:Lt}),ie(Lt,Lt,!0,!1)),(ft?Promise.resolve(ft):H(st,Lt)).catch(ot=>$s(ot)?$s(ot,2)?ot:Mt(ot):Tt(ot,st,Lt)).then(ot=>{if(ot){if($s(ot,2))return U(qe({replace:D},lt(ot.to),{state:typeof ot.to=="object"?qe({},_e,ot.to.state):_e,force:k}),It||st)}else ot=G(st,Lt,!0,D,_e);return W(st,Lt,ot),ot})}function O(it,It){const bt=at(it,It);return bt?Promise.reject(bt):Promise.resolve()}function N(it){const It=Fe.values().next().value;return It&&typeof It.runWithContext=="function"?It.runWithContext(it):it()}function H(it,It){let bt;const[Lt,_e,k]=lk(it,It);bt=Vp(Lt.reverse(),"beforeRouteLeave",it,It);for(const j of Lt)j.leaveGuards.forEach(st=>{bt.push(Bo(st,it,It))});const D=O.bind(null,it,It);return bt.push(D),qt(bt).then(()=>{bt=[];for(const j of a.list())bt.push(Bo(j,it,It));return bt.push(D),qt(bt)}).then(()=>{bt=Vp(_e,"beforeRouteUpdate",it,It);for(const j of _e)j.updateGuards.forEach(st=>{bt.push(Bo(st,it,It))});return bt.push(D),qt(bt)}).then(()=>{bt=[];for(const j of k)if(j.beforeEnter)if(Hr(j.beforeEnter))for(const st of j.beforeEnter)bt.push(Bo(st,it,It));else bt.push(Bo(j.beforeEnter,it,It));return bt.push(D),qt(bt)}).then(()=>(it.matched.forEach(j=>j.enterCallbacks={}),bt=Vp(k,"beforeRouteEnter",it,It,N),bt.push(D),qt(bt))).then(()=>{bt=[];for(const j of c.list())bt.push(Bo(j,it,It));return bt.push(D),qt(bt)}).catch(j=>$s(j,8)?j:Promise.reject(j))}function W(it,It,bt){d.list().forEach(Lt=>N(()=>Lt(it,It,bt)))}function G(it,It,bt,Lt,_e){const k=at(it,It);if(k)return k;const D=It===No,j=Gu?history.state:{};bt&&(Lt||D?s.replace(it.fullPath,qe({scroll:D&&j&&j.scroll},_e)):s.push(it.fullPath,_e)),m.value=it,ie(it,It,bt,D),Mt()}let V;function Ze(){V||(V=s.listen((it,It,bt)=>{if(!re.listening)return;const Lt=ht(it),_e=Ut(Lt);if(_e){U(qe(_e,{replace:!0,force:!0}),Lt).catch(dc);return}g=Lt;const k=m.value;Gu&&OO(by(k.fullPath,bt.delta),Jf()),H(Lt,k).catch(D=>$s(D,12)?D:$s(D,2)?(U(qe(lt(D.to),{force:!0}),Lt).then(j=>{$s(j,20)&&!bt.delta&&bt.type===Sc.pop&&s.go(-1,!1)}).catch(dc),Promise.reject()):(bt.delta&&s.go(-bt.delta,!1),Tt(D,Lt,k))).then(D=>{D=D||G(Lt,k,!1),D&&(bt.delta&&!$s(D,8)?s.go(-bt.delta,!1):bt.type===Sc.pop&&$s(D,20)&&s.go(-1,!1)),W(Lt,k,D)}).catch(dc)}))}let Xn=Ql(),Ce=Ql(),ae;function Tt(it,It,bt){Mt(it);const Lt=Ce.list();return Lt.length?Lt.forEach(_e=>_e(it,It,bt)):console.error(it),Promise.reject(it)}function Un(){return ae&&m.value!==No?Promise.resolve():new Promise((it,It)=>{Xn.add([it,It])})}function Mt(it){return ae||(ae=!it,Ze(),Xn.list().forEach(([It,bt])=>it?bt(it):It()),Xn.reset()),it}function ie(it,It,bt,Lt){const{scrollBehavior:_e}=n;if(!Gu||!_e)return Promise.resolve();const k=!bt&&kO(by(it.fullPath,0))||(Lt||!bt)&&history.state&&history.state.scroll||null;return r_().then(()=>_e(it,It,k)).then(D=>D&&LO(D)).catch(D=>Tt(D,it,It))}const ve=it=>s.go(it);let ye;const Fe=new Set,re={currentRoute:m,listening:!0,addRoute:x,removeRoute:z,clearRoutes:t.clearRoutes,hasRoute:K,getRoutes:q,resolve:ht,options:n,push:vt,replace:xt,go:ve,back:()=>ve(-1),forward:()=>ve(1),beforeEach:a.add,beforeResolve:c.add,afterEach:d.add,onError:Ce.add,isReady:Un,install(it){const It=this;it.component("RouterLink",ik),it.component("RouterView",ak),it.config.globalProperties.$router=It,Object.defineProperty(it.config.globalProperties,"$route",{enumerable:!0,get:()=>nl(m)}),Gu&&!ye&&m.value===No&&(ye=!0,vt(s.location).catch(_e=>{}));const bt={};for(const _e in No)Object.defineProperty(bt,_e,{get:()=>m.value[_e],enumerable:!0});it.provide(Yf,It),it.provide(ZE,JT(bt)),it.provide(fm,m);const Lt=it.unmount;Fe.add(it),it.unmount=function(){Fe.delete(it),Fe.size<1&&(g=No,V&&V(),V=null,m.value=No,ye=!1,ae=!1),Lt()}}};function qt(it){return it.reduce((It,bt)=>It.then(()=>N(bt)),Promise.resolve())}return re}function lk(n,t){const e=[],i=[],s=[],a=Math.max(t.matched.length,n.matched.length);for(let c=0;c<a;c++){const d=t.matched[c];d&&(n.matched.find(g=>hl(g,d))?i.push(d):e.push(d));const m=n.matched[c];m&&(t.matched.find(g=>hl(g,m))||s.push(m))}return[e,i,s]}function f_(){return fs(Yf)}const ck="/icons/icon-192x192.png",hk={name:"Home",setup(){const n=f_();return{goToLogin:()=>{n.push("/login")},goToRegister:()=>{n.push("/register")},goToInfo:()=>{n.push("/info")}}}},fk={class:"home-page d-flex flex-column justify-content-center align-items-center min-vh-100"},dk={class:"auth-buttons"},pk={class:"info-button"};function mk(n,t,e,i,s,a){return Wt(),jt("div",fk,[t[3]||(t[3]=J("div",{class:"logo-container text-center mb-4"},[J("img",{src:ck,alt:"TripMaster Logo",class:"app-logo"})],-1)),t[4]||(t[4]=J("div",{class:"welcome-text text-center my-2"},[J("h1",null,"TripMaster"),J("p",{class:"slogan"},"Start your adventure today and make every journey unforgettable!")],-1)),J("div",dk,[J("button",{onClick:t[0]||(t[0]=(...c)=>i.goToLogin&&i.goToLogin(...c))},"Login"),J("button",{onClick:t[1]||(t[1]=(...c)=>i.goToRegister&&i.goToRegister(...c))},"Register")]),J("div",pk,[J("button",{onClick:t[2]||(t[2]=(...c)=>i.goToInfo&&i.goToInfo(...c))},"Find out more about the app and authors")])])}const _k=or(hk,[["render",mk],["__scopeId","data-v-901e26bc"]]),gk=()=>{};var Uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},vk=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const s=n[e++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[e++];t[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[e++],c=n[e++],d=n[e++],m=((s&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[e++],c=n[e++];t[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return t.join("")},JE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,d=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,w=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|g>>6,x=g&63;m||(x=64,c||(S=64)),i.push(e[w],e[E],e[S],e[x])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(QE(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):vk(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=e[n.charAt(s++)],d=s<n.length?e[n.charAt(s)]:0;++s;const g=s<n.length?e[n.charAt(s)]:64;++s;const E=s<n.length?e[n.charAt(s)]:64;if(++s,a==null||d==null||g==null||E==null)throw new yk;const S=a<<2|d>>4;if(i.push(S),g!==64){const x=d<<4&240|g>>2;if(i.push(x),E!==64){const z=g<<6&192|E;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class yk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wk=function(n){const t=QE(n);return JE.encodeByteArray(t,!0)},_f=function(n){return wk(n).replace(/\./g,"")},YE=function(n){try{return JE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=()=>Tk().__FIREBASE_DEFAULTS__,Ik=()=>{if(typeof process>"u"||typeof Uy>"u")return;const n=Uy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&YE(n[1]);return t&&JSON.parse(t)},Xf=()=>{try{return gk()||Ek()||Ik()||bk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},XE=n=>{var t,e;return(e=(t=Xf())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Ak=n=>{const t=XE(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},t0=()=>{var n;return(n=Xf())===null||n===void 0?void 0:n.config},e0=n=>{var t;return(t=Xf())===null||t===void 0?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_f(JSON.stringify(e)),_f(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mi())}function Ck(){var n;const t=(n=Xf())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ok(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kk(){const n=mi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Mk(){return!Ck()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dk(){try{return typeof indexedDB=="object"}catch{return!1}}function Nk(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var a;t(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="FirebaseError";class uo extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=Vk,Object.setPrototypeOf(this,uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qc.prototype.create)}}class qc{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},s=`${this.service}/${t}`,a=this.errors[t],c=a?Fk(a,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new uo(s,d,i)}}function Fk(n,t){return n.replace(Uk,(e,i)=>{const s=t[i];return s!=null?String(s):`<${i}?>`})}const Uk=/\{\$([^}]+)}/g;function Bk(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function au(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const s of e){if(!i.includes(s))return!1;const a=n[s],c=t[s];if(By(a)&&By(c)){if(!au(a,c))return!1}else if(a!==c)return!1}for(const s of i)if(!e.includes(s))return!1;return!0}function By(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Xl(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");t[decodeURIComponent(s)]=decodeURIComponent(a)}}),t}function tc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function zk(n,t){const e=new Hk(n,t);return e.subscribe.bind(e)}class Hk{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let s;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");Wk(t,["next","error","complete"])?s=t:s={next:t,error:e,complete:i},s.next===void 0&&(s.next=Fp),s.error===void 0&&(s.error=Fp),s.complete===void 0&&(s.complete=Fp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wk(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n){return n&&n._delegate?n._delegate:n}class uu{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Pk;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jk(t))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(t=Xa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xa){return this.instances.has(t)}getOptions(t=Xa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(s)}return s}onInit(t,e){var i;const s=this.normalizeInstanceIdentifier(e),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(t),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&t(c,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const s of i)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$k(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Xa){return this.component?this.component.multipleInstances?t:Xa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $k(n){return n===Xa?void 0:n}function jk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new qk(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xe||(xe={}));const Gk={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Zk=xe.INFO,Qk={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},Jk=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),s=Qk[t];if(s)console[s](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class d_{constructor(t){this.name=t,this._logLevel=Zk,this._logHandler=Jk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Gk[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...t),this._logHandler(this,xe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...t),this._logHandler(this,xe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...t),this._logHandler(this,xe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...t),this._logHandler(this,xe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...t),this._logHandler(this,xe.ERROR,...t)}}const Yk=(n,t)=>t.some(e=>n instanceof e);let zy,Hy;function Xk(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tM(){return Hy||(Hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,dm=new WeakMap,i0=new WeakMap,Up=new WeakMap,p_=new WeakMap;function eM(n){const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{e(Go(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&n0.set(e,n)}).catch(()=>{}),p_.set(t,n),t}function nM(n){if(dm.has(n))return;const t=new Promise((e,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{e(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});dm.set(n,t)}let pm={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return dm.get(n);if(t==="objectStoreNames")return n.objectStoreNames||i0.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Go(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function iM(n){pm=n(pm)}function rM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Bp(this),t,...e);return i0.set(i,t.sort?t.sort():[t]),Go(i)}:tM().includes(n)?function(...t){return n.apply(Bp(this),t),Go(n0.get(this))}:function(...t){return Go(n.apply(Bp(this),t))}}function sM(n){return typeof n=="function"?rM(n):(n instanceof IDBTransaction&&nM(n),Yk(n,Xk())?new Proxy(n,pm):n)}function Go(n){if(n instanceof IDBRequest)return eM(n);if(Up.has(n))return Up.get(n);const t=sM(n);return t!==n&&(Up.set(n,t),p_.set(t,n)),t}const Bp=n=>p_.get(n);function oM(n,t,{blocked:e,upgrade:i,blocking:s,terminated:a}={}){const c=indexedDB.open(n,t),d=Go(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Go(c.result),m.oldVersion,m.newVersion,Go(c.transaction),m)}),e&&c.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),d.then(m=>{a&&m.addEventListener("close",()=>a()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const aM=["get","getKey","getAll","getAllKeys","count"],uM=["put","add","delete","clear"],zp=new Map;function Wy(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(zp.get(t))return zp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,s=uM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(s||aM.includes(e)))return;const a=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[e](...d),s&&m.done]))[0]};return zp.set(t,a),a}iM(n=>({...n,get:(t,e,i)=>Wy(t,e)||n.get(t,e,i),has:(t,e)=>!!Wy(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(cM(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function cM(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const mm="@firebase/app",qy="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new d_("@firebase/app"),hM="@firebase/app-compat",fM="@firebase/analytics-compat",dM="@firebase/analytics",pM="@firebase/app-check-compat",mM="@firebase/app-check",_M="@firebase/auth",gM="@firebase/auth-compat",vM="@firebase/database",yM="@firebase/data-connect",wM="@firebase/database-compat",TM="@firebase/functions",EM="@firebase/functions-compat",IM="@firebase/installations",bM="@firebase/installations-compat",AM="@firebase/messaging",PM="@firebase/messaging-compat",SM="@firebase/performance",RM="@firebase/performance-compat",CM="@firebase/remote-config",xM="@firebase/remote-config-compat",LM="@firebase/storage",OM="@firebase/storage-compat",kM="@firebase/firestore",MM="@firebase/vertexai",DM="@firebase/firestore-compat",NM="firebase",VM="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="[DEFAULT]",FM={[mm]:"fire-core",[hM]:"fire-core-compat",[dM]:"fire-analytics",[fM]:"fire-analytics-compat",[mM]:"fire-app-check",[pM]:"fire-app-check-compat",[_M]:"fire-auth",[gM]:"fire-auth-compat",[vM]:"fire-rtdb",[yM]:"fire-data-connect",[wM]:"fire-rtdb-compat",[TM]:"fire-fn",[EM]:"fire-fn-compat",[IM]:"fire-iid",[bM]:"fire-iid-compat",[AM]:"fire-fcm",[PM]:"fire-fcm-compat",[SM]:"fire-perf",[RM]:"fire-perf-compat",[CM]:"fire-rc",[xM]:"fire-rc-compat",[LM]:"fire-gcs",[OM]:"fire-gcs-compat",[kM]:"fire-fst",[DM]:"fire-fst-compat",[MM]:"fire-vertex","fire-js":"fire-js",[NM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,UM=new Map,gm=new Map;function $y(n,t){try{n.container.addComponent(t)}catch(e){io.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function dl(n){const t=n.name;if(gm.has(t))return io.debug(`There were multiple attempts to register component ${t}.`),!1;gm.set(t,n);for(const e of gf.values())$y(e,n);for(const e of UM.values())$y(e,n);return!0}function m_(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function er(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new qc("app","Firebase",BM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new uu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=VM;function r0(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:_m,automaticDataCollectionEnabled:!1},t),s=i.name;if(typeof s!="string"||!s)throw Zo.create("bad-app-name",{appName:String(s)});if(e||(e=t0()),!e)throw Zo.create("no-options");const a=gf.get(s);if(a){if(au(e,a.options)&&au(i,a.config))return a;throw Zo.create("duplicate-app",{appName:s})}const c=new Kk(s);for(const m of gm.values())c.addComponent(m);const d=new zM(e,i,c);return gf.set(s,d),d}function s0(n=_m){const t=gf.get(n);if(!t&&n===_m&&t0())return r0();if(!t)throw Zo.create("no-app",{appName:n});return t}function Qo(n,t,e){var i;let s=(i=FM[n])!==null&&i!==void 0?i:n;e&&(s+=`-${e}`);const a=s.match(/\s|\//),c=t.match(/\s|\//);if(a||c){const d=[`Unable to register library "${s}" with version "${t}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),io.warn(d.join(" "));return}dl(new uu(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="firebase-heartbeat-database",WM=1,Rc="firebase-heartbeat-store";let Hp=null;function o0(){return Hp||(Hp=oM(HM,WM,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Rc)}catch(e){console.warn(e)}}}}).catch(n=>{throw Zo.create("idb-open",{originalErrorMessage:n.message})})),Hp}async function qM(n){try{const e=(await o0()).transaction(Rc),i=await e.objectStore(Rc).get(a0(n));return await e.done,i}catch(t){if(t instanceof uo)io.warn(t.message);else{const e=Zo.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});io.warn(e.message)}}}async function jy(n,t){try{const i=(await o0()).transaction(Rc,"readwrite");await i.objectStore(Rc).put(t,a0(n)),await i.done}catch(e){if(e instanceof uo)io.warn(e.message);else{const i=Zo.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});io.warn(i.message)}}}function a0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=1024,jM=30;class KM{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ZM(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ky();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>jM){const c=QM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){io.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ky(),{heartbeatsToSend:i,unsentEntries:s}=GM(this._heartbeatsCache.heartbeats),a=_f(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return io.warn(e),""}}}function Ky(){return new Date().toISOString().substring(0,10)}function GM(n,t=$M){const e=[];let i=n.slice();for(const s of n){const a=e.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),Gy(e)>t){a.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),Gy(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class ZM{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dk()?Nk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await qM(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return jy(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return jy(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Gy(n){return _f(JSON.stringify({version:2,heartbeats:n})).length}function QM(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(n){dl(new uu("platform-logger",t=>new lM(t),"PRIVATE")),dl(new uu("heartbeat",t=>new KM(t),"PRIVATE")),Qo(mm,qy,n),Qo(mm,qy,"esm2017"),Qo("fire-js","")}JM("");var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jo,u0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(U,O){function N(){}N.prototype=O.prototype,U.D=O.prototype,U.prototype=new N,U.prototype.constructor=U,U.C=function(H,W,G){for(var V=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)V[Ze-2]=arguments[Ze];return O.prototype[W].apply(H,V)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(U,O,N){N||(N=0);var H=Array(16);if(typeof O=="string")for(var W=0;16>W;++W)H[W]=O.charCodeAt(N++)|O.charCodeAt(N++)<<8|O.charCodeAt(N++)<<16|O.charCodeAt(N++)<<24;else for(W=0;16>W;++W)H[W]=O[N++]|O[N++]<<8|O[N++]<<16|O[N++]<<24;O=U.g[0],N=U.g[1],W=U.g[2];var G=U.g[3],V=O+(G^N&(W^G))+H[0]+3614090360&4294967295;O=N+(V<<7&4294967295|V>>>25),V=G+(W^O&(N^W))+H[1]+3905402710&4294967295,G=O+(V<<12&4294967295|V>>>20),V=W+(N^G&(O^N))+H[2]+606105819&4294967295,W=G+(V<<17&4294967295|V>>>15),V=N+(O^W&(G^O))+H[3]+3250441966&4294967295,N=W+(V<<22&4294967295|V>>>10),V=O+(G^N&(W^G))+H[4]+4118548399&4294967295,O=N+(V<<7&4294967295|V>>>25),V=G+(W^O&(N^W))+H[5]+1200080426&4294967295,G=O+(V<<12&4294967295|V>>>20),V=W+(N^G&(O^N))+H[6]+2821735955&4294967295,W=G+(V<<17&4294967295|V>>>15),V=N+(O^W&(G^O))+H[7]+4249261313&4294967295,N=W+(V<<22&4294967295|V>>>10),V=O+(G^N&(W^G))+H[8]+1770035416&4294967295,O=N+(V<<7&4294967295|V>>>25),V=G+(W^O&(N^W))+H[9]+2336552879&4294967295,G=O+(V<<12&4294967295|V>>>20),V=W+(N^G&(O^N))+H[10]+4294925233&4294967295,W=G+(V<<17&4294967295|V>>>15),V=N+(O^W&(G^O))+H[11]+2304563134&4294967295,N=W+(V<<22&4294967295|V>>>10),V=O+(G^N&(W^G))+H[12]+1804603682&4294967295,O=N+(V<<7&4294967295|V>>>25),V=G+(W^O&(N^W))+H[13]+4254626195&4294967295,G=O+(V<<12&4294967295|V>>>20),V=W+(N^G&(O^N))+H[14]+2792965006&4294967295,W=G+(V<<17&4294967295|V>>>15),V=N+(O^W&(G^O))+H[15]+1236535329&4294967295,N=W+(V<<22&4294967295|V>>>10),V=O+(W^G&(N^W))+H[1]+4129170786&4294967295,O=N+(V<<5&4294967295|V>>>27),V=G+(N^W&(O^N))+H[6]+3225465664&4294967295,G=O+(V<<9&4294967295|V>>>23),V=W+(O^N&(G^O))+H[11]+643717713&4294967295,W=G+(V<<14&4294967295|V>>>18),V=N+(G^O&(W^G))+H[0]+3921069994&4294967295,N=W+(V<<20&4294967295|V>>>12),V=O+(W^G&(N^W))+H[5]+3593408605&4294967295,O=N+(V<<5&4294967295|V>>>27),V=G+(N^W&(O^N))+H[10]+38016083&4294967295,G=O+(V<<9&4294967295|V>>>23),V=W+(O^N&(G^O))+H[15]+3634488961&4294967295,W=G+(V<<14&4294967295|V>>>18),V=N+(G^O&(W^G))+H[4]+3889429448&4294967295,N=W+(V<<20&4294967295|V>>>12),V=O+(W^G&(N^W))+H[9]+568446438&4294967295,O=N+(V<<5&4294967295|V>>>27),V=G+(N^W&(O^N))+H[14]+3275163606&4294967295,G=O+(V<<9&4294967295|V>>>23),V=W+(O^N&(G^O))+H[3]+4107603335&4294967295,W=G+(V<<14&4294967295|V>>>18),V=N+(G^O&(W^G))+H[8]+1163531501&4294967295,N=W+(V<<20&4294967295|V>>>12),V=O+(W^G&(N^W))+H[13]+2850285829&4294967295,O=N+(V<<5&4294967295|V>>>27),V=G+(N^W&(O^N))+H[2]+4243563512&4294967295,G=O+(V<<9&4294967295|V>>>23),V=W+(O^N&(G^O))+H[7]+1735328473&4294967295,W=G+(V<<14&4294967295|V>>>18),V=N+(G^O&(W^G))+H[12]+2368359562&4294967295,N=W+(V<<20&4294967295|V>>>12),V=O+(N^W^G)+H[5]+4294588738&4294967295,O=N+(V<<4&4294967295|V>>>28),V=G+(O^N^W)+H[8]+2272392833&4294967295,G=O+(V<<11&4294967295|V>>>21),V=W+(G^O^N)+H[11]+1839030562&4294967295,W=G+(V<<16&4294967295|V>>>16),V=N+(W^G^O)+H[14]+4259657740&4294967295,N=W+(V<<23&4294967295|V>>>9),V=O+(N^W^G)+H[1]+2763975236&4294967295,O=N+(V<<4&4294967295|V>>>28),V=G+(O^N^W)+H[4]+1272893353&4294967295,G=O+(V<<11&4294967295|V>>>21),V=W+(G^O^N)+H[7]+4139469664&4294967295,W=G+(V<<16&4294967295|V>>>16),V=N+(W^G^O)+H[10]+3200236656&4294967295,N=W+(V<<23&4294967295|V>>>9),V=O+(N^W^G)+H[13]+681279174&4294967295,O=N+(V<<4&4294967295|V>>>28),V=G+(O^N^W)+H[0]+3936430074&4294967295,G=O+(V<<11&4294967295|V>>>21),V=W+(G^O^N)+H[3]+3572445317&4294967295,W=G+(V<<16&4294967295|V>>>16),V=N+(W^G^O)+H[6]+76029189&4294967295,N=W+(V<<23&4294967295|V>>>9),V=O+(N^W^G)+H[9]+3654602809&4294967295,O=N+(V<<4&4294967295|V>>>28),V=G+(O^N^W)+H[12]+3873151461&4294967295,G=O+(V<<11&4294967295|V>>>21),V=W+(G^O^N)+H[15]+530742520&4294967295,W=G+(V<<16&4294967295|V>>>16),V=N+(W^G^O)+H[2]+3299628645&4294967295,N=W+(V<<23&4294967295|V>>>9),V=O+(W^(N|~G))+H[0]+4096336452&4294967295,O=N+(V<<6&4294967295|V>>>26),V=G+(N^(O|~W))+H[7]+1126891415&4294967295,G=O+(V<<10&4294967295|V>>>22),V=W+(O^(G|~N))+H[14]+2878612391&4294967295,W=G+(V<<15&4294967295|V>>>17),V=N+(G^(W|~O))+H[5]+4237533241&4294967295,N=W+(V<<21&4294967295|V>>>11),V=O+(W^(N|~G))+H[12]+1700485571&4294967295,O=N+(V<<6&4294967295|V>>>26),V=G+(N^(O|~W))+H[3]+2399980690&4294967295,G=O+(V<<10&4294967295|V>>>22),V=W+(O^(G|~N))+H[10]+4293915773&4294967295,W=G+(V<<15&4294967295|V>>>17),V=N+(G^(W|~O))+H[1]+2240044497&4294967295,N=W+(V<<21&4294967295|V>>>11),V=O+(W^(N|~G))+H[8]+1873313359&4294967295,O=N+(V<<6&4294967295|V>>>26),V=G+(N^(O|~W))+H[15]+4264355552&4294967295,G=O+(V<<10&4294967295|V>>>22),V=W+(O^(G|~N))+H[6]+2734768916&4294967295,W=G+(V<<15&4294967295|V>>>17),V=N+(G^(W|~O))+H[13]+1309151649&4294967295,N=W+(V<<21&4294967295|V>>>11),V=O+(W^(N|~G))+H[4]+4149444226&4294967295,O=N+(V<<6&4294967295|V>>>26),V=G+(N^(O|~W))+H[11]+3174756917&4294967295,G=O+(V<<10&4294967295|V>>>22),V=W+(O^(G|~N))+H[2]+718787259&4294967295,W=G+(V<<15&4294967295|V>>>17),V=N+(G^(W|~O))+H[9]+3951481745&4294967295,U.g[0]=U.g[0]+O&4294967295,U.g[1]=U.g[1]+(W+(V<<21&4294967295|V>>>11))&4294967295,U.g[2]=U.g[2]+W&4294967295,U.g[3]=U.g[3]+G&4294967295}i.prototype.u=function(U,O){O===void 0&&(O=U.length);for(var N=O-this.blockSize,H=this.B,W=this.h,G=0;G<O;){if(W==0)for(;G<=N;)s(this,U,G),G+=this.blockSize;if(typeof U=="string"){for(;G<O;)if(H[W++]=U.charCodeAt(G++),W==this.blockSize){s(this,H),W=0;break}}else for(;G<O;)if(H[W++]=U[G++],W==this.blockSize){s(this,H),W=0;break}}this.h=W,this.o+=O},i.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var O=1;O<U.length-8;++O)U[O]=0;var N=8*this.o;for(O=U.length-8;O<U.length;++O)U[O]=N&255,N/=256;for(this.u(U),U=Array(16),O=N=0;4>O;++O)for(var H=0;32>H;H+=8)U[N++]=this.g[O]>>>H&255;return U};function a(U,O){var N=d;return Object.prototype.hasOwnProperty.call(N,U)?N[U]:N[U]=O(U)}function c(U,O){this.h=O;for(var N=[],H=!0,W=U.length-1;0<=W;W--){var G=U[W]|0;H&&G==O||(N[W]=G,H=!1)}this.g=N}var d={};function m(U){return-128<=U&&128>U?a(U,function(O){return new c([O|0],0>O?-1:0)}):new c([U|0],0>U?-1:0)}function g(U){if(isNaN(U)||!isFinite(U))return E;if(0>U)return K(g(-U));for(var O=[],N=1,H=0;U>=N;H++)O[H]=U/N|0,N*=4294967296;return new c(O,0)}function w(U,O){if(U.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(U.charAt(0)=="-")return K(w(U.substring(1),O));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=g(Math.pow(O,8)),H=E,W=0;W<U.length;W+=8){var G=Math.min(8,U.length-W),V=parseInt(U.substring(W,W+G),O);8>G?(G=g(Math.pow(O,G)),H=H.j(G).add(g(V))):(H=H.j(N),H=H.add(g(V)))}return H}var E=m(0),S=m(1),x=m(16777216);n=c.prototype,n.m=function(){if(q(this))return-K(this).m();for(var U=0,O=1,N=0;N<this.g.length;N++){var H=this.i(N);U+=(0<=H?H:4294967296+H)*O,O*=4294967296}return U},n.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(z(this))return"0";if(q(this))return"-"+K(this).toString(U);for(var O=g(Math.pow(U,6)),N=this,H="";;){var W=vt(N,O).g;N=ht(N,W.j(O));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(U);if(N=W,z(N))return G+H;for(;6>G.length;)G="0"+G;H=G+H}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function z(U){if(U.h!=0)return!1;for(var O=0;O<U.g.length;O++)if(U.g[O]!=0)return!1;return!0}function q(U){return U.h==-1}n.l=function(U){return U=ht(this,U),q(U)?-1:z(U)?0:1};function K(U){for(var O=U.g.length,N=[],H=0;H<O;H++)N[H]=~U.g[H];return new c(N,~U.h).add(S)}n.abs=function(){return q(this)?K(this):this},n.add=function(U){for(var O=Math.max(this.g.length,U.g.length),N=[],H=0,W=0;W<=O;W++){var G=H+(this.i(W)&65535)+(U.i(W)&65535),V=(G>>>16)+(this.i(W)>>>16)+(U.i(W)>>>16);H=V>>>16,G&=65535,V&=65535,N[W]=V<<16|G}return new c(N,N[N.length-1]&-2147483648?-1:0)};function ht(U,O){return U.add(K(O))}n.j=function(U){if(z(this)||z(U))return E;if(q(this))return q(U)?K(this).j(K(U)):K(K(this).j(U));if(q(U))return K(this.j(K(U)));if(0>this.l(x)&&0>U.l(x))return g(this.m()*U.m());for(var O=this.g.length+U.g.length,N=[],H=0;H<2*O;H++)N[H]=0;for(H=0;H<this.g.length;H++)for(var W=0;W<U.g.length;W++){var G=this.i(H)>>>16,V=this.i(H)&65535,Ze=U.i(W)>>>16,Xn=U.i(W)&65535;N[2*H+2*W]+=V*Xn,lt(N,2*H+2*W),N[2*H+2*W+1]+=G*Xn,lt(N,2*H+2*W+1),N[2*H+2*W+1]+=V*Ze,lt(N,2*H+2*W+1),N[2*H+2*W+2]+=G*Ze,lt(N,2*H+2*W+2)}for(H=0;H<O;H++)N[H]=N[2*H+1]<<16|N[2*H];for(H=O;H<2*O;H++)N[H]=0;return new c(N,0)};function lt(U,O){for(;(U[O]&65535)!=U[O];)U[O+1]+=U[O]>>>16,U[O]&=65535,O++}function at(U,O){this.g=U,this.h=O}function vt(U,O){if(z(O))throw Error("division by zero");if(z(U))return new at(E,E);if(q(U))return O=vt(K(U),O),new at(K(O.g),K(O.h));if(q(O))return O=vt(U,K(O)),new at(K(O.g),O.h);if(30<U.g.length){if(q(U)||q(O))throw Error("slowDivide_ only works with positive integers.");for(var N=S,H=O;0>=H.l(U);)N=xt(N),H=xt(H);var W=Ut(N,1),G=Ut(H,1);for(H=Ut(H,2),N=Ut(N,2);!z(H);){var V=G.add(H);0>=V.l(U)&&(W=W.add(N),G=V),H=Ut(H,1),N=Ut(N,1)}return O=ht(U,W.j(O)),new at(W,O)}for(W=E;0<=U.l(O);){for(N=Math.max(1,Math.floor(U.m()/O.m())),H=Math.ceil(Math.log(N)/Math.LN2),H=48>=H?1:Math.pow(2,H-48),G=g(N),V=G.j(O);q(V)||0<V.l(U);)N-=H,G=g(N),V=G.j(O);z(G)&&(G=S),W=W.add(G),U=ht(U,V)}return new at(W,U)}n.A=function(U){return vt(this,U).h},n.and=function(U){for(var O=Math.max(this.g.length,U.g.length),N=[],H=0;H<O;H++)N[H]=this.i(H)&U.i(H);return new c(N,this.h&U.h)},n.or=function(U){for(var O=Math.max(this.g.length,U.g.length),N=[],H=0;H<O;H++)N[H]=this.i(H)|U.i(H);return new c(N,this.h|U.h)},n.xor=function(U){for(var O=Math.max(this.g.length,U.g.length),N=[],H=0;H<O;H++)N[H]=this.i(H)^U.i(H);return new c(N,this.h^U.h)};function xt(U){for(var O=U.g.length+1,N=[],H=0;H<O;H++)N[H]=U.i(H)<<1|U.i(H-1)>>>31;return new c(N,U.h)}function Ut(U,O){var N=O>>5;O%=32;for(var H=U.g.length-N,W=[],G=0;G<H;G++)W[G]=0<O?U.i(G+N)>>>O|U.i(G+N+1)<<32-O:U.i(G+N);return new c(W,U.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,u0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=w,Jo=c}).apply(typeof Zy<"u"?Zy:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l0,ec,c0,Gh,vm,h0,f0,d0;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,I){return h==Array.prototype||h==Object.prototype||(h[v]=I.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var v=0;v<h.length;++v){var I=h[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=e(this);function s(h,v){if(v)t:{var I=i;h=h.split(".");for(var R=0;R<h.length-1;R++){var Q=h[R];if(!(Q in I))break t;I=I[Q]}h=h[h.length-1],R=I[h],v=v(R),v!=R&&v!=null&&t(I,h,{configurable:!0,writable:!0,value:v})}}function a(h,v){h instanceof String&&(h+="");var I=0,R=!1,Q={next:function(){if(!R&&I<h.length){var et=I++;return{value:v(et,h[et]),done:!1}}return R=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(h){return h||function(){return a(this,function(v,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function w(h,v,I){return h.call.apply(h.bind,arguments)}function E(h,v,I){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,R),h.apply(v,Q)}}return function(){return h.apply(v,arguments)}}function S(h,v,I){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,S.apply(null,arguments)}function x(h,v){var I=Array.prototype.slice.call(arguments,1);return function(){var R=I.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function z(h,v){function I(){}I.prototype=v.prototype,h.aa=v.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(R,Q,et){for(var wt=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)wt[Ve-2]=arguments[Ve];return v.prototype[Q].apply(R,wt)}}function q(h){const v=h.length;if(0<v){const I=Array(v);for(let R=0;R<v;R++)I[R]=h[R];return I}return[]}function K(h,v){for(let I=1;I<arguments.length;I++){const R=arguments[I];if(m(R)){const Q=h.length||0,et=R.length||0;h.length=Q+et;for(let wt=0;wt<et;wt++)h[Q+wt]=R[wt]}else h.push(R)}}class ht{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function lt(h){return/^[\s\xa0]*$/.test(h)}function at(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function vt(h){return vt[" "](h),h}vt[" "]=function(){};var xt=at().indexOf("Gecko")!=-1&&!(at().toLowerCase().indexOf("webkit")!=-1&&at().indexOf("Edge")==-1)&&!(at().indexOf("Trident")!=-1||at().indexOf("MSIE")!=-1)&&at().indexOf("Edge")==-1;function Ut(h,v,I){for(const R in h)v.call(I,h[R],R,h)}function U(h,v){for(const I in h)v.call(void 0,h[I],I,h)}function O(h){const v={};for(const I in h)v[I]=h[I];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(h,v){let I,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(I in R)h[I]=R[I];for(let et=0;et<N.length;et++)I=N[et],Object.prototype.hasOwnProperty.call(R,I)&&(h[I]=R[I])}}function W(h){var v=1;h=h.split(":");const I=[];for(;0<v&&h.length;)I.push(h.shift()),v--;return h.length&&I.push(h.join(":")),I}function G(h){d.setTimeout(()=>{throw h},0)}function V(){var h=Un;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Ze{constructor(){this.h=this.g=null}add(v,I){const R=Xn.get();R.set(v,I),this.h?this.h.next=R:this.g=R,this.h=R}}var Xn=new ht(()=>new Ce,h=>h.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Tt=!1,Un=new Ze,Mt=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(ie)}};var ie=()=>{for(var h;h=V();){try{h.h.call(h.g)}catch(I){G(I)}var v=Xn;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}Tt=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};d.addEventListener("test",I,v),d.removeEventListener("test",I,v)}catch{}return h}();function re(h,v){if(ye.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(xt){t:{try{vt(v.nodeName);var Q=!0;break t}catch{}Q=!1}Q||(v=null)}}else I=="mouseover"?v=h.fromElement:I=="mouseout"&&(v=h.toElement);this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:qt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}z(re,ye);var qt={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),It=0;function bt(h,v,I,R,Q){this.listener=h,this.proxy=null,this.src=v,this.type=I,this.capture=!!R,this.ha=Q,this.key=++It,this.da=this.fa=!1}function Lt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,v,I,R,Q){var et=h.toString();h=this.g[et],h||(h=this.g[et]=[],this.h++);var wt=D(h,v,R,Q);return-1<wt?(v=h[wt],I||(v.fa=!1)):(v=new bt(v,this.src,et,!!R,Q),v.fa=I,h.push(v)),v};function k(h,v){var I=v.type;if(I in h.g){var R=h.g[I],Q=Array.prototype.indexOf.call(R,v,void 0),et;(et=0<=Q)&&Array.prototype.splice.call(R,Q,1),et&&(Lt(v),h.g[I].length==0&&(delete h.g[I],h.h--))}}function D(h,v,I,R){for(var Q=0;Q<h.length;++Q){var et=h[Q];if(!et.da&&et.listener==v&&et.capture==!!I&&et.ha==R)return Q}return-1}var j="closure_lm_"+(1e6*Math.random()|0),st={};function ft(h,v,I,R,Q){if(Array.isArray(v)){for(var et=0;et<v.length;et++)ft(h,v[et],I,R,Q);return null}return I=zt(I),h&&h[it]?h.K(v,I,g(R)?!!R.capture:!1,Q):ot(h,v,I,!1,R,Q)}function ot(h,v,I,R,Q,et){if(!v)throw Error("Invalid event type");var wt=g(Q)?!!Q.capture:!!Q,Ve=Pt(h);if(Ve||(h[j]=Ve=new _e(h)),I=Ve.add(v,I,R,wt,et),I.proxy)return I;if(R=At(),I.proxy=R,R.src=h,R.listener=I,h.addEventListener)Fe||(Q=wt),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),R,Q);else if(h.attachEvent)h.attachEvent(dt(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return I}function At(){function h(I){return v.call(h.src,h.listener,I)}const v=Dt;return h}function Et(h,v,I,R,Q){if(Array.isArray(v))for(var et=0;et<v.length;et++)Et(h,v[et],I,R,Q);else R=g(R)?!!R.capture:!!R,I=zt(I),h&&h[it]?(h=h.i,v=String(v).toString(),v in h.g&&(et=h.g[v],I=D(et,I,R,Q),-1<I&&(Lt(et[I]),Array.prototype.splice.call(et,I,1),et.length==0&&(delete h.g[v],h.h--)))):h&&(h=Pt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=D(v,I,R,Q)),(I=-1<h?v[h]:null)&&yt(I))}function yt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[it])k(v.i,h);else{var I=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(I,R,h.capture):v.detachEvent?v.detachEvent(dt(I),R):v.addListener&&v.removeListener&&v.removeListener(R),(I=Pt(v))?(k(I,h),I.h==0&&(I.src=null,v[j]=null)):Lt(h)}}}function dt(h){return h in st?st[h]:st[h]="on"+h}function Dt(h,v){if(h.da)h=!0;else{v=new re(v,this);var I=h.listener,R=h.ha||h.src;h.fa&&yt(h),h=I.call(R,v)}return h}function Pt(h){return h=h[j],h instanceof _e?h:null}var Nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function zt(h){return typeof h=="function"?h:(h[Nt]||(h[Nt]=function(v){return h.handleEvent(v)}),h[Nt])}function Bt(){ve.call(this),this.i=new _e(this),this.M=this,this.F=null}z(Bt,ve),Bt.prototype[it]=!0,Bt.prototype.removeEventListener=function(h,v,I,R){Et(this,h,v,I,R)};function Kt(h,v){var I,R=h.F;if(R)for(I=[];R;R=R.F)I.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new ye(v,h);else if(v instanceof ye)v.target=v.target||h;else{var Q=v;v=new ye(R,h),H(v,Q)}if(Q=!0,I)for(var et=I.length-1;0<=et;et--){var wt=v.g=I[et];Q=le(wt,R,!0,v)&&Q}if(wt=v.g=h,Q=le(wt,R,!0,v)&&Q,Q=le(wt,R,!1,v)&&Q,I)for(et=0;et<I.length;et++)wt=v.g=I[et],Q=le(wt,R,!1,v)&&Q}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var I=h.g[v],R=0;R<I.length;R++)Lt(I[R]);delete h.g[v],h.h--}}this.F=null},Bt.prototype.K=function(h,v,I,R){return this.i.add(String(h),v,!1,I,R)},Bt.prototype.L=function(h,v,I,R){return this.i.add(String(h),v,!0,I,R)};function le(h,v,I,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var Q=!0,et=0;et<v.length;++et){var wt=v[et];if(wt&&!wt.da&&wt.capture==I){var Ve=wt.listener,vn=wt.ha||wt.src;wt.fa&&k(h.i,wt),Q=Ve.call(vn,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function mn(h,v,I){if(typeof h=="function")I&&(h=S(h,I));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(h,v||0)}function on(h){h.g=mn(()=>{h.g=null,h.i&&(h.i=!1,on(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class kn extends ve{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:on(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(h){ve.call(this),this.h=h,this.g={}}z(_n,ve);var _i=[];function Wi(h){Ut(h.g,function(v,I){this.g.hasOwnProperty(I)&&yt(v)},h),h.g={}}_n.prototype.N=function(){_n.aa.N.call(this),Wi(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=d.JSON.stringify,Bn=d.JSON.parse,Pi=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ha(){}ha.prototype.h=null;function yu(h){return h.h||(h.h=h.i())}function fa(){}var Er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ys(){ye.call(this,"d")}z(ys,ye);function da(){ye.call(this,"c")}z(da,ye);var Ir={},wu=null;function lo(){return wu=wu||new Bt}Ir.La="serverreachability";function pa(h){ye.call(this,Ir.La,h)}z(pa,ye);function ws(h){const v=lo();Kt(v,new pa(v))}Ir.STAT_EVENT="statevent";function co(h,v){ye.call(this,Ir.STAT_EVENT,h),this.stat=v}z(co,ye);function Mn(h){const v=lo();Kt(v,new co(v,h))}Ir.Ma="timingevent";function ho(h,v){ye.call(this,Ir.Ma,h),this.size=v}z(ho,ye);function Ts(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function br(){this.g=!0}br.prototype.xa=function(){this.g=!1};function Si(h,v,I,R,Q,et){h.info(function(){if(h.g)if(et)for(var wt="",Ve=et.split("&"),vn=0;vn<Ve.length;vn++){var Se=Ve[vn].split("=");if(1<Se.length){var de=Se[0];Se=Se[1];var Je=de.split("_");wt=2<=Je.length&&Je[1]=="type"?wt+(de+"="+Se+"&"):wt+(de+"=redacted&")}}else wt=null;else wt=et;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+v+`
`+I+`
`+wt})}function Vt(h,v,I,R,Q,et,wt){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+v+`
`+I+`
`+et+" "+wt})}function Ar(h,v,I,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Eu(h,I)+(R?" "+R:"")})}function Tu(h,v){h.info(function(){return"TIMEOUT: "+v})}br.prototype.info=function(){};function Eu(h,v){if(!h.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var R=I[h];if(!(2>R.length)){var Q=R[1];if(Array.isArray(Q)&&!(1>Q.length)){var et=Q[0];if(et!="noop"&&et!="stop"&&et!="close")for(var wt=1;wt<Q.length;wt++)Q[wt]=""}}}}return an(I)}catch{return v}}var Es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},po;function Ri(){}z(Ri,ha),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},po=new Ri;function qi(h,v,I,R){this.j=h,this.i=v,this.l=I,this.R=R||1,this.U=new _n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Iu}function Iu(){this.i=null,this.g="",this.h=!1}var bu={},ma={};function _a(h,v,I){h.L=1,h.v=ti(rn(v)),h.m=I,h.P=!0,ga(h,null)}function ga(h,v){h.F=Date.now(),Pr(h),h.A=rn(h.v);var I=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),ba(I.i,"t",R),h.C=0,I=h.j.J,h.h=new Iu,h.g=Lu(h.j,I?v:null,!h.m),0<h.O&&(h.M=new kn(S(h.Y,h,h.g),h.O)),v=h.U,I=h.g,R=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(_i[0]=Q.toString()),Q=_i);for(var et=0;et<Q.length;et++){var wt=ft(I,Q[et],R||v.handleEvent,!1,v.h||v);if(!wt)break;v.g[wt.key]=wt}v=h.H?O(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ws(),Si(h.i,h.u,h.A,h.l,h.R,h.m)}qi.prototype.ca=function(h){h=h.target;const v=this.M;v&&hn(h)==3?v.j():this.Y(h)},qi.prototype.Y=function(h){try{if(h==this.g)t:{const Je=hn(this.g);var v=this.g.Ba();const Mi=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Io(this.g)))){this.J||Je!=4||v==7||(v==8||0>=Mi?ws(3):ws(2)),va(this);var I=this.g.Z();this.X=I;e:if(Is(this)){var R=Io(this.g);h="";var Q=R.length,et=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ar(this),bs(this);var wt="";break e}this.h.i=new d.TextDecoder}for(v=0;v<Q;v++)this.h.h=!0,h+=this.h.i.decode(R[v],{stream:!(et&&v==Q-1)});R.length=0,this.h.g+=h,this.C=0,wt=this.h.g}else wt=this.g.oa();if(this.o=I==200,Vt(this.i,this.u,this.A,this.l,this.R,Je,I),this.o){if(this.T&&!this.K){e:{if(this.g){var Ve,vn=this.g;if((Ve=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lt(Ve)){var Se=Ve;break e}}Se=null}if(I=Se)Ar(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$r(this,I);else{this.o=!1,this.s=3,Mn(12),ar(this),bs(this);break t}}if(this.P){I=!0;let ln;for(;!this.J&&this.C<wt.length;)if(ln=mo(this,wt),ln==ma){Je==4&&(this.s=4,Mn(14),I=!1),Ar(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==bu){this.s=4,Mn(15),Ar(this.i,this.l,wt,"[Invalid Chunk]"),I=!1;break}else Ar(this.i,this.l,ln,null),$r(this,ln);if(Is(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||wt.length!=0||this.h.h||(this.s=1,Mn(16),I=!1),this.o=this.o&&I,!I)Ar(this.i,this.l,wt,"[Invalid Chunked Response]"),ar(this),bs(this);else if(0<wt.length&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.ba&&!de.M&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+wt.length),yi(de),de.M=!0,Mn(11))}}else Ar(this.i,this.l,wt,null),$r(this,wt);Je==4&&ar(this),this.o&&!this.J&&(Je==4?ze(this.j,this):(this.o=!1,Pr(this)))}else Ca(this.g),I==400&&0<wt.indexOf("Unknown SID")?(this.s=3,Mn(12)):(this.s=0,Mn(13)),ar(this),bs(this)}}}catch{}finally{}};function Is(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function mo(h,v){var I=h.C,R=v.indexOf(`
`,I);return R==-1?ma:(I=Number(v.substring(I,R)),isNaN(I)?bu:(R+=1,R+I>v.length?ma:(v=v.slice(R,R+I),h.C=R+I,v)))}qi.prototype.cancel=function(){this.J=!0,ar(this)};function Pr(h){h.S=Date.now()+h.I,Au(h,h.I)}function Au(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ts(S(h.ba,h),v)}function va(h){h.B&&(d.clearTimeout(h.B),h.B=null)}qi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Tu(this.i,this.A),this.L!=2&&(ws(),Mn(17)),ar(this),this.s=2,bs(this)):Au(this,this.S-h)};function bs(h){h.j.G==0||h.J||ze(h.j,h)}function ar(h){va(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Wi(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function $r(h,v){try{var I=h.j;if(I.G!=0&&(I.g==h||Pe(I.h,h))){if(!h.K&&Pe(I.h,h)&&I.G==3){try{var R=I.Da.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){t:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Jr(I),Rs(I);else break t;xs(I),Mn(18)}}else I.za=Q[1],0<I.za-I.T&&37500>Q[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ts(S(I.Za,I),6e3));if(1>=Kr(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ki(I,11)}else if((h.K||I.g==h)&&Jr(I),!lt(v))for(Q=I.Da.g.parse(v),v=0;v<Q.length;v++){let Se=Q[v];if(I.T=Se[0],Se=Se[1],I.G==2)if(Se[0]=="c"){I.K=Se[1],I.ia=Se[2];const de=Se[3];de!=null&&(I.la=de,I.j.info("VER="+I.la));const Je=Se[4];Je!=null&&(I.Aa=Je,I.j.info("SVER="+I.Aa));const Mi=Se[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(R=1.5*Mi,I.L=R,I.j.info("backChannelRequestTimeoutMs_="+R)),R=I;const ln=h.g;if(ln){const Os=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var et=R.h;et.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(et.j=et.l,et.g=new Set,et.h&&(Ue(et,et.h),et.h=null))}if(R.D){const fr=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;fr&&(R.ya=fr,Xt(R.I,R.D,fr))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),R=I;var wt=h;if(R.qa=Yr(R,R.J?R.ia:null,R.W),wt.K){Gr(R.h,wt);var Ve=wt,vn=R.L;vn&&(Ve.I=vn),Ve.B&&(va(Ve),Pr(Ve)),R.g=wt}else ji(R);0<I.i.length&&Rr(I)}else Se[0]!="stop"&&Se[0]!="close"||Ki(I,7);else I.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ki(I,7):Ss(I):Se[0]!="noop"&&I.l&&I.l.ta(Se),I.v=0)}}ws(4)}catch{}}var jr=class{constructor(h,v){this.g=h,this.map=v}};function ya(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Kr(h){return h.h?1:h.g?h.g.size:0}function Pe(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ue(h,v){h.g?h.g.add(v):h.h=v}function Gr(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}ya.prototype.cancel=function(){if(this.i=ur(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ur(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const I of h.g.values())v=v.concat(I.D);return v}return q(h.i)}function lr(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var v=[],I=h.length,R=0;R<I;R++)v.push(h[R]);return v}v=[],I=0;for(R in h)v[I++]=h[R];return v}function Ta(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var v=[];h=h.length;for(var I=0;I<h;I++)v.push(I);return v}v=[],I=0;for(const R in h)v[I++]=R;return v}}}function se(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var I=Ta(h),R=lr(h),Q=R.length,et=0;et<Q;et++)v.call(void 0,R[et],I&&I[et],h)}var Ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _o(h,v){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var R=h[I].indexOf("="),Q=null;if(0<=R){var et=h[I].substring(0,R);Q=h[I].substring(R+1)}else et=h[I];v(et,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Ci(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ci){this.h=h.h,As(this,h.j),this.o=h.o,this.g=h.g,$i(this,h.s),this.l=h.l;var v=h.i,I=new hr;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),cr(this,I),this.m=h.m}else h&&(v=String(h).match(Ge))?(this.h=!1,As(this,v[1]||"",!0),this.o=gi(v[2]||""),this.g=gi(v[3]||"",!0),$i(this,v[4]),this.l=gi(v[5]||"",!0),cr(this,v[6]||"",!0),this.m=gi(v[7]||"")):(this.h=!1,this.i=new hr(null,this.h))}Ci.prototype.toString=function(){var h=[],v=this.j;v&&h.push(zn(v,Sr,!0),":");var I=this.g;return(I||v=="file")&&(h.push("//"),(v=this.o)&&h.push(zn(v,Sr,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(zn(I,I.charAt(0)=="/"?vo:Ea,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",zn(I,yo)),h.join("")};function rn(h){return new Ci(h)}function As(h,v,I){h.j=I?gi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function $i(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function cr(h,v,I){v instanceof hr?(h.i=v,xi(h.i,h.h)):(I||(v=zn(v,Ps)),h.i=new hr(v,h.h))}function Xt(h,v,I){h.i.set(v,I)}function ti(h){return Xt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function gi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function zn(h,v,I){return typeof h=="string"?(h=encodeURI(h).replace(v,go),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function go(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Sr=/[#\/\?@]/g,Ea=/[#\?:]/g,vo=/[#\?]/g,Ps=/[#\?@]/g,yo=/#/g;function hr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function vi(h){h.g||(h.g=new Map,h.h=0,h.i&&_o(h.i,function(v,I){h.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}n=hr.prototype,n.add=function(h,v){vi(this),this.i=null,h=Gt(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(v),this.h+=1,this};function Ia(h,v){vi(h),v=Gt(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function wo(h,v){return vi(h),v=Gt(h,v),h.g.has(v)}n.forEach=function(h,v){vi(this),this.g.forEach(function(I,R){I.forEach(function(Q){h.call(v,Q,R,this)},this)},this)},n.na=function(){vi(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let R=0;R<v.length;R++){const Q=h[R];for(let et=0;et<Q.length;et++)I.push(v[R])}return I},n.V=function(h){vi(this);let v=[];if(typeof h=="string")wo(this,h)&&(v=v.concat(this.g.get(Gt(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)v=v.concat(h[I])}return v},n.set=function(h,v){return vi(this),this.i=null,h=Gt(this,h),wo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function ba(h,v,I){Ia(h,v),0<I.length&&(h.i=null,h.g.set(Gt(h,v),q(I)),h.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var R=v[I];const et=encodeURIComponent(String(R)),wt=this.V(R);for(R=0;R<wt.length;R++){var Q=et;wt[R]!==""&&(Q+="="+encodeURIComponent(String(wt[R]))),h.push(Q)}}return this.i=h.join("&")};function Gt(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function xi(h,v){v&&!h.j&&(vi(h),h.i=null,h.g.forEach(function(I,R){var Q=R.toLowerCase();R!=Q&&(Ia(this,R),ba(this,Q,I))},h)),h.j=v}function Be(h,v){const I=new br;if(d.Image){const R=new Image;R.onload=x(ei,I,"TestLoadImage: loaded",!0,v,R),R.onerror=x(ei,I,"TestLoadImage: error",!1,v,R),R.onabort=x(ei,I,"TestLoadImage: abort",!1,v,R),R.ontimeout=x(ei,I,"TestLoadImage: timeout",!1,v,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function Pu(h,v){const I=new br,R=new AbortController,Q=setTimeout(()=>{R.abort(),ei(I,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then(et=>{clearTimeout(Q),et.ok?ei(I,"TestPingServer: ok",!0,v):ei(I,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),ei(I,"TestPingServer: error",!1,v)})}function ei(h,v,I,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(I)}catch{}}function Aa(){this.g=new Pi}function Pa(h,v,I){const R=I||"";try{se(h,function(Q,et){let wt=Q;g(Q)&&(wt=an(Q)),v.push(R+et+"="+encodeURIComponent(wt))})}catch(Q){throw v.push(R+"type="+encodeURIComponent("_badmap")),Q}}function Li(h){this.l=h.Ub||null,this.j=h.eb||!1}z(Li,ha),Li.prototype.g=function(){return new Zr(this.l,this.j)},Li.prototype.i=function(h){return function(){return h}}({});function Zr(h,v){Bt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(Zr,Bt),n=Zr.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,we(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,te(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,we(this)),this.g&&(this.readyState=3,we(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qr(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qr(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?te(this):we(this),this.readyState==3&&Qr(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,te(this))},n.Qa=function(h){this.g&&(this.response=h,te(this))},n.ga=function(){this.g&&te(this)};function te(h){h.readyState=4,h.l=null,h.j=null,h.v=null,we(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var I=v.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=v.next();return h.join(`\r
`)};function we(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Sa(h){let v="";return Ut(h,function(I,R){v+=R,v+=":",v+=I,v+=`\r
`}),v}function To(h,v,I){t:{for(R in I){var R=!1;break t}R=!0}R||(I=Sa(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):Xt(h,v,I))}function Xe(h){Bt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(Xe,Bt);var Su=/^https?$/i,Ra=["POST","PUT"];n=Xe.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,I,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():po.g(),this.v=this.o?yu(this.o):yu(po),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(et){Ru(this,et);return}if(h=I||"",I=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)I.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const et of R.keys())I.set(et,R.get(et));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(I.keys()).find(et=>et.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ra,v,void 0))||R||Q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[et,wt]of I)this.g.setRequestHeader(et,wt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hn(this),this.u=!0,this.g.send(h),this.u=!1}catch(et){Ru(this,et)}};function Ru(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Eo(h),un(h)}function Eo(h){h.A||(h.A=!0,Kt(h,"complete"),Kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Kt(this,"complete"),Kt(this,"abort"),un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Xe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ee(this):this.bb())},n.bb=function(){Ee(this)};function Ee(h){if(h.h&&typeof c<"u"&&(!h.v[1]||hn(h)!=4||h.Z()!=2)){if(h.u&&hn(h)==4)mn(h.Ea,0,h);else if(Kt(h,"readystatechange"),hn(h)==4){h.h=!1;try{const wt=h.Z();t:switch(wt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var I;if(!(I=v)){var R;if(R=wt===0){var Q=String(h.D).match(Ge)[1]||null;!Q&&d.self&&d.self.location&&(Q=d.self.location.protocol.slice(0,-1)),R=!Su.test(Q?Q.toLowerCase():"")}I=R}if(I)Kt(h,"complete"),Kt(h,"success");else{h.m=6;try{var et=2<hn(h)?h.g.statusText:""}catch{et=""}h.l=et+" ["+h.Z()+"]",Eo(h)}}finally{un(h)}}}}function un(h,v){if(h.g){Hn(h);const I=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Kt(h,"ready");try{I.onreadystatechange=R}catch{}}}function Hn(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function hn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Bn(v)}};function Io(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ca(h){const v={};h=(h.g&&2<=hn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(lt(h[R]))continue;var I=W(h[R]);const Q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const et=v[Q]||[];v[Q]=et,et.push(I)}U(v,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gn(h,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||v}function xa(h){this.Aa=0,this.i=[],this.j=new br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gn("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gn("baseRetryDelayMs",5e3,h),this.cb=gn("retryDelaySeedMs",1e4,h),this.Wa=gn("forwardChannelMaxRetries",2,h),this.wa=gn("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ya(h&&h.concurrentRequestLimit),this.Da=new Aa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xa.prototype,n.la=8,n.G=1,n.connect=function(h,v,I,R){Mn(0),this.W=h,this.H=v||{},I&&R!==void 0&&(this.H.OSID=I,this.H.OAID=R),this.F=this.X,this.I=Yr(this,null,this.W),Rr(this)};function Ss(h){if(La(h),h.G==3){var v=h.U++,I=rn(h.I);if(Xt(I,"SID",h.K),Xt(I,"RID",v),Xt(I,"TYPE","terminate"),Cs(h,I),v=new qi(h,h.j,v),v.L=2,v.v=ti(rn(I)),I=!1,d.navigator&&d.navigator.sendBeacon)try{I=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&d.Image&&(new Image().src=v.v,I=!0),I||(v.g=Lu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Pr(v)}xu(h)}function Rs(h){h.g&&(yi(h),h.g.cancel(),h.g=null)}function La(h){Rs(h),h.u&&(d.clearTimeout(h.u),h.u=null),Jr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Rr(h){if(!wa(h.h)&&!h.s){h.s=!0;var v=h.Ga;ae||Mt(),Tt||(ae(),Tt=!0),Un.add(v,h),h.B=0}}function Cu(h,v){return Kr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ts(S(h.Ga,h,v),Oi(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new qi(this,this.j,h);let et=this.o;if(this.S&&(et?(et=O(et),H(et,this.S)):et=this.S),this.m!==null||this.O||(Q.H=et,et=null),this.P)t:{for(var v=0,I=0;I<this.i.length;I++){e:{var R=this.i[I];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break e}R=void 0}if(R===void 0)break;if(v+=R,4096<v){v=I;break t}if(v===4096||I===this.i.length-1){v=I+1;break t}}v=1e3}else v=1e3;v=Wn(this,Q,v),I=rn(this.I),Xt(I,"RID",h),Xt(I,"CVER",22),this.D&&Xt(I,"X-HTTP-Session-Id",this.D),Cs(this,I),et&&(this.O?v="headers="+encodeURIComponent(String(Sa(et)))+"&"+v:this.m&&To(I,this.m,et)),Ue(this.h,Q),this.Ua&&Xt(I,"TYPE","init"),this.P?(Xt(I,"$req",v),Xt(I,"SID","null"),Q.T=!0,_a(Q,I,null)):_a(Q,I,v),this.G=2}}else this.G==3&&(h?Qe(this,h):this.i.length==0||wa(this.h)||Qe(this))};function Qe(h,v){var I;v?I=v.l:I=h.U++;const R=rn(h.I);Xt(R,"SID",h.K),Xt(R,"RID",I),Xt(R,"AID",h.T),Cs(h,R),h.m&&h.o&&To(R,h.m,h.o),I=new qi(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Wn(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ue(h.h,I),_a(I,R,v)}function Cs(h,v){h.H&&Ut(h.H,function(I,R){Xt(v,R,I)}),h.l&&se({},function(I,R){Xt(v,R,I)})}function Wn(h,v,I){I=Math.min(h.i.length,I);var R=h.l?S(h.l.Na,h.l,h):null;t:{var Q=h.i;let et=-1;for(;;){const wt=["count="+I];et==-1?0<I?(et=Q[0].g,wt.push("ofs="+et)):et=0:wt.push("ofs="+et);let Ve=!0;for(let vn=0;vn<I;vn++){let Se=Q[vn].g;const de=Q[vn].map;if(Se-=et,0>Se)et=Math.max(0,Q[vn].g-100),Ve=!1;else try{Pa(de,wt,"req"+Se+"_")}catch{R&&R(de)}}if(Ve){R=wt.join("&");break t}}}return h=h.i.splice(0,I),v.D=h,R}function ji(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ae||Mt(),Tt||(ae(),Tt=!0),Un.add(v,h),h.v=0}}function xs(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ts(S(h.Fa,h),Oi(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Cr(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ts(S(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mn(10),Rs(this),Cr(this))};function yi(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Cr(h){h.g=new qi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=rn(h.qa);Xt(v,"RID","rpc"),Xt(v,"SID",h.K),Xt(v,"AID",h.T),Xt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xt(v,"TO",h.ja),Xt(v,"TYPE","xmlhttp"),Cs(h,v),h.m&&h.o&&To(v,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=ti(rn(v)),I.m=null,I.P=!0,ga(I,h)}n.Za=function(){this.C!=null&&(this.C=null,Rs(this),xs(this),Mn(19))};function Jr(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ze(h,v){var I=null;if(h.g==v){Jr(h),yi(h),h.g=null;var R=2}else if(Pe(h.h,v))I=v.D,Gr(h.h,v),R=1;else return;if(h.G!=0){if(v.o)if(R==1){I=v.m?v.m.length:0,v=Date.now()-v.F;var Q=h.B;R=lo(),Kt(R,new ho(R,I)),Rr(h)}else ji(h);else if(Q=v.s,Q==3||Q==0&&0<v.X||!(R==1&&Cu(h,v)||R==2&&xs(h)))switch(I&&0<I.length&&(v=h.h,v.i=v.i.concat(I)),Q){case 1:Ki(h,5);break;case 4:Ki(h,10);break;case 3:Ki(h,6);break;default:Ki(h,2)}}}function Oi(h,v){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*v}function Ki(h,v){if(h.j.info("Error code "+v),v==2){var I=S(h.fb,h),R=h.Xa;const Q=!R;R=new Ci(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||As(R,"https"),ti(R),Q?Be(R.toString(),I):Pu(R.toString(),I)}else Mn(2);h.G=0,h.l&&h.l.sa(v),xu(h),La(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Mn(2)):(this.j.info("Failed to ping google.com"),Mn(1))};function xu(h){if(h.G=0,h.ka=[],h.l){const v=ur(h.h);(v.length!=0||h.i.length!=0)&&(K(h.ka,v),K(h.ka,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.ra()}}function Yr(h,v,I){var R=I instanceof Ci?rn(I):new Ci(I);if(R.g!="")v&&(R.g=v+"."+R.g),$i(R,R.s);else{var Q=d.location;R=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;var et=new Ci(null);R&&As(et,R),v&&(et.g=v),Q&&$i(et,Q),I&&(et.l=I),R=et}return I=h.D,v=h.ya,I&&v&&Xt(R,I,v),Xt(R,"VER",h.la),Cs(h,R),R}function Lu(h,v,I){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Xe(new Li({eb:I})):new Xe(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oa(){}n=Oa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ls(){}Ls.prototype.g=function(h,v){return new En(h,v)};function En(h,v){Bt.call(this),this.g=new xa(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!lt(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!lt(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ki(this)}z(En,Bt),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Ss(this.g)},En.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=an(h),h=I);v.i.push(new jr(v.Ya++,h)),v.G==3&&Rr(v)},En.prototype.N=function(){this.g.l=null,delete this.j,Ss(this.g),delete this.g,En.aa.N.call(this)};function wi(h){ys.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){t:{for(const I in v){h=I;break t}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}z(wi,ys);function xr(){da.call(this),this.status=1}z(xr,da);function ki(h){this.g=h}z(ki,Oa),ki.prototype.ua=function(){Kt(this.g,"a")},ki.prototype.ta=function(h){Kt(this.g,new wi(h))},ki.prototype.sa=function(h){Kt(this.g,new xr)},ki.prototype.ra=function(){Kt(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,d0=function(){return new Ls},f0=function(){return lo()},h0=Ir,vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Gh=Es,fo.COMPLETE="complete",c0=fo,fa.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,ec=fa,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,l0=Xe}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const Qy="@firebase/firestore",Jy="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new d_("@firebase/firestore");function Zu(){return lu.logLevel}function Ot(n,...t){if(lu.logLevel<=xe.DEBUG){const e=t.map(__);lu.debug(`Firestore (${bl}): ${n}`,...e)}}function ro(n,...t){if(lu.logLevel<=xe.ERROR){const e=t.map(__);lu.error(`Firestore (${bl}): ${n}`,...e)}}function pl(n,...t){if(lu.logLevel<=xe.WARN){const e=t.map(__);lu.warn(`Firestore (${bl}): ${n}`,...e)}}function __(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(n="Unexpected state"){const t=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: `+n;throw ro(t),new Error(t)}function Ke(n,t){n||ne()}function ce(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends uo{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class YM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ai.UNAUTHENTICATED))}shutdown(){}}class XM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class tD{constructor(t){this.t=t,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Ke(this.o===void 0);let i=this.i;const s=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let a=new to;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new to,t.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const m=a;t.enqueueRetryable(async()=>{await m.promise,await s(this.currentUser)})},d=m=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new to)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new p0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ke(t===null||typeof t=="string"),new ai(t)}}class eD{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class nD{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new eD(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ai.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iD{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,er(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Ke(this.o===void 0);const i=a=>{a.error!=null&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.R;return this.R=a.token,Ot("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>i(a))};const s=a=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Yy(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ke(typeof e.token=="string"),this.R=e.token,new Yy(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=rD(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<e&&(i+=t.charAt(s[a]%62))}return i}}function Ae(n,t){return n<t?-1:n>t?1:0}function ym(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),s=t.codePointAt(e);if(i!==s){if(i<128&&s<128)return Ae(i,s);{const a=m0(),c=sD(a.encode(Xy(n,e)),a.encode(Xy(t,e)));return c!==0?c:Ae(i,s)}}e+=i>65535?2:1}return Ae(n.length,t.length)}function Xy(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function sD(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Ae(n[e],t[e]);return Ae(n.length,t.length)}function ml(n,t,e){return n.length===t.length&&n.every((i,s)=>e(i,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=-62135596800,ew=1e6;class Vn{static now(){return Vn.fromMillis(Date.now())}static fromDate(t){return Vn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*ew);return new Vn(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new kt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new kt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<tw)throw new kt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ew}_compareTo(t){return this.seconds===t.seconds?Ae(this.nanoseconds,t.nanoseconds):Ae(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-tw;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(t){return new ue(t)}static min(){return new ue(new Vn(0,0))}static max(){return new ue(new Vn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="__name__";class ls{constructor(t,e,i){e===void 0?e=0:e>t.length&&ne(),i===void 0?i=t.length-e:i>t.length-e&&ne(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return ls.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ls?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let s=0;s<i;s++){const a=ls.compareSegments(t.get(s),e.get(s));if(a!==0)return a}return Ae(t.length,e.length)}static compareSegments(t,e){const i=ls.isNumericId(t),s=ls.isNumericId(e);return i&&!s?-1:!i&&s?1:i&&s?ls.extractNumericId(t).compare(ls.extractNumericId(e)):ym(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Jo.fromString(t.substring(4,t.length-2))}}class sn extends ls{construct(t,e,i){return new sn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new kt(mt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(s=>s.length>0))}return new sn(e)}static emptyPath(){return new sn([])}}const oD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends ls{construct(t,e,i){return new Jn(t,e,i)}static isValidIdentifier(t){return oD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nw}static keyField(){return new Jn([nw])}static fromServerFormat(t){const e=[];let i="",s=0;const a=()=>{if(i.length===0)throw new kt(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;s<t.length;){const d=t[s];if(d==="\\"){if(s+1===t.length)throw new kt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new kt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(a(),s++)}if(a(),c)throw new kt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jn(e)}static emptyPath(){return new Jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.path=t}static fromPath(t){return new $t(sn.fromString(t))}static fromName(t){return new $t(sn.fromString(t).popFirst(5))}static empty(){return new $t(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&sn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return sn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $t(new sn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=-1;function aD(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(i===1e9?new Vn(e+1,0):new Vn(e,i));return new ta(s,$t.empty(),t)}function uD(n){return new ta(n.readTime,n.key,Cc)}class ta{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ta(ue.min(),$t.empty(),Cc)}static max(){return new ta(ue.max(),$t.empty(),Cc)}}function lD(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=$t.comparator(n.documentKey,t.documentKey),e!==0?e:Ae(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(n){if(n.code!==mt.FAILED_PRECONDITION||n.message!==cD)throw n;Ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new pt((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(e,a).next(i,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof pt?e:pt.resolve(e)}catch(e){return pt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):pt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):pt.reject(e)}static resolve(t){return new pt((e,i)=>{e(t)})}static reject(t){return new pt((e,i)=>{i(t)})}static waitFor(t){return new pt((e,i)=>{let s=0,a=0,c=!1;t.forEach(d=>{++s,d.next(()=>{++a,c&&a===s&&e()},m=>i(m))}),c=!0,a===s&&e()})}static or(t){let e=pt.resolve(!1);for(const i of t)e=e.next(s=>s?pt.resolve(s):i());return e}static forEach(t,e){const i=[];return t.forEach((s,a)=>{i.push(e.call(this,s,a))}),this.waitFor(i)}static mapArray(t,e){return new pt((i,s)=>{const a=t.length,c=new Array(a);let d=0;for(let m=0;m<a;m++){const g=m;e(t[g]).next(w=>{c[g]=w,++d,d===a&&i(c)},w=>s(w))}})}static doWhile(t,e){return new pt((i,s)=>{const a=()=>{t()===!0?e().next(()=>{a()},s):i()};a()})}}function fD(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Pl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.oe(i),this._e=i=>e.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}td.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=-1;function ed(n){return n==null}function vf(n){return n===0&&1/n==-1/0}function dD(n){return typeof n=="number"&&Number.isInteger(n)&&!vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="";function pD(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=iw(t)),t=mD(n.get(e),t);return iw(t)}function mD(n,t){let e=t;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":e+="";break;case g0:e+="";break;default:e+=a}}return e}function iw(n){return n+g0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function mu(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function v0(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,e){this.comparator=t,this.root=e||Zn.EMPTY}insert(t,e){return new pn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(t){return new pn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return e+i.left.size;s<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nh(this.root,t,this.comparator,!0)}}class Nh{constructor(t,e,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?i(t.key,e):1,e&&s&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Zn{constructor(t,e,i,s,a){this.key=t,this.value=e,this.color=i??Zn.RED,this.left=s??Zn.EMPTY,this.right=a??Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,s,a){return new Zn(t??this.key,e??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let s=this;const a=i(t,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(t,e,i),null):a===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return Zn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const t=this.left.check();if(t!==this.right.check())throw ne();return t+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(t,e,i,s,a){return this}insert(t,e,i){return new Zn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this.comparator=t,this.data=new pn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new sw(this.data.getIterator())}getIteratorFrom(t){return new sw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Fn)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Fn(this.comparator);return e.data=t,e}}class sw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.fields=t,t.sort(Jn.comparator)}static empty(){return new Fr([])}unionWith(t){let e=new Fn(Jn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Fr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ml(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new y0("Invalid base64 string: "+a):a}}(t);return new Yn(e)}static fromUint8Array(t){const e=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(t);return new Yn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ae(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const _D=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(n){if(Ke(!!n),typeof n=="string"){let t=0;const e=_D.exec(n);if(Ke(!!e),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function na(n){return typeof n=="string"?Yn.fromBase64String(n):Yn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="server_timestamp",T0="__type__",E0="__previous_value__",I0="__local_write_time__";function v_(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[T0])===null||e===void 0?void 0:e.stringValue)===w0}function nd(n){const t=n.mapValue.fields[E0];return v_(t)?nd(t):t}function xc(n){const t=ea(n.mapValue.fields[I0].timestampValue);return new Vn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(t,e,i,s,a,c,d,m,g){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g}}const yf="(default)";class Lc{constructor(t,e){this.projectId=t,this.database=e||yf}static empty(){return new Lc("","")}get isDefaultDatabase(){return this.database===yf}isEqual(t){return t instanceof Lc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="__type__",vD="__max__",Vh={mapValue:{}},A0="__vector__",wf="value";function ia(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?v_(n)?4:wD(n)?9007199254740991:yD(n)?10:11:ne()}function vs(n,t){if(n===t)return!0;const e=ia(n);if(e!==ia(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return xc(n).isEqual(xc(t));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=ea(s.timestampValue),d=ea(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,a){return na(s.bytesValue).isEqual(na(a.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,a){return Pn(s.geoPointValue.latitude)===Pn(a.geoPointValue.latitude)&&Pn(s.geoPointValue.longitude)===Pn(a.geoPointValue.longitude)}(n,t);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Pn(s.integerValue)===Pn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Pn(s.doubleValue),d=Pn(a.doubleValue);return c===d?vf(c)===vf(d):isNaN(c)&&isNaN(d)}return!1}(n,t);case 9:return ml(n.arrayValue.values||[],t.arrayValue.values||[],vs);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},d=a.mapValue.fields||{};if(rw(c)!==rw(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!vs(c[m],d[m])))return!1;return!0}(n,t);default:return ne()}}function Oc(n,t){return(n.values||[]).find(e=>vs(e,t))!==void 0}function _l(n,t){if(n===t)return 0;const e=ia(n),i=ia(t);if(e!==i)return Ae(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,t.booleanValue);case 2:return function(a,c){const d=Pn(a.integerValue||a.doubleValue),m=Pn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,t);case 3:return ow(n.timestampValue,t.timestampValue);case 4:return ow(xc(n),xc(t));case 5:return ym(n.stringValue,t.stringValue);case 6:return function(a,c){const d=na(a),m=na(c);return d.compareTo(m)}(n.bytesValue,t.bytesValue);case 7:return function(a,c){const d=a.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const w=Ae(d[g],m[g]);if(w!==0)return w}return Ae(d.length,m.length)}(n.referenceValue,t.referenceValue);case 8:return function(a,c){const d=Ae(Pn(a.latitude),Pn(c.latitude));return d!==0?d:Ae(Pn(a.longitude),Pn(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return aw(n.arrayValue,t.arrayValue);case 10:return function(a,c){var d,m,g,w;const E=a.fields||{},S=c.fields||{},x=(d=E[wf])===null||d===void 0?void 0:d.arrayValue,z=(m=S[wf])===null||m===void 0?void 0:m.arrayValue,q=Ae(((g=x==null?void 0:x.values)===null||g===void 0?void 0:g.length)||0,((w=z==null?void 0:z.values)===null||w===void 0?void 0:w.length)||0);return q!==0?q:aw(x,z)}(n.mapValue,t.mapValue);case 11:return function(a,c){if(a===Vh.mapValue&&c===Vh.mapValue)return 0;if(a===Vh.mapValue)return 1;if(c===Vh.mapValue)return-1;const d=a.fields||{},m=Object.keys(d),g=c.fields||{},w=Object.keys(g);m.sort(),w.sort();for(let E=0;E<m.length&&E<w.length;++E){const S=ym(m[E],w[E]);if(S!==0)return S;const x=_l(d[m[E]],g[w[E]]);if(x!==0)return x}return Ae(m.length,w.length)}(n.mapValue,t.mapValue);default:throw ne()}}function ow(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ae(n,t);const e=ea(n),i=ea(t),s=Ae(e.seconds,i.seconds);return s!==0?s:Ae(e.nanos,i.nanos)}function aw(n,t){const e=n.values||[],i=t.values||[];for(let s=0;s<e.length&&s<i.length;++s){const a=_l(e[s],i[s]);if(a)return a}return Ae(e.length,i.length)}function gl(n){return wm(n)}function wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=ea(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return na(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return $t.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",s=!0;for(const a of e.values||[])s?s=!1:i+=",",i+=wm(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${wm(e.fields[c])}`;return s+"}"}(n.mapValue):ne()}function Zh(n){switch(ia(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=nd(n);return t?16+Zh(t):16;case 5:return 2*n.stringValue.length;case 6:return na(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Zh(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return mu(i.fields,(a,c)=>{s+=a.length+Zh(c)}),s}(n.mapValue);default:throw ne()}}function uw(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Tm(n){return!!n&&"integerValue"in n}function y_(n){return!!n&&"arrayValue"in n}function lw(n){return!!n&&"nullValue"in n}function cw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qh(n){return!!n&&"mapValue"in n}function yD(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[b0])===null||e===void 0?void 0:e.stringValue)===A0}function mc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return mu(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=mc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=mc(n.arrayValue.values[e]);return t}return Object.assign({},n)}function wD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t){this.value=t}static empty(){return new vr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Qh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=mc(e)}setAll(t){let e=Jn.emptyPath(),i={},s=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const m=this.getFieldsMap(e);this.applyChanges(m,i,s),i={},s=[],e=d.popLast()}c?i[d.lastSegment()]=mc(c):s.push(d.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,i,s)}delete(t){const e=this.field(t.popLast());Qh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return vs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=e.mapValue.fields[t.get(i)];Qh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,i){mu(e,(s,a)=>t[s]=a);for(const s of i)delete t[s]}clone(){return new vr(mc(this.value))}}function P0(n){const t=[];return mu(n.fields,(e,i)=>{const s=new Jn([e]);if(Qh(i)){const a=P0(i.mapValue).fields;if(a.length===0)t.push(s);else for(const c of a)t.push(s.child(c))}else t.push(s)}),new Fr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(t,e,i,s,a,c,d){this.key=t,this.documentType=e,this.version=i,this.readTime=s,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(t){return new ci(t,0,ue.min(),ue.min(),ue.min(),vr.empty(),0)}static newFoundDocument(t,e,i,s){return new ci(t,1,e,ue.min(),i,s,0)}static newNoDocument(t,e){return new ci(t,2,e,ue.min(),ue.min(),vr.empty(),0)}static newUnknownDocument(t,e){return new ci(t,3,e,ue.min(),ue.min(),vr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ci&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(t,e){this.position=t,this.inclusive=e}}function hw(n,t,e){let i=0;for(let s=0;s<n.position.length;s++){const a=t[s],c=n.position[s];if(a.field.isKeyField()?i=$t.comparator($t.fromName(c.referenceValue),e.key):i=_l(c,e.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function fw(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!vs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e="asc"){this.field=t,this.dir=e}}function TD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{}class Ln extends S0{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new ID(t,e,i):e==="array-contains"?new PD(t,i):e==="in"?new SD(t,i):e==="not-in"?new RD(t,i):e==="array-contains-any"?new CD(t,i):new Ln(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new bD(t,i):new AD(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(_l(e,this.value)):e!==null&&ia(this.value)===ia(e)&&this.matchesComparison(_l(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends S0{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Wr(t,e)}matches(t){return R0(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function R0(n){return n.op==="and"}function C0(n){return ED(n)&&R0(n)}function ED(n){for(const t of n.filters)if(t instanceof Wr)return!1;return!0}function Em(n){if(n instanceof Ln)return n.field.canonicalString()+n.op.toString()+gl(n.value);if(C0(n))return n.filters.map(t=>Em(t)).join(",");{const t=n.filters.map(e=>Em(e)).join(",");return`${n.op}(${t})`}}function x0(n,t){return n instanceof Ln?function(i,s){return s instanceof Ln&&i.op===s.op&&i.field.isEqual(s.field)&&vs(i.value,s.value)}(n,t):n instanceof Wr?function(i,s){return s instanceof Wr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,c,d)=>a&&x0(c,s.filters[d]),!0):!1}(n,t):void ne()}function L0(n){return n instanceof Ln?function(e){return`${e.field.canonicalString()} ${e.op} ${gl(e.value)}`}(n):n instanceof Wr?function(e){return e.op.toString()+" {"+e.getFilters().map(L0).join(" ,")+"}"}(n):"Filter"}class ID extends Ln{constructor(t,e,i){super(t,e,i),this.key=$t.fromName(i.referenceValue)}matches(t){const e=$t.comparator(t.key,this.key);return this.matchesComparison(e)}}class bD extends Ln{constructor(t,e){super(t,"in",e),this.keys=O0("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class AD extends Ln{constructor(t,e){super(t,"not-in",e),this.keys=O0("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function O0(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>$t.fromName(i.referenceValue))}class PD extends Ln{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return y_(e)&&Oc(e.arrayValue,this.value)}}class SD extends Ln{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Oc(this.value.arrayValue,e)}}class RD extends Ln{constructor(t,e){super(t,"not-in",e)}matches(t){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Oc(this.value.arrayValue,e)}}class CD extends Ln{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!y_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Oc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t,e=null,i=[],s=[],a=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=c,this.endAt=d,this.le=null}}function dw(n,t=null,e=[],i=[],s=null,a=null,c=null){return new xD(n,t,e,i,s,a,c)}function w_(n){const t=ce(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Em(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),ed(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>gl(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>gl(i)).join(",")),t.le=e}return t.le}function T_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!TD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!x0(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!fw(n.startAt,t.startAt)&&fw(n.endAt,t.endAt)}function Im(n){return $t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,e=null,i=[],s=[],a=null,c="F",d=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=m,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function LD(n,t,e,i,s,a,c,d){return new jc(n,t,e,i,s,a,c,d)}function E_(n){return new jc(n)}function pw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k0(n){return n.collectionGroup!==null}function _c(n){const t=ce(n);if(t.he===null){t.he=[];const e=new Set;for(const a of t.explicitOrderBy)t.he.push(a),e.add(a.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Fn(Jn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(t).forEach(a=>{e.has(a.canonicalString())||a.isKeyField()||t.he.push(new Ef(a,i))}),e.has(Jn.keyField().canonicalString())||t.he.push(new Ef(Jn.keyField(),i))}return t.he}function ds(n){const t=ce(n);return t.Pe||(t.Pe=OD(t,_c(n))),t.Pe}function OD(n,t){if(n.limitType==="F")return dw(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ef(s.field,a)});const e=n.endAt?new Tf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Tf(n.startAt.position,n.startAt.inclusive):null;return dw(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function bm(n,t){const e=n.filters.concat([t]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Am(n,t,e){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function id(n,t){return T_(ds(n),ds(t))&&n.limitType===t.limitType}function M0(n){return`${w_(ds(n))}|lt:${n.limitType}`}function Qu(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(s=>L0(s)).join(", ")}]`),ed(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(s=>gl(s)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(s=>gl(s)).join(",")),`Target(${i})`}(ds(n))}; limitType=${n.limitType})`}function rd(n,t){return t.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):$t.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,t)&&function(i,s){for(const a of _c(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,t)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,t)&&function(i,s){return!(i.startAt&&!function(c,d,m){const g=hw(c,d,m);return c.inclusive?g<=0:g<0}(i.startAt,_c(i),s)||i.endAt&&!function(c,d,m){const g=hw(c,d,m);return c.inclusive?g>=0:g>0}(i.endAt,_c(i),s))}(n,t)}function kD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function D0(n){return(t,e)=>{let i=!1;for(const s of _c(n)){const a=MD(s,t,e);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function MD(n,t,e){const i=n.field.isKeyField()?$t.comparator(t.key,e.key):function(a,c,d){const m=c.data.field(a),g=d.data.field(a);return m!==null&&g!==null?_l(m,g):ne()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return void(s[a]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[e]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){mu(this.inner,(e,i)=>{for(const[s,a]of i)t(s,a)})}isEmpty(){return v0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new pn($t.comparator);function so(){return DD}const N0=new pn($t.comparator);function nc(...n){let t=N0;for(const e of n)t=t.insert(e.key,e);return t}function V0(n){let t=N0;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function tu(){return gc()}function F0(){return gc()}function gc(){return new _u(n=>n.toString(),(n,t)=>n.isEqual(t))}const ND=new pn($t.comparator),VD=new Fn($t.comparator);function Le(...n){let t=VD;for(const e of n)t=t.add(e);return t}const FD=new Fn(Ae);function UD(){return FD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(t)?"-0":t}}function U0(n){return{integerValue:""+n}}function BD(n,t){return dD(t)?U0(t):I_(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this._=void 0}}function zD(n,t,e){return n instanceof If?function(s,a){const c={fields:{[T0]:{stringValue:w0},[I0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&v_(a)&&(a=nd(a)),a&&(c.fields[E0]=a),{mapValue:c}}(e,t):n instanceof kc?z0(n,t):n instanceof Mc?H0(n,t):function(s,a){const c=B0(s,a),d=mw(c)+mw(s.Ie);return Tm(c)&&Tm(s.Ie)?U0(d):I_(s.serializer,d)}(n,t)}function HD(n,t,e){return n instanceof kc?z0(n,t):n instanceof Mc?H0(n,t):e}function B0(n,t){return n instanceof bf?function(i){return Tm(i)||function(a){return!!a&&"doubleValue"in a}(i)}(t)?t:{integerValue:0}:null}class If extends sd{}class kc extends sd{constructor(t){super(),this.elements=t}}function z0(n,t){const e=W0(t);for(const i of n.elements)e.some(s=>vs(s,i))||e.push(i);return{arrayValue:{values:e}}}class Mc extends sd{constructor(t){super(),this.elements=t}}function H0(n,t){let e=W0(t);for(const i of n.elements)e=e.filter(s=>!vs(s,i));return{arrayValue:{values:e}}}class bf extends sd{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function mw(n){return Pn(n.integerValue||n.doubleValue)}function W0(n){return y_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function WD(n,t){return n.field.isEqual(t.field)&&function(i,s){return i instanceof kc&&s instanceof kc||i instanceof Mc&&s instanceof Mc?ml(i.elements,s.elements,vs):i instanceof bf&&s instanceof bf?vs(i.Ie,s.Ie):i instanceof If&&s instanceof If}(n.transform,t.transform)}class qD{constructor(t,e){this.version=t,this.transformResults=e}}class eo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new eo}static exists(t){return new eo(void 0,t)}static updateTime(t){return new eo(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Jh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class od{}function q0(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new j0(n.key,eo.none()):new Kc(n.key,n.data,eo.none());{const e=n.data,i=vr.empty();let s=new Fn(Jn.comparator);for(let a of t.fields)if(!s.has(a)){let c=e.field(a);c===null&&a.length>1&&(a=a.popLast(),c=e.field(a)),c===null?i.delete(a):i.set(a,c),s=s.add(a)}return new gu(n.key,i,new Fr(s.toArray()),eo.none())}}function $D(n,t,e){n instanceof Kc?function(s,a,c){const d=s.value.clone(),m=gw(s.fieldTransforms,a,c.transformResults);d.setAll(m),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):n instanceof gu?function(s,a,c){if(!Jh(s.precondition,a))return void a.convertToUnknownDocument(c.version);const d=gw(s.fieldTransforms,a,c.transformResults),m=a.data;m.setAll($0(s)),m.setAll(d),a.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,t,e):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function vc(n,t,e,i){return n instanceof Kc?function(a,c,d,m){if(!Jh(a.precondition,c))return d;const g=a.value.clone(),w=vw(a.fieldTransforms,m,c);return g.setAll(w),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof gu?function(a,c,d,m){if(!Jh(a.precondition,c))return d;const g=vw(a.fieldTransforms,m,c),w=c.data;return w.setAll($0(a)),w.setAll(g),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(E=>E.field))}(n,t,e,i):function(a,c,d){return Jh(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,t,e)}function jD(n,t){let e=null;for(const i of n.fieldTransforms){const s=t.data.field(i.field),a=B0(i.transform,s||null);a!=null&&(e===null&&(e=vr.empty()),e.set(i.field,a))}return e||null}function _w(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ml(i,s,(a,c)=>WD(a,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Kc extends od{constructor(t,e,i,s=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gu extends od{constructor(t,e,i,s,a=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $0(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function gw(n,t,e){const i=new Map;Ke(n.length===e.length);for(let s=0;s<e.length;s++){const a=n[s],c=a.transform,d=t.data.field(a.field);i.set(a.field,HD(c,d,e[s]))}return i}function vw(n,t,e){const i=new Map;for(const s of n){const a=s.transform,c=e.data.field(s.field);i.set(s.field,zD(a,c,t))}return i}class j0 extends od{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KD extends od{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(t,e,i,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(t.key)&&$D(a,t,i[s])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=vc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=vc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=F0();return this.mutations.forEach(s=>{const a=t.get(s.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=e.has(s.key)?null:d;const m=q0(c,d);m!==null&&i.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(ue.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Le())}isEqual(t){return this.batchId===t.batchId&&ml(this.mutations,t.mutations,(e,i)=>_w(e,i))&&ml(this.baseMutations,t.baseMutations,(e,i)=>_w(e,i))}}class b_{constructor(t,e,i,s){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=s}static from(t,e,i){Ke(t.mutations.length===i.length);let s=function(){return ND}();const a=t.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,i[c].version);return new b_(t,e,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn,Ne;function JD(n){switch(n){case mt.OK:return ne();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return ne()}}function K0(n){if(n===void 0)return ro("GRPC error has no .code"),mt.UNKNOWN;switch(n){case Rn.OK:return mt.OK;case Rn.CANCELLED:return mt.CANCELLED;case Rn.UNKNOWN:return mt.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return mt.INTERNAL;case Rn.UNAVAILABLE:return mt.UNAVAILABLE;case Rn.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case Rn.NOT_FOUND:return mt.NOT_FOUND;case Rn.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case Rn.ABORTED:return mt.ABORTED;case Rn.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case Rn.DATA_LOSS:return mt.DATA_LOSS;default:return ne()}}(Ne=Rn||(Rn={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Jo([4294967295,4294967295],0);function yw(n){const t=m0().encode(n),e=new u0;return e.update(t),new Uint8Array(e.digest())}function ww(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Jo([e,i],0),new Jo([s,a],0)]}class A_{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ic(`Invalid padding: ${e}`);if(i<0)throw new ic(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ic(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Jo.fromNumber(this.Ee)}Ae(t,e,i){let s=t.add(e.multiply(Jo.fromNumber(i)));return s.compare(YD)===1&&(s=new Jo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=yw(t),[i,s]=ww(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(i,s,a);if(!this.Re(c))return!1}return!0}static create(t,e,i){const s=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),c=new A_(a,s,e);return i.forEach(d=>c.insert(d)),c}insert(t){if(this.Ee===0)return;const e=yw(t),[i,s]=ww(e);for(let a=0;a<this.hashCount;a++){const c=this.Ae(i,s,a);this.Ve(c)}}Ve(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,e,i,s,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const s=new Map;return s.set(t,Gc.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new ad(ue.min(),s,new pn(Ae),so(),Le())}}class Gc{constructor(t,e,i,s,a){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Gc(i,e,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,e,i,s){this.me=t,this.removedTargetIds=e,this.key=i,this.fe=s}}class G0{constructor(t,e){this.targetId=t,this.ge=e}}class Z0{constructor(t,e,i=Yn.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=s}}class Tw{constructor(){this.pe=0,this.ye=Ew(),this.we=Yn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Le(),e=Le(),i=Le();return this.ye.forEach((s,a)=>{switch(a){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:i=i.add(s);break;default:ne()}}),new Gc(this.we,this.Se,t,e,i)}Me(){this.be=!1,this.ye=Ew()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Ke(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class XD{constructor(t){this.ke=t,this.qe=new Map,this.Qe=so(),this.$e=Fh(),this.Ue=Fh(),this.Ke=new pn(Ae)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const i=this.He(e);switch(t.state){case 0:this.Je(e)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(e);break;case 3:this.Je(e)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),i.Ce(t.resumeToken));break;default:ne()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((i,s)=>{this.Je(s)&&e(s)})}Ze(t){const e=t.targetId,i=t.ge.count,s=this.Xe(e);if(s){const a=s.target;if(Im(a))if(i===0){const c=new $t(a.path);this.ze(e,c,ci.newNoDocument(c,ue.min()))}else Ke(i===1);else{const c=this.et(e);if(c!==i){const d=this.tt(t),m=d?this.nt(d,t,c):1;if(m!==0){this.Ye(e);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,g)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=e;let c,d;try{c=na(i).toUint8Array()}catch(m){if(m instanceof y0)return pl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new A_(c,s,a)}catch(m){return pl(m instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ee===0?null:d}nt(t,e,i){return e.ge.count===i-this.st(t,e.targetId)?0:2}st(t,e){const i=this.ke.getRemoteKeysForTarget(e);let s=0;return i.forEach(a=>{const c=this.ke.it(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.mightContain(d)||(this.ze(e,a,null),s++)}),s}ot(t){const e=new Map;this.qe.forEach((a,c)=>{const d=this.Xe(c);if(d){if(a.current&&Im(d.target)){const m=new $t(d.target.path);this._t(m).has(c)||this.ut(c,m)||this.ze(c,m,ci.newNoDocument(m,t))}a.ve&&(e.set(c,a.Fe()),a.Me())}});let i=Le();this.Ue.forEach((a,c)=>{let d=!0;c.forEachWhile(m=>{const g=this.Xe(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.Qe.forEach((a,c)=>c.setReadTime(t));const s=new ad(t,e,this.Ke,this.Qe,i);return this.Qe=so(),this.$e=Fh(),this.Ue=Fh(),this.Ke=new pn(Ae),s}Ge(t,e){if(!this.Je(t))return;const i=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,i),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,i){if(!this.Je(t))return;const s=this.He(t);this.ut(t,e)?s.xe(e,1):s.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),i&&(this.Qe=this.Qe.insert(e,i))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Tw,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Fn(Ae),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Fn(Ae),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||Ot("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Tw),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function Fh(){return new pn($t.comparator)}function Ew(){return new pn($t.comparator)}const tN={asc:"ASCENDING",desc:"DESCENDING"},eN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nN={and:"AND",or:"OR"};class iN{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Pm(n,t){return n.useProto3Json||ed(t)?t:{value:t}}function Af(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Q0(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function rN(n,t){return Af(n,t.toTimestamp())}function ps(n){return Ke(!!n),ue.fromTimestamp(function(e){const i=ea(e);return new Vn(i.seconds,i.nanos)}(n))}function P_(n,t){return Sm(n,t).canonicalString()}function Sm(n,t){const e=function(s){return new sn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function J0(n){const t=sn.fromString(n);return Ke(nI(t)),t}function Rm(n,t){return P_(n.databaseId,t.path)}function Wp(n,t){const e=J0(t);if(e.get(1)!==n.databaseId.projectId)throw new kt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new kt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new $t(X0(e))}function Y0(n,t){return P_(n.databaseId,t)}function sN(n){const t=J0(n);return t.length===4?sn.emptyPath():X0(t)}function Cm(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function X0(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Iw(n,t,e){return{name:Rm(n,t),fields:e.value.mapValue.fields}}function oN(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ne()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(g,w){return g.useProto3Json?(Ke(w===void 0||typeof w=="string"),Yn.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Yn.fromUint8Array(w||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(g){const w=g.code===void 0?mt.UNKNOWN:K0(g.code);return new kt(w,g.message||"")}(c);e=new Z0(i,s,a,d||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Wp(n,i.document.name),a=ps(i.document.updateTime),c=i.document.createTime?ps(i.document.createTime):ue.min(),d=new vr({mapValue:{fields:i.document.fields}}),m=ci.newFoundDocument(s,a,c,d),g=i.targetIds||[],w=i.removedTargetIds||[];e=new Yh(g,w,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Wp(n,i.document),a=i.readTime?ps(i.readTime):ue.min(),c=ci.newNoDocument(s,a),d=i.removedTargetIds||[];e=new Yh([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Wp(n,i.document),a=i.removedTargetIds||[];e=new Yh([],a,s,null)}else{if(!("filter"in t))return ne();{t.filter;const i=t.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,c=new QD(s,a),d=i.targetId;e=new G0(d,c)}}return e}function aN(n,t){let e;if(t instanceof Kc)e={update:Iw(n,t.key,t.value)};else if(t instanceof j0)e={delete:Rm(n,t.key)};else if(t instanceof gu)e={update:Iw(n,t.key,t.data),updateMask:_N(t.fieldMask)};else{if(!(t instanceof KD))return ne();e={verify:Rm(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(a,c){const d=c.transform;if(d instanceof If)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof kc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Mc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bf)return{fieldPath:c.field.canonicalString(),increment:d.Ie};throw ne()}(0,i))),t.precondition.isNone||(e.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:rN(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ne()}(n,t.precondition)),e}function uN(n,t){return n&&n.length>0?(Ke(t!==void 0),n.map(e=>function(s,a){let c=s.updateTime?ps(s.updateTime):ps(a);return c.isEqual(ue.min())&&(c=ps(a)),new qD(c,s.transformResults||[])}(e,t))):[]}function lN(n,t){return{documents:[Y0(n,t.path)]}}function cN(n,t){const e={structuredQuery:{}},i=t.path;let s;t.collectionGroup!==null?(s=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=Y0(n,s);const a=function(g){if(g.length!==0)return eI(Wr.create(g,"and"))}(t.filters);a&&(e.structuredQuery.where=a);const c=function(g){if(g.length!==0)return g.map(w=>function(S){return{field:Ju(S.field),direction:dN(S.dir)}}(w))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=Pm(n,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ht:e,parent:s}}function hN(n){let t=sN(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let s=null;if(i>0){Ke(i===1);const w=e.from[0];w.allDescendants?s=w.collectionId:t=t.child(w.collectionId)}let a=[];e.where&&(a=function(E){const S=tI(E);return S instanceof Wr&&C0(S)?S.getFilters():[S]}(e.where));let c=[];e.orderBy&&(c=function(E){return E.map(S=>function(z){return new Ef(Yu(z.field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(S))}(e.orderBy));let d=null;e.limit&&(d=function(E){let S;return S=typeof E=="object"?E.value:E,ed(S)?null:S}(e.limit));let m=null;e.startAt&&(m=function(E){const S=!!E.before,x=E.values||[];return new Tf(x,S)}(e.startAt));let g=null;return e.endAt&&(g=function(E){const S=!E.before,x=E.values||[];return new Tf(x,S)}(e.endAt)),LD(t,s,c,a,d,"F",m,g)}function fN(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function tI(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Yu(e.unaryFilter.field);return Ln.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Yu(e.unaryFilter.field);return Ln.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Yu(e.unaryFilter.field);return Ln.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yu(e.unaryFilter.field);return Ln.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(e){return Ln.create(Yu(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Wr.create(e.compositeFilter.filters.map(i=>tI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne()}}(e.compositeFilter.op))}(n):ne()}function dN(n){return tN[n]}function pN(n){return eN[n]}function mN(n){return nN[n]}function Ju(n){return{fieldPath:n.canonicalString()}}function Yu(n){return Jn.fromServerFormat(n.fieldPath)}function eI(n){return n instanceof Ln?function(e){if(e.op==="=="){if(cw(e.value))return{unaryFilter:{field:Ju(e.field),op:"IS_NAN"}};if(lw(e.value))return{unaryFilter:{field:Ju(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(cw(e.value))return{unaryFilter:{field:Ju(e.field),op:"IS_NOT_NAN"}};if(lw(e.value))return{unaryFilter:{field:Ju(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ju(e.field),op:pN(e.op),value:e.value}}}(n):n instanceof Wr?function(e){const i=e.getFilters().map(s=>eI(s));return i.length===1?i[0]:{compositeFilter:{op:mN(e.op),filters:i}}}(n):ne()}function _N(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function nI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(t,e,i,s,a=ue.min(),c=ue.min(),d=Yn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new jo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.Tt=t}}function vN(n){const t=hN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Am(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.Tn=new wN}addToCollectionParentIndex(t,e){return this.Tn.add(e),pt.resolve()}getCollectionParents(t,e){return pt.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return pt.resolve()}deleteFieldIndex(t,e){return pt.resolve()}deleteAllFieldIndexes(t){return pt.resolve()}createTargetIndexes(t,e){return pt.resolve()}getDocumentsMatchingTarget(t,e){return pt.resolve(null)}getIndexType(t,e){return pt.resolve(0)}getFieldIndexes(t,e){return pt.resolve([])}getNextCollectionGroupToUpdate(t){return pt.resolve(null)}getMinOffset(t,e){return pt.resolve(ta.min())}getMinOffsetFromCollectionGroup(t,e){return pt.resolve(ta.min())}updateCollectionGroup(t,e,i){return pt.resolve()}updateIndexEntries(t,e){return pt.resolve()}}class wN{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e]||new Fn(sn.comparator),a=!s.has(i);return this.index[e]=s.add(i),a}has(t){const e=t.lastSegment(),i=t.popLast(),s=this.index[e];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Fn(sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iI=41943040;class Bi{static withCacheSize(t){return new Bi(t,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(iI,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new vl(0)}static Kn(){return new vl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="LruGarbageCollector",TN=1048576;function Pw([n,t],[e,i]){const s=Ae(n,e);return s===0?Ae(t,i):s}class EN{constructor(t){this.Hn=t,this.buffer=new Fn(Pw),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Pw(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class IN{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Ot(Aw,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pl(e)?Ot(Aw,"Ignoring IndexedDB error during garbage collection: ",e):await Al(e)}await this.er(3e5)})}}class bN{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return pt.resolve(td.ae);const i=new EN(e);return this.tr.forEachTarget(t,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(t,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.tr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Ot("LruGarbageCollector","Garbage collection skipped; disabled"),pt.resolve(bw)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bw):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let i,s,a,c,d,m,g;const w=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(t,s))).next(E=>(i=E,d=Date.now(),this.removeTargets(t,i,e))).next(E=>(a=E,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(E=>(g=Date.now(),Zu()<=xe.DEBUG&&Ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${a} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-w}ms`),pt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E})))}}function AN(n,t){return new bN(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.changes=new _u(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ci.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?pt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(t,e,i,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(i!==null&&vc(i.mutation,s,Fr.empty(),Vn.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Le()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Le()){const s=tu();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,i).next(a=>{let c=nc();return a.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=tu();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Le()))}populateOverlays(t,e,i){const s=[];return i.forEach(a=>{e.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(t,s).next(a=>{a.forEach((c,d)=>{e.set(c,d)})})}computeViews(t,e,i,s){let a=so();const c=gc(),d=function(){return gc()}();return e.forEach((m,g)=>{const w=i.get(g.key);s.has(g.key)&&(w===void 0||w.mutation instanceof gu)?a=a.insert(g.key,g):w!==void 0?(c.set(g.key,w.mutation.getFieldMask()),vc(w.mutation,g,w.mutation.getFieldMask(),Vn.now())):c.set(g.key,Fr.empty())}),this.recalculateAndSaveOverlays(t,a).next(m=>(m.forEach((g,w)=>c.set(g,w)),e.forEach((g,w)=>{var E;return d.set(g,new SN(w,(E=c.get(g))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(t,e){const i=gc();let s=new pn((c,d)=>c-d),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=e.get(m);if(g===null)return;let w=i.get(m)||Fr.empty();w=d.applyToLocalView(g,w),i.set(m,w);const E=(s.get(d.batchId)||Le()).add(m);s=s.insert(d.batchId,E)})}).next(()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,w=m.value,E=F0();w.forEach(S=>{if(!a.has(S)){const x=q0(e.get(S),i.get(S));x!==null&&E.set(S,x),a=a.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,E))}return pt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,s){return function(c){return $t.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):k0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,s):this.getDocumentsMatchingCollectionQuery(t,e,i,s)}getNextDocuments(t,e,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,s-a.size):pt.resolve(tu());let d=Cc,m=a;return c.next(g=>pt.forEach(g,(w,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(w)?pt.resolve():this.remoteDocumentCache.getEntry(t,w).next(S=>{m=m.insert(w,S)}))).next(()=>this.populateOverlays(t,g,a)).next(()=>this.computeViews(t,m,g,Le())).next(w=>({batchId:d,changes:V0(w)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new $t(e)).next(i=>{let s=nc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,i,s){const a=e.collectionGroup;let c=nc();return this.indexManager.getCollectionParents(t,a).next(d=>pt.forEach(d,m=>{const g=function(E,S){return new jc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(e,m.child(a));return this.getDocumentsMatchingCollectionQuery(t,g,i,s).next(w=>{w.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,a,s))).next(c=>{a.forEach((m,g)=>{const w=g.getKey();c.get(w)===null&&(c=c.insert(w,ci.newInvalidDocument(w)))});let d=nc();return c.forEach((m,g)=>{const w=a.get(m);w!==void 0&&vc(w.mutation,g,Fr.empty(),Vn.now()),rd(e,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return pt.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:ps(s.createTime)}}(e)),pt.resolve()}getNamedQuery(t,e){return pt.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(s){return{name:s.name,query:vN(s.bundledQuery),readTime:ps(s.readTime)}}(e)),pt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.overlays=new pn($t.comparator),this.Rr=new Map}getOverlay(t,e){return pt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=tu();return pt.forEach(e,s=>this.getOverlay(t,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((s,a)=>{this.Et(t,e,a)}),pt.resolve()}removeOverlaysForBatchId(t,e,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),pt.resolve()}getOverlaysForCollection(t,e,i){const s=tu(),a=e.length+1,c=new $t(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===a&&m.largestBatchId>i&&s.set(m.getKey(),m)}return pt.resolve(s)}getOverlaysForCollectionGroup(t,e,i,s){let a=new pn((g,w)=>g-w);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let w=a.get(g.largestBatchId);w===null&&(w=tu(),a=a.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const d=tu(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,w)=>d.set(g,w)),!(d.size()>=s)););return pt.resolve(d)}Et(t,e,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new ZD(e,i));let a=this.Rr.get(e);a===void 0&&(a=Le(),this.Rr.set(e,a)),this.Rr.set(e,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(t){return pt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,pt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.Vr=new Fn(jn.mr),this.gr=new Fn(jn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const i=new jn(t,e);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.wr(new jn(t,e))}Sr(t,e){t.forEach(i=>this.removeReference(i,e))}br(t){const e=new $t(new sn([])),i=new jn(e,t),s=new jn(e,t+1),a=[];return this.gr.forEachInRange([i,s],c=>{this.wr(c),a.push(c.key)}),a}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new $t(new sn([])),i=new jn(e,t),s=new jn(e,t+1);let a=Le();return this.gr.forEachInRange([i,s],c=>{a=a.add(c.key)}),a}containsKey(t){const e=new jn(t,0),i=this.Vr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class jn{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return $t.comparator(t.key,e.key)||Ae(t.Cr,e.Cr)}static pr(t,e){return Ae(t.Cr,e.Cr)||$t.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Fn(jn.mr)}checkEmpty(t){return pt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new GD(a,e,i,s);this.mutationQueue.push(c);for(const d of s)this.Mr=this.Mr.add(new jn(d.key,a)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return pt.resolve(c)}lookupMutationBatch(t,e){return pt.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,s=this.Nr(i),a=s<0?0:s;return pt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pt.resolve(this.mutationQueue.length===0?g_:this.Fr-1)}getAllMutationBatches(t){return pt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new jn(e,0),s=new jn(e,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],c=>{const d=this.Or(c.Cr);a.push(d)}),pt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Fn(Ae);return e.forEach(s=>{const a=new jn(s,0),c=new jn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,c],d=>{i=i.add(d.Cr)})}),pt.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,s=i.length+1;let a=i;$t.isDocumentKey(a)||(a=a.child(""));const c=new jn(new $t(a),0);let d=new Fn(Ae);return this.Mr.forEachWhile(m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===s&&(d=d.add(m.Cr)),!0)},c),pt.resolve(this.Br(d))}Br(t){const e=[];return t.forEach(i=>{const s=this.Or(i);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){Ke(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return pt.forEach(e.mutations,s=>{const a=new jn(s.key,e.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,e){const i=new jn(e,0),s=this.Mr.firstAfterOrEqual(i);return pt.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,pt.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(t){this.kr=t,this.docs=function(){return new pn($t.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,s=this.docs.get(i),a=s?s.size:0,c=this.kr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return pt.resolve(i?i.document.mutableCopy():ci.newInvalidDocument(e))}getEntries(t,e){let i=so();return e.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():ci.newInvalidDocument(s))}),pt.resolve(i)}getDocumentsMatchingQuery(t,e,i,s){let a=so();const c=e.path,d=new $t(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:w}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||lD(uD(w),i)<=0||(s.has(w.key)||rd(e,w))&&(a=a.insert(w.key,w.mutableCopy()))}return pt.resolve(a)}getAllFromCollectionGroup(t,e,i,s){ne()}qr(t,e){return pt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new MN(this)}getSize(t){return pt.resolve(this.size)}}class MN extends PN{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?e.push(this.Ir.addEntry(t,s)):this.Ir.removeEntry(i)}),pt.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(t){this.persistence=t,this.Qr=new _u(e=>w_(e),T_),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.$r=0,this.Ur=new S_,this.targetCount=0,this.Kr=vl.Un()}forEachTarget(t,e){return this.Qr.forEach((i,s)=>e(s)),pt.resolve()}getLastRemoteSnapshotVersion(t){return pt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return pt.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),pt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.$r&&(this.$r=e),pt.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new vl(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,pt.resolve()}updateTargetData(t,e){return this.zn(e),pt.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,pt.resolve()}removeTargets(t,e,i){let s=0;const a=[];return this.Qr.forEach((c,d)=>{d.sequenceNumber<=e&&i.get(d.targetId)===null&&(this.Qr.delete(c),a.push(this.removeMatchingKeysForTargetId(t,d.targetId)),s++)}),pt.waitFor(a).next(()=>s)}getTargetCount(t){return pt.resolve(this.targetCount)}getTargetData(t,e){const i=this.Qr.get(e)||null;return pt.resolve(i)}addMatchingKeys(t,e,i){return this.Ur.yr(e,i),pt.resolve()}removeMatchingKeys(t,e,i){this.Ur.Sr(e,i);const s=this.persistence.referenceDelegate,a=[];return s&&e.forEach(c=>{a.push(s.markPotentiallyOrphaned(t,c))}),pt.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),pt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ur.vr(e);return pt.resolve(i)}containsKey(t,e){return pt.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new td(0),this.zr=!1,this.zr=!0,this.jr=new LN,this.referenceDelegate=t(this),this.Hr=new DN(this),this.indexManager=new yN,this.remoteDocumentCache=function(s){return new kN(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new gN(e),this.Yr=new CN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new xN,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Wr[t.toKey()];return i||(i=new ON(e,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,i){Ot("MemoryPersistence","Starting transaction:",t);const s=new NN(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(t,e){return pt.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,e)))}}class NN extends hD{constructor(t){super(),this.currentSequenceNumber=t}}class R_{constructor(t){this.persistence=t,this.ti=new S_,this.ni=null}static ri(t){return new R_(t)}get ii(){if(this.ni)return this.ni;throw ne()}addReference(t,e,i){return this.ti.addReference(i,e),this.ii.delete(i.toString()),pt.resolve()}removeReference(t,e,i){return this.ti.removeReference(i,e),this.ii.add(i.toString()),pt.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),pt.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pt.forEach(this.ii,i=>{const s=$t.fromPath(i);return this.si(t,s).next(a=>{a||e.removeEntry(s,ue.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(i=>{i?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return pt.or([()=>pt.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Pf{constructor(t,e){this.persistence=t,this.oi=new _u(i=>pD(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=AN(this,e)}static ri(t,e){return new Pf(t,e)}Zr(){}Xr(t){return pt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(s=>i+s))}sr(t){let e=0;return this.rr(t,i=>{e++}).next(()=>e)}rr(t,e){return pt.forEach(this.oi,(i,s)=>this.ar(t,i,s).next(a=>a?pt.resolve():e(s)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(t,c=>this.ar(t,c,e).next(d=>{d||(i++,a.removeEntry(c,ue.min()))})).next(()=>a.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),pt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),pt.resolve()}removeReference(t,e,i){return this.oi.set(i,t.currentSequenceNumber),pt.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),pt.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Zh(t.data.value)),e}ar(t,e,i){return pt.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.oi.get(e);return pt.resolve(s!==void 0&&s>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(t,e,i,s){this.targetId=t,this.fromCache=e,this.Hi=i,this.Ji=s}static Yi(t,e){let i=Le(),s=Le();for(const a of e.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new C_(t,e.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Mk()?8:fD(mi())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,i,s){const a={result:null};return this.rs(t,e).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ss(t,e,s,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new VN;return this._s(t,e,c).next(d=>{if(a.result=d,this.Xi)return this.us(t,e,c,d.size)})}).next(()=>a.result)}us(t,e,i,s){return i.documentReadCount<this.es?(Zu()<=xe.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",Qu(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),pt.resolve()):(Zu()<=xe.DEBUG&&Ot("QueryEngine","Query:",Qu(e),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Zu()<=xe.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",Qu(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ds(e))):pt.resolve())}rs(t,e){if(pw(e))return pt.resolve(null);let i=ds(e);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=Am(e,null,"F"),i=ds(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(a=>{const c=Le(...a);return this.ns.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,i).next(m=>{const g=this.cs(e,d);return this.ls(e,g,c,m.readTime)?this.rs(t,Am(e,null,"F")):this.hs(t,g,e,m)}))})))}ss(t,e,i,s){return pw(e)||s.isEqual(ue.min())?pt.resolve(null):this.ns.getDocuments(t,i).next(a=>{const c=this.cs(e,a);return this.ls(e,c,i,s)?pt.resolve(null):(Zu()<=xe.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qu(e)),this.hs(t,c,e,aD(s,Cc)).next(d=>d))})}cs(t,e){let i=new Fn(D0(t));return e.forEach((s,a)=>{rd(t,a)&&(i=i.add(a))}),i}ls(t,e,i,s){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(t,e,i){return Zu()<=xe.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",Qu(e)),this.ns.getDocumentsMatchingQuery(t,e,ta.min(),i)}hs(t,e,i,s){return this.ns.getDocumentsMatchingQuery(t,i,s).next(a=>(e.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="LocalStore",UN=3e8;class BN{constructor(t,e,i,s){this.persistence=t,this.Ps=e,this.serializer=s,this.Ts=new pn(Ae),this.Is=new _u(a=>w_(a),T_),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new RN(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function zN(n,t,e,i){return new BN(n,t,e,i)}async function sI(n,t){const e=ce(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let s;return e.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,e.As(t),e.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],d=[];let m=Le();for(const g of s){c.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}for(const g of a){d.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}return e.localDocuments.getDocuments(i,m).next(g=>({Rs:g,removedBatchIds:c,addedBatchIds:d}))})})}function HN(n,t){const e=ce(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=t.batch.keys(),a=e.ds.newChangeBuffer({trackRemovals:!0});return function(d,m,g,w){const E=g.batch,S=E.keys();let x=pt.resolve();return S.forEach(z=>{x=x.next(()=>w.getEntry(m,z)).next(q=>{const K=g.docVersions.get(z);Ke(K!==null),q.version.compareTo(K)<0&&(E.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),w.addEntry(q)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(m,E))}(e,i,t,a).next(()=>a.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Le();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(t))).next(()=>e.localDocuments.getDocuments(i,s))})}function oI(n){const t=ce(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function WN(n,t){const e=ce(n),i=t.snapshotVersion;let s=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=e.ds.newChangeBuffer({trackRemovals:!0});s=e.Ts;const d=[];t.targetChanges.forEach((w,E)=>{const S=s.get(E);if(!S)return;d.push(e.Hr.removeMatchingKeys(a,w.removedDocuments,E).next(()=>e.Hr.addMatchingKeys(a,w.addedDocuments,E)));let x=S.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(E)!==null?x=x.withResumeToken(Yn.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):w.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(w.resumeToken,i)),s=s.insert(E,x),function(q,K,ht){return q.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=UN?!0:ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0}(S,x,w)&&d.push(e.Hr.updateTargetData(a,x))});let m=so(),g=Le();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(a,w))}),d.push(qN(a,c,t.documentUpdates).next(w=>{m=w.Vs,g=w.fs})),!i.isEqual(ue.min())){const w=e.Hr.getLastRemoteSnapshotVersion(a).next(E=>e.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(w)}return pt.waitFor(d).next(()=>c.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,m,g)).next(()=>m)}).then(a=>(e.Ts=s,a))}function qN(n,t,e){let i=Le(),s=Le();return e.forEach(a=>i=i.add(a)),t.getEntries(n,i).next(a=>{let c=so();return e.forEach((d,m)=>{const g=a.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(ue.min())?(t.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(d,m)):Ot(x_,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{Vs:c,fs:s}})}function $N(n,t){const e=ce(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=g_),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function jN(n,t){const e=ce(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return e.Hr.getTargetData(i,t).next(a=>a?(s=a,pt.resolve(s)):e.Hr.allocateTargetId(i).next(c=>(s=new jo(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=e.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(i.targetId,i),e.Is.set(t,i.targetId)),i})}async function xm(n,t,e){const i=ce(n),s=i.Ts.get(t),a=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Pl(c))throw c;Ot(x_,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ts=i.Ts.remove(t),i.Is.delete(s.target)}function Sw(n,t,e){const i=ce(n);let s=ue.min(),a=Le();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,w){const E=ce(m),S=E.Is.get(w);return S!==void 0?pt.resolve(E.Ts.get(S)):E.Hr.getTargetData(g,w)}(i,c,ds(t)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(c,d.targetId).next(m=>{a=m})}).next(()=>i.Ps.getDocumentsMatchingQuery(c,t,e?s:ue.min(),e?a:Le())).next(d=>(KN(i,kD(t),d),{documents:d,gs:a})))}function KN(n,t,e){let i=n.Es.get(t)||ue.min();e.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Es.set(t,i)}class Rw{constructor(){this.activeTargetIds=UD()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class GN{constructor(){this.ho=new Rw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,i){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Rw,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="ConnectivityMonitor";class xw{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ot(Cw,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Ot(Cw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=null;function Lm(){return Uh===null?Uh=function(){return 268435456+Math.round(2147483648*Math.random())}():Uh++,"0x"+Uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="RestConnection",QN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JN{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===yf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(t,e,i,s,a){const c=Lm(),d=this.bo(t,e.toUriEncodedString());Ot(qp,`Sending RPC '${t}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(m,s,a),this.vo(t,d,m,i).then(g=>(Ot(qp,`Received RPC '${t}' ${c}: `,g),g),g=>{throw pl(qp,`RPC '${t}' ${c} failed with error: `,g,"url: ",d,"request:",i),g})}Co(t,e,i,s,a,c){return this.So(t,e,i,s,a)}Do(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}bo(t,e){const i=QN[t];return`${this.po}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class XN extends JN{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,i,s){const a=Lm();return new Promise((c,d)=>{const m=new l0;m.setWithCredentials(!0),m.listenOnce(c0.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Gh.NO_ERROR:const w=m.getResponseJson();Ot(oi,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(w)),c(w);break;case Gh.TIMEOUT:Ot(oi,`RPC '${t}' ${a} timed out`),d(new kt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:const E=m.getStatus();if(Ot(oi,`RPC '${t}' ${a} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const x=S==null?void 0:S.error;if(x&&x.status&&x.message){const z=function(K){const ht=K.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(ht)>=0?ht:mt.UNKNOWN}(x.status);d(new kt(z,x.message))}else d(new kt(mt.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new kt(mt.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{Ot(oi,`RPC '${t}' ${a} completed.`)}});const g=JSON.stringify(s);Ot(oi,`RPC '${t}' ${a} sending request:`,s),m.send(e,"POST",g,i,15)})}Wo(t,e,i){const s=Lm(),a=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=d0(),d=f0(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Do(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const w=a.join("");Ot(oi,`Creating RPC '${t}' stream ${s}: ${w}`,m);const E=c.createWebChannel(w,m);let S=!1,x=!1;const z=new YN({Fo:K=>{x?Ot(oi,`Not sending because RPC '${t}' stream ${s} is closed:`,K):(S||(Ot(oi,`Opening RPC '${t}' stream ${s} transport.`),E.open(),S=!0),Ot(oi,`RPC '${t}' stream ${s} sending:`,K),E.send(K))},Mo:()=>E.close()}),q=(K,ht,lt)=>{K.listen(ht,at=>{try{lt(at)}catch(vt){setTimeout(()=>{throw vt},0)}})};return q(E,ec.EventType.OPEN,()=>{x||(Ot(oi,`RPC '${t}' stream ${s} transport opened.`),z.Qo())}),q(E,ec.EventType.CLOSE,()=>{x||(x=!0,Ot(oi,`RPC '${t}' stream ${s} transport closed`),z.Uo())}),q(E,ec.EventType.ERROR,K=>{x||(x=!0,pl(oi,`RPC '${t}' stream ${s} transport errored:`,K),z.Uo(new kt(mt.UNAVAILABLE,"The operation could not be completed")))}),q(E,ec.EventType.MESSAGE,K=>{var ht;if(!x){const lt=K.data[0];Ke(!!lt);const at=lt,vt=(at==null?void 0:at.error)||((ht=at[0])===null||ht===void 0?void 0:ht.error);if(vt){Ot(oi,`RPC '${t}' stream ${s} received error:`,vt);const xt=vt.status;let Ut=function(N){const H=Rn[N];if(H!==void 0)return K0(H)}(xt),U=vt.message;Ut===void 0&&(Ut=mt.INTERNAL,U="Unknown error status: "+xt+" with message "+vt.message),x=!0,z.Uo(new kt(Ut,U)),E.close()}else Ot(oi,`RPC '${t}' stream ${s} received:`,lt),z.Ko(lt)}}),q(d,h0.STAT_EVENT,K=>{K.stat===vm.PROXY?Ot(oi,`RPC '${t}' stream ${s} detected buffering proxy`):K.stat===vm.NOPROXY&&Ot(oi,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{z.$o()},0),z}}function $p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n){return new iN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,e,i=1e3,s=1.5,a=6e4){this.Ti=t,this.timerId=e,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,e-i);s>0&&Ot("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="PersistentStream";class uI{constructor(t,e,i,s,a,c,d,m){this.Ti=t,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new aI(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===mt.RESOURCE_EXHAUSTED?(ro(e.toString()),ro("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===e&&this.V_(i,s)},i=>{t(()=>{const s=new kt(mt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(t,e){const i=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Ot(Lw,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(Ot(Lw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tV extends uI{constructor(t,e,i,s,a,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,s,c),this.serializer=a}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=oN(this.serializer,t),i=function(a){if(!("targetChange"in a))return ue.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ue.min():c.readTime?ps(c.readTime):ue.min()}(t);return this.listener.p_(e,i)}y_(t){const e={};e.database=Cm(this.serializer),e.addTarget=function(a,c){let d;const m=c.target;if(d=Im(m)?{documents:lN(a,m)}:{query:cN(a,m).ht},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Q0(a,c.resumeToken);const g=Pm(a,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ue.min())>0){d.readTime=Af(a,c.snapshotVersion.toTimestamp());const g=Pm(a,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,t);const i=fN(this.serializer,t);i&&(e.labels=i),this.I_(e)}w_(t){const e={};e.database=Cm(this.serializer),e.removeTarget=t,this.I_(e)}}class eV extends uI{constructor(t,e,i,s,a,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,s,c),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return Ke(!!t.streamToken),this.lastStreamToken=t.streamToken,Ke(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Ke(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=uN(t.writeResults,t.commitTime),i=ps(t.commitTime);return this.listener.v_(i,e)}C_(){const t={};t.database=Cm(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>aN(this.serializer,i))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{}class iV extends nV{constructor(t,e,i,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new kt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.So(t,Sm(e,i),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new kt(mt.UNKNOWN,a.toString())})}Co(t,e,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Co(t,Sm(e,i),s,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new kt(mt.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class rV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ro(e),this.N_=!1):Ot("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="RemoteStore";class sV{constructor(t,e,i,s,a){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(c=>{i.enqueueAndForget(async()=>{vu(this)&&(Ot(cu,"Restarting streams for network reachability change."),await async function(m){const g=ce(m);g.W_.add(4),await Zc(g),g.j_.set("Unknown"),g.W_.delete(4),await ld(g)}(this))})}),this.j_=new rV(i,s)}}async function ld(n){if(vu(n))for(const t of n.G_)await t(!0)}async function Zc(n){for(const t of n.G_)await t(!1)}function lI(n,t){const e=ce(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),M_(e)?k_(e):Sl(e).c_()&&O_(e,t))}function L_(n,t){const e=ce(n),i=Sl(e);e.K_.delete(t),i.c_()&&cI(e,t),e.K_.size===0&&(i.c_()?i.P_():vu(e)&&e.j_.set("Unknown"))}function O_(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ue.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Sl(n).y_(t)}function cI(n,t){n.H_.Ne(t),Sl(n).w_(t)}function k_(n){n.H_=new XD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Sl(n).start(),n.j_.B_()}function M_(n){return vu(n)&&!Sl(n).u_()&&n.K_.size>0}function vu(n){return ce(n).W_.size===0}function hI(n){n.H_=void 0}async function oV(n){n.j_.set("Online")}async function aV(n){n.K_.forEach((t,e)=>{O_(n,t)})}async function uV(n,t){hI(n),M_(n)?(n.j_.q_(t),k_(n)):n.j_.set("Unknown")}async function lV(n,t,e){if(n.j_.set("Online"),t instanceof Z0&&t.state===2&&t.cause)try{await async function(s,a){const c=a.cause;for(const d of a.targetIds)s.K_.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.K_.delete(d),s.H_.removeTarget(d))}(n,t)}catch(i){Ot(cu,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Sf(n,i)}else if(t instanceof Yh?n.H_.We(t):t instanceof G0?n.H_.Ze(t):n.H_.je(t),!e.isEqual(ue.min()))try{const i=await oI(n.localStore);e.compareTo(i)>=0&&await function(a,c){const d=a.H_.ot(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const w=a.K_.get(g);w&&a.K_.set(g,w.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const w=a.K_.get(m);if(!w)return;a.K_.set(m,w.withResumeToken(Yn.EMPTY_BYTE_STRING,w.snapshotVersion)),cI(a,m);const E=new jo(w.target,m,g,w.sequenceNumber);O_(a,E)}),a.remoteSyncer.applyRemoteEvent(d)}(n,e)}catch(i){Ot(cu,"Failed to raise snapshot:",i),await Sf(n,i)}}async function Sf(n,t,e){if(!Pl(t))throw t;n.W_.add(1),await Zc(n),n.j_.set("Offline"),e||(e=()=>oI(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ot(cu,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await ld(n)})}function fI(n,t){return t().catch(e=>Sf(n,e,t))}async function cd(n){const t=ce(n),e=ra(t);let i=t.U_.length>0?t.U_[t.U_.length-1].batchId:g_;for(;cV(t);)try{const s=await $N(t.localStore,i);if(s===null){t.U_.length===0&&e.P_();break}i=s.batchId,hV(t,s)}catch(s){await Sf(t,s)}dI(t)&&pI(t)}function cV(n){return vu(n)&&n.U_.length<10}function hV(n,t){n.U_.push(t);const e=ra(n);e.c_()&&e.S_&&e.b_(t.mutations)}function dI(n){return vu(n)&&!ra(n).u_()&&n.U_.length>0}function pI(n){ra(n).start()}async function fV(n){ra(n).C_()}async function dV(n){const t=ra(n);for(const e of n.U_)t.b_(e.mutations)}async function pV(n,t,e){const i=n.U_.shift(),s=b_.from(i,t,e);await fI(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await cd(n)}async function mV(n,t){t&&ra(n).S_&&await async function(i,s){if(function(c){return JD(c)&&c!==mt.ABORTED}(s.code)){const a=i.U_.shift();ra(i).h_(),await fI(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await cd(i)}}(n,t),dI(n)&&pI(n)}async function Ow(n,t){const e=ce(n);e.asyncQueue.verifyOperationInProgress(),Ot(cu,"RemoteStore received new credentials");const i=vu(e);e.W_.add(3),await Zc(e),i&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await ld(e)}async function _V(n,t){const e=ce(n);t?(e.W_.delete(2),await ld(e)):t||(e.W_.add(2),await Zc(e),e.j_.set("Unknown"))}function Sl(n){return n.J_||(n.J_=function(e,i,s){const a=ce(e);return a.M_(),new tV(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{xo:oV.bind(null,n),No:aV.bind(null,n),Lo:uV.bind(null,n),p_:lV.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),M_(n)?k_(n):n.j_.set("Unknown")):(await n.J_.stop(),hI(n))})),n.J_}function ra(n){return n.Y_||(n.Y_=function(e,i,s){const a=ce(e);return a.M_(),new eV(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:fV.bind(null,n),Lo:mV.bind(null,n),D_:dV.bind(null,n),v_:pV.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await cd(n)):(await n.Y_.stop(),n.U_.length>0&&(Ot(cu,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t,e,i,s,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new to,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,s,a){const c=Date.now()+i,d=new D_(t,e,c,s,a);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new kt(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N_(n,t){if(ro("AsyncQueue",`${t}: ${n}`),Pl(n))return new kt(mt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{static emptySet(t){return new sl(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||$t.comparator(e.key,i.key):(e,i)=>$t.comparator(e.key,i.key),this.keyedMap=nc(),this.sortedSet=new pn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new sl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.Z_=new pn($t.comparator)}track(t){const e=t.doc.key,i=this.Z_.get(e);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(e):t.type===1&&i.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):ne():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,i)=>{t.push(i)}),t}}class yl{constructor(t,e,i,s,a,c,d,m,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,s,a){const c=[];return e.forEach(d=>{c.push({type:0,doc:d})}),new yl(t,e,sl.emptySet(e),c,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&id(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==i[s].type||!e[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class vV{constructor(){this.queries=Mw(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,i){const s=ce(e),a=s.queries;s.queries=Mw(),a.forEach((c,d)=>{for(const m of d.ta)m.onError(i)})})(this,new kt(mt.ABORTED,"Firestore shutting down"))}}function Mw(){return new _u(n=>M0(n),id)}async function mI(n,t){const e=ce(n);let i=3;const s=t.query;let a=e.queries.get(s);a?!a.na()&&t.ra()&&(i=2):(a=new gV,i=t.ra()?0:1);try{switch(i){case 0:a.ea=await e.onListen(s,!0);break;case 1:a.ea=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(c){const d=N_(c,`Initialization of query '${Qu(t.query)}' failed`);return void t.onError(d)}e.queries.set(s,a),a.ta.push(t),t.sa(e.onlineState),a.ea&&t.oa(a.ea)&&V_(e)}async function _I(n,t){const e=ce(n),i=t.query;let s=3;const a=e.queries.get(i);if(a){const c=a.ta.indexOf(t);c>=0&&(a.ta.splice(c,1),a.ta.length===0?s=t.ra()?0:1:!a.na()&&t.ra()&&(s=2))}switch(s){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function yV(n,t){const e=ce(n);let i=!1;for(const s of t){const a=s.query,c=e.queries.get(a);if(c){for(const d of c.ta)d.oa(s)&&(i=!0);c.ea=s}}i&&V_(e)}function wV(n,t,e){const i=ce(n),s=i.queries.get(t);if(s)for(const a of s.ta)a.onError(e);i.queries.delete(t)}function V_(n){n.ia.forEach(t=>{t.next()})}var Om,Dw;(Dw=Om||(Om={}))._a="default",Dw.Cache="cache";class gI{constructor(t,e,i){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const s of t.docChanges)s.type!==3&&i.push(s);t=new yl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const i=e!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=yl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t){this.key=t}}class yI{constructor(t){this.key=t}}class TV{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=D0(t),this.wa=new sl(this.ya)}get Sa(){return this.fa}ba(t,e){const i=e?e.Da:new kw,s=e?e.wa:this.wa;let a=e?e.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((w,E)=>{const S=s.get(w),x=rd(this.query,E)?E:null,z=!!S&&this.mutatedKeys.has(S.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let K=!1;S&&x?S.data.isEqual(x.data)?z!==q&&(i.track({type:3,doc:x}),K=!0):this.va(S,x)||(i.track({type:2,doc:x}),K=!0,(m&&this.ya(x,m)>0||g&&this.ya(x,g)<0)&&(d=!0)):!S&&x?(i.track({type:0,doc:x}),K=!0):S&&!x&&(i.track({type:1,doc:S}),K=!0,(m||g)&&(d=!0)),K&&(x?(c=c.add(x),a=q?a.add(w):a.delete(w)):(c=c.delete(w),a=a.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),a=a.delete(w.key),i.track({type:1,doc:w})}return{wa:c,Da:i,ls:d,mutatedKeys:a}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,s){const a=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const c=t.Da.X_();c.sort((w,E)=>function(x,z){const q=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return q(x)-q(z)}(w.type,E.type)||this.ya(w.doc,E.doc)),this.Ca(i),s=s!=null&&s;const d=e&&!s?this.Fa():[],m=this.pa.size===0&&this.current&&!s?1:0,g=m!==this.ga;return this.ga=m,c.length!==0||g?{snapshot:new yl(this.query,t.wa,a,c,t.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new kw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Le(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const e=[];return t.forEach(i=>{this.pa.has(i)||e.push(new yI(i))}),this.pa.forEach(i=>{t.has(i)||e.push(new vI(i))}),e}Oa(t){this.fa=t.gs,this.pa=Le();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return yl.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const F_="SyncEngine";class EV{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class IV{constructor(t){this.key=t,this.Ba=!1}}class bV{constructor(t,e,i,s,a,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new _u(d=>M0(d),id),this.qa=new Map,this.Qa=new Set,this.$a=new pn($t.comparator),this.Ua=new Map,this.Ka=new S_,this.Wa={},this.Ga=new Map,this.za=vl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function AV(n,t,e=!0){const i=AI(n);let s;const a=i.ka.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await wI(i,t,e,!0),s}async function PV(n,t){const e=AI(n);await wI(e,t,!0,!1)}async function wI(n,t,e,i){const s=await jN(n.localStore,ds(t)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,e);let d;return i&&(d=await SV(n,t,a,c==="current",s.resumeToken)),n.isPrimaryClient&&e&&lI(n.remoteStore,s),d}async function SV(n,t,e,i,s){n.Ha=(E,S,x)=>async function(q,K,ht,lt){let at=K.view.ba(ht);at.ls&&(at=await Sw(q.localStore,K.query,!1).then(({documents:U})=>K.view.ba(U,at)));const vt=lt&&lt.targetChanges.get(K.targetId),xt=lt&&lt.targetMismatches.get(K.targetId)!=null,Ut=K.view.applyChanges(at,q.isPrimaryClient,vt,xt);return Vw(q,K.targetId,Ut.Ma),Ut.snapshot}(n,E,S,x);const a=await Sw(n.localStore,t,!0),c=new TV(t,a.gs),d=c.ba(a.documents),m=Gc.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,m);Vw(n,e,g.Ma);const w=new EV(t,e,c);return n.ka.set(t,w),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),g.snapshot}async function RV(n,t,e){const i=ce(n),s=i.ka.get(t),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(c=>!id(c,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await xm(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),e&&L_(i.remoteStore,s.targetId),km(i,s.targetId)}).catch(Al)):(km(i,s.targetId),await xm(i.localStore,s.targetId,!0))}async function CV(n,t){const e=ce(n),i=e.ka.get(t),s=e.qa.get(i.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),L_(e.remoteStore,i.targetId))}async function xV(n,t,e){const i=VV(n);try{const s=await function(c,d){const m=ce(c),g=Vn.now(),w=d.reduce((x,z)=>x.add(z.key),Le());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",x=>{let z=so(),q=Le();return m.ds.getEntries(x,w).next(K=>{z=K,z.forEach((ht,lt)=>{lt.isValidDocument()||(q=q.add(ht))})}).next(()=>m.localDocuments.getOverlayedDocuments(x,z)).next(K=>{E=K;const ht=[];for(const lt of d){const at=jD(lt,E.get(lt.key).overlayedDocument);at!=null&&ht.push(new gu(lt.key,at,P0(at.value.mapValue),eo.exists(!0)))}return m.mutationQueue.addMutationBatch(x,g,ht,d)}).next(K=>{S=K;const ht=K.applyToLocalDocumentSet(E,q);return m.documentOverlayCache.saveOverlays(x,K.batchId,ht)})}).then(()=>({batchId:S.batchId,changes:V0(E)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(c,d,m){let g=c.Wa[c.currentUser.toKey()];g||(g=new pn(Ae)),g=g.insert(d,m),c.Wa[c.currentUser.toKey()]=g}(i,s.batchId,e),await Qc(i,s.changes),await cd(i.remoteStore)}catch(s){const a=N_(s,"Failed to persist write");e.reject(a)}}async function TI(n,t){const e=ce(n);try{const i=await WN(e.localStore,t);t.targetChanges.forEach((s,a)=>{const c=e.Ua.get(a);c&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.Ba=!0:s.modifiedDocuments.size>0?Ke(c.Ba):s.removedDocuments.size>0&&(Ke(c.Ba),c.Ba=!1))}),await Qc(e,i,t)}catch(i){await Al(i)}}function Nw(n,t,e){const i=ce(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const s=[];i.ka.forEach((a,c)=>{const d=c.view.sa(t);d.snapshot&&s.push(d.snapshot)}),function(c,d){const m=ce(c);m.onlineState=d;let g=!1;m.queries.forEach((w,E)=>{for(const S of E.ta)S.sa(d)&&(g=!0)}),g&&V_(m)}(i.eventManager,t),s.length&&i.La.p_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function LV(n,t,e){const i=ce(n);i.sharedClientState.updateQueryState(t,"rejected",e);const s=i.Ua.get(t),a=s&&s.key;if(a){let c=new pn($t.comparator);c=c.insert(a,ci.newNoDocument(a,ue.min()));const d=Le().add(a),m=new ad(ue.min(),new Map,new pn(Ae),c,d);await TI(i,m),i.$a=i.$a.remove(a),i.Ua.delete(t),U_(i)}else await xm(i.localStore,t,!1).then(()=>km(i,t,e)).catch(Al)}async function OV(n,t){const e=ce(n),i=t.batch.batchId;try{const s=await HN(e.localStore,t);II(e,i,null),EI(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Qc(e,s)}catch(s){await Al(s)}}async function kV(n,t,e){const i=ce(n);try{const s=await function(c,d){const m=ce(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return m.mutationQueue.lookupMutationBatch(g,d).next(E=>(Ke(E!==null),w=E.keys(),m.mutationQueue.removeMutationBatch(g,E))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,w,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>m.localDocuments.getDocuments(g,w))})}(i.localStore,t);II(i,t,e),EI(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Qc(i,s)}catch(s){await Al(s)}}function EI(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function II(n,t,e){const i=ce(n);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(t);a&&(e?a.reject(e):a.resolve(),s=s.remove(t)),i.Wa[i.currentUser.toKey()]=s}}function km(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.qa.get(t))n.ka.delete(i),e&&n.La.Ja(i,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(i=>{n.Ka.containsKey(i)||bI(n,i)})}function bI(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(L_(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),U_(n))}function Vw(n,t,e){for(const i of e)i instanceof vI?(n.Ka.addReference(i.key,t),MV(n,i)):i instanceof yI?(Ot(F_,"Document no longer in limbo: "+i.key),n.Ka.removeReference(i.key,t),n.Ka.containsKey(i.key)||bI(n,i.key)):ne()}function MV(n,t){const e=t.key,i=e.path.canonicalString();n.$a.get(e)||n.Qa.has(i)||(Ot(F_,"New document in limbo: "+e),n.Qa.add(i),U_(n))}function U_(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new $t(sn.fromString(t)),i=n.za.next();n.Ua.set(i,new IV(e)),n.$a=n.$a.insert(e,i),lI(n.remoteStore,new jo(ds(E_(e.path)),i,"TargetPurposeLimboResolution",td.ae))}}async function Qc(n,t,e){const i=ce(n),s=[],a=[],c=[];i.ka.isEmpty()||(i.ka.forEach((d,m)=>{c.push(i.Ha(m,t,e).then(g=>{var w;if((g||e)&&i.isPrimaryClient){const E=g?!g.fromCache:(w=e==null?void 0:e.targetChanges.get(m.targetId))===null||w===void 0?void 0:w.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=C_.Yi(m.targetId,g);a.push(E)}}))}),await Promise.all(c),i.La.p_(s),await async function(m,g){const w=ce(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>pt.forEach(g,S=>pt.forEach(S.Hi,x=>w.persistence.referenceDelegate.addReference(E,S.targetId,x)).next(()=>pt.forEach(S.Ji,x=>w.persistence.referenceDelegate.removeReference(E,S.targetId,x)))))}catch(E){if(!Pl(E))throw E;Ot(x_,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const x=w.Ts.get(S),z=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion(z);w.Ts=w.Ts.insert(S,q)}}}(i.localStore,a))}async function DV(n,t){const e=ce(n);if(!e.currentUser.isEqual(t)){Ot(F_,"User change. New user:",t.toKey());const i=await sI(e.localStore,t);e.currentUser=t,function(a,c){a.Ga.forEach(d=>{d.forEach(m=>{m.reject(new kt(mt.CANCELLED,c))})}),a.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Qc(e,i.Rs)}}function NV(n,t){const e=ce(n),i=e.Ua.get(t);if(i&&i.Ba)return Le().add(i.key);{let s=Le();const a=e.qa.get(t);if(!a)return s;for(const c of a){const d=e.ka.get(c);s=s.unionWith(d.view.Sa)}return s}}function AI(n){const t=ce(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=TI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=LV.bind(null,t),t.La.p_=yV.bind(null,t.eventManager),t.La.Ja=wV.bind(null,t.eventManager),t}function VV(n){const t=ce(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=OV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kV.bind(null,t),t}class Rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ud(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return zN(this.persistence,new FN,t.initialUser,this.serializer)}Xa(t){return new rI(R_.ri,this.serializer)}Za(t){return new GN}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rf.provider={build:()=>new Rf};class FV extends Rf{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){Ke(this.persistence.referenceDelegate instanceof Pf);const i=this.persistence.referenceDelegate.garbageCollector;return new IN(i,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?Bi.withCacheSize(this.cacheSizeBytes):Bi.DEFAULT;return new rI(i=>Pf.ri(i,e),this.serializer)}}class Mm{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Nw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DV.bind(null,this.syncEngine),await _V(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new vV}()}createDatastore(t){const e=ud(t.databaseInfo.databaseId),i=function(a){return new XN(a)}(t.databaseInfo);return function(a,c,d,m){return new iV(a,c,d,m)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,s,a,c,d){return new sV(i,s,a,c,d)}(this.localStore,this.datastore,t.asyncQueue,e=>Nw(this.syncEngine,e,0),function(){return xw.D()?new xw:new ZN}())}createSyncEngine(t,e){return function(s,a,c,d,m,g,w){const E=new bV(s,a,c,d,m,g);return w&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const a=ce(s);Ot(cu,"RemoteStore shutting down."),a.W_.add(5),await Zc(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ro("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="FirestoreClient";class UV{constructor(t,e,i,s,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=s,this.user=ai.UNAUTHENTICATED,this.clientId=_0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{Ot(sa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Ot(sa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new to;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=N_(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function jp(n,t){n.asyncQueue.verifyOperationInProgress(),Ot(sa,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await sI(t.localStore,s),i=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Fw(n,t){n.asyncQueue.verifyOperationInProgress();const e=await BV(n);Ot(sa,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Ow(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Ow(t.remoteStore,s)),n._onlineComponents=t}async function BV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ot(sa,"Using user provided OfflineComponentProvider");try{await jp(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===mt.FAILED_PRECONDITION||s.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;pl("Error using user provided cache. Falling back to memory cache: "+e),await jp(n,new Rf)}}else Ot(sa,"Using default OfflineComponentProvider"),await jp(n,new FV(void 0));return n._offlineComponents}async function SI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ot(sa,"Using user provided OnlineComponentProvider"),await Fw(n,n._uninitializedComponentsProvider._online)):(Ot(sa,"Using default OnlineComponentProvider"),await Fw(n,new Mm))),n._onlineComponents}function zV(n){return SI(n).then(t=>t.syncEngine)}async function RI(n){const t=await SI(n),e=t.eventManager;return e.onListen=AV.bind(null,t.syncEngine),e.onUnlisten=RV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=PV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=CV.bind(null,t.syncEngine),e}function HV(n,t,e={}){const i=new to;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,m,g){const w=new PI({next:S=>{w.su(),c.enqueueAndForget(()=>_I(a,E));const x=S.docs.has(d);!x&&S.fromCache?g.reject(new kt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&m&&m.source==="server"?g.reject(new kt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new gI(E_(d.path),w,{includeMetadataChanges:!0,Ta:!0});return mI(a,E)}(await RI(n),n.asyncQueue,t,e,i)),i.promise}function WV(n,t,e={}){const i=new to;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,m,g){const w=new PI({next:S=>{w.su(),c.enqueueAndForget(()=>_I(a,E)),S.fromCache&&m.source==="server"?g.reject(new kt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new gI(d,w,{includeMetadataChanges:!0,Ta:!0});return mI(a,E)}(await RI(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(n,t,e){if(!e)throw new kt(mt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function qV(n,t,e,i){if(t===!0&&i===!0)throw new kt(mt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Bw(n){if(!$t.isDocumentKey(n))throw new kt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zw(n){if($t.isDocumentKey(n))throw new kt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ne()}function wl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new kt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=hd(n);throw new kt(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="firestore.googleapis.com",Hw=!0;class Ww{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new kt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LI,this.ssl=Hw}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:Hw;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=iI;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<TN)throw new kt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qV("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CI((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fd{constructor(t,e,i,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ww({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new kt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ww(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new YM;switch(i.type){case"firstParty":return new nD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new kt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=Uw.get(e);i&&(Ot("ComponentProvider","Removing Datastore"),Uw.delete(e),i.terminate())}(this),Promise.resolve()}}function $V(n,t,e,i={}){var s;const a=(n=wl(n,fd))._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),d=`${t}:${e}`;a.host!==LI&&a.host!==d&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},a),{host:d,ssl:!1,emulatorOptions:i});if(!au(m,c)&&(n._setSettings(m),i.mockUserToken)){let g,w;if(typeof i.mockUserToken=="string")g=i.mockUserToken,w=ai.MOCK_USER;else{g=Sk(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new kt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new ai(E)}n._authCredentials=new XM(new p0(g,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Rl(this.firestore,t,this._query)}}class rr{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rr(this.firestore,t,this._key)}}class Yo extends Rl{constructor(t,e,i){super(t,e,E_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rr(this.firestore,null,new $t(t))}withConverter(t){return new Yo(this.firestore,t,this._path)}}function OI(n,t,...e){if(n=Hi(n),xI("collection","path",t),n instanceof fd){const i=sn.fromString(t,...e);return zw(i),new Yo(n,null,i)}{if(!(n instanceof rr||n instanceof Yo))throw new kt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(sn.fromString(t,...e));return zw(i),new Yo(n.firestore,null,i)}}function kI(n,t,...e){if(n=Hi(n),arguments.length===1&&(t=_0.newId()),xI("doc","path",t),n instanceof fd){const i=sn.fromString(t,...e);return Bw(i),new rr(n,null,new $t(i))}{if(!(n instanceof rr||n instanceof Yo))throw new kt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(sn.fromString(t,...e));return Bw(i),new rr(n.firestore,n instanceof Yo?n.converter:null,new $t(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="AsyncQueue";class $w{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new aI(this,"async_queue_retry"),this.Su=()=>{const i=$p();i&&Ot(qw,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const e=$p();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=$p();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new to;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Pl(t))throw t;Ot(qw,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const s=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw ro("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=e,e}enqueueAfterDelay(t,e,i){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const s=D_.createAndSchedule(this,t,e,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&ne()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class dd extends fd{constructor(t,e,i,s){super(t,e,i,s),this.type="firestore",this._queue=new $w,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new $w(t),this._firestoreClient=void 0,await t}}}function jV(n,t){const e=typeof n=="object"?n:s0(),i=typeof n=="string"?n:yf,s=m_(e,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=Ak("firestore");a&&$V(s,...a)}return s}function B_(n){if(n._terminated)throw new kt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KV(n),n._firestoreClient}function KV(n){var t,e,i;const s=n._freezeSettings(),a=function(d,m,g,w){return new gD(d,m,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,CI(w.experimentalLongPollingOptions),w.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new UV(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Tl(Yn.fromBase64String(t))}catch(e){throw new kt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Tl(Yn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new kt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new kt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new kt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ae(this._lat,t._lat)||Ae(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=/^__.*__$/;class ZV{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new gu(t,this.data,this.fieldMask,e,this.fieldTransforms):new Kc(t,this.data,e,this.fieldTransforms)}}function DI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class q_{constructor(t,e,i,s,a,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new q_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.ku({path:i,Qu:!1});return s.$u(t),s}Uu(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Cf(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(DI(this.Lu)&&GV.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class QV{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||ud(t)}ju(t,e,i,s=!1){return new q_({Lu:t,methodName:e,zu:i,path:Jn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NI(n){const t=n._freezeSettings(),e=ud(n._databaseId);return new QV(n._databaseId,!!t.ignoreUndefinedProperties,e)}function JV(n,t,e,i,s,a={}){const c=n.ju(a.merge||a.mergeFields?2:0,t,e,s);UI("Data must be an object, but it was:",c,i);const d=VI(i,c);let m,g;if(a.merge)m=new Fr(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const w=[];for(const E of a.mergeFields){const S=XV(t,E,e);if(!c.contains(S))throw new kt(mt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);e2(w,S)||w.push(S)}m=new Fr(w),g=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,g=c.fieldTransforms;return new ZV(new vr(d),m,g)}function YV(n,t,e,i=!1){return $_(e,n.ju(i?4:3,t))}function $_(n,t){if(FI(n=Hi(n)))return UI("Unsupported field value:",t,n),VI(n,t);if(n instanceof MI)return function(i,s){if(!DI(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,s){const a=[];let c=0;for(const d of i){let m=$_(d,s.Ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),c++}return{arrayValue:{values:a}}}(n,t)}return function(i,s){if((i=Hi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BD(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Vn.fromDate(i);return{timestampValue:Af(s.serializer,a)}}if(i instanceof Vn){const a=new Vn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Af(s.serializer,a)}}if(i instanceof H_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Tl)return{bytesValue:Q0(s.serializer,i._byteString)};if(i instanceof rr){const a=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw s.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:P_(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof W_)return function(c,d){return{mapValue:{fields:{[b0]:{stringValue:A0},[wf]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.Wu("VectorValues must only contain numeric values.");return I_(d.serializer,g)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${hd(i)}`)}(n,t)}function VI(n,t){const e={};return v0(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mu(n,(i,s)=>{const a=$_(s,t.qu(i));a!=null&&(e[i]=a)}),{mapValue:{fields:e}}}function FI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vn||n instanceof H_||n instanceof Tl||n instanceof rr||n instanceof MI||n instanceof W_)}function UI(n,t,e){if(!FI(e)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(e)){const i=hd(e);throw i==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+i)}}function XV(n,t,e){if((t=Hi(t))instanceof z_)return t._internalPath;if(typeof t=="string")return BI(n,t);throw Cf("Field path arguments must be of type string or ",n,!1,void 0,e)}const t2=new RegExp("[~\\*/\\[\\]]");function BI(n,t,e){if(t.search(t2)>=0)throw Cf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new z_(...t.split("."))._internalPath}catch{throw Cf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Cf(n,t,e,i,s){const a=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||c)&&(m+=" (found",a&&(m+=` in field ${i}`),c&&(m+=` in document ${s}`),m+=")"),new kt(mt.INVALID_ARGUMENT,d+n+m)}function e2(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,e,i,s,a){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new n2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(j_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class n2 extends zI{data(){return super.data()}}function j_(n,t){return typeof t=="string"?BI(n,t):t instanceof z_?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new kt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K_{}class r2 extends K_{}function s2(n,t,...e){let i=[];t instanceof K_&&i.push(t),i=i.concat(e),function(a){const c=a.filter(m=>m instanceof G_).length,d=a.filter(m=>m instanceof pd).length;if(c>1||c>0&&d>0)throw new kt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class pd extends r2{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new pd(t,e,i)}_apply(t){const e=this._parse(t);return HI(t._query,e),new Rl(t.firestore,t.converter,bm(t._query,e))}_parse(t){const e=NI(t.firestore);return function(a,c,d,m,g,w,E){let S;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new kt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Kw(E,w);const z=[];for(const q of E)z.push(jw(m,a,q));S={arrayValue:{values:z}}}else S=jw(m,a,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Kw(E,w),S=YV(d,c,E,w==="in"||w==="not-in");return Ln.create(g,w,S)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function o2(n,t,e){const i=t,s=j_("where",n);return pd._create(s,i,e)}class G_ extends K_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new G_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Wr.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(s,a){let c=s;const d=a.getFlattenedFilters();for(const m of d)HI(c,m),c=bm(c,m)}(t._query,e),new Rl(t.firestore,t.converter,bm(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jw(n,t,e){if(typeof(e=Hi(e))=="string"){if(e==="")throw new kt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k0(t)&&e.indexOf("/")!==-1)throw new kt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(sn.fromString(e));if(!$t.isDocumentKey(i))throw new kt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uw(n,new $t(i))}if(e instanceof rr)return uw(n,e._key);throw new kt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(e)}.`)}function Kw(n,t){if(!Array.isArray(n)||n.length===0)throw new kt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function HI(n,t){const e=function(s,a){for(const c of s)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new kt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new kt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class a2{convertValue(t,e="none"){switch(ia(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(na(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ne()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return mu(t,(s,a)=>{i[s]=this.convertValue(a,e)}),i}convertVectorValue(t){var e,i,s;const a=(s=(i=(e=t.fields)===null||e===void 0?void 0:e[wf].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>Pn(c.doubleValue));return new W_(a)}convertGeoPoint(t){return new H_(Pn(t.latitude),Pn(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=nd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(xc(t));default:return null}}convertTimestamp(t){const e=ea(t);return new Vn(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=sn.fromString(t);Ke(nI(i));const s=new Lc(i.get(1),i.get(3)),a=new $t(i.popFirst(5));return s.isEqual(e)||ro(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(n,t,e){let i;return i=n?n.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class WI extends zI{constructor(t,e,i,s,a,c){super(t,e,i,s,c),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(j_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Xh extends WI{data(t={}){return super.data(t)}}class l2{constructor(t,e,i,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new rc(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Xh(this._firestore,this._userDataWriter,i.key,i,new rc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(d=>{const m=new Xh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new rc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const m=new Xh(s._firestore,s._userDataWriter,d.doc.key,d.doc,new rc(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,w=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),w=c.indexOf(d.doc.key)),{type:c2(d.type),doc:m,oldIndex:g,newIndex:w}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function c2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n){n=wl(n,rr);const t=wl(n.firestore,dd);return HV(B_(t),n._key).then(e=>m2(t,n,e))}class qI extends a2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new rr(this.firestore,null,e)}}function f2(n){n=wl(n,Rl);const t=wl(n.firestore,dd),e=B_(t),i=new qI(t);return i2(n._query),WV(e,n._query).then(s=>new l2(t,i,n,s))}function d2(n,t){const e=wl(n.firestore,dd),i=kI(n),s=u2(n.converter,t);return p2(e,[JV(NI(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,eo.exists(!1))]).then(()=>i)}function p2(n,t){return function(i,s){const a=new to;return i.asyncQueue.enqueueAndForget(async()=>xV(await zV(i),s,a)),a.promise}(B_(n),t)}function m2(n,t,e){const i=e.docs.get(t._key),s=new qI(n);return new WI(n,s,t._key,i,new rc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(s){bl=s})(Il),dl(new uu("firestore",(i,{instanceIdentifier:s,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new dd(new tD(i.getProvider("auth-internal")),new iD(c,i.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new kt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(g.options.projectId,w)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Qo(Qy,Jy,t),Qo(Qy,Jy,"esm2017")})();var _2="firebase",g2="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo(_2,g2,"app");function Z_(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e}function $I(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v2=$I,jI=new qc("auth","Firebase",$I());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new d_("@firebase/auth");function y2(n,...t){xf.logLevel<=xe.WARN&&xf.warn(`Auth (${Il}): ${n}`,...t)}function tf(n,...t){xf.logLevel<=xe.ERROR&&xf.error(`Auth (${Il}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(n,...t){throw J_(n,...t)}function zr(n,...t){return J_(n,...t)}function Q_(n,t,e){const i=Object.assign(Object.assign({},v2()),{[t]:e});return new qc("auth","Firebase",i).create(t,{appName:n.name})}function no(n){return Q_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w2(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&Tr(n,"argument-error"),Q_(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J_(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return jI.create(n,...t)}function ee(n,t,...e){if(!n)throw J_(t,...e)}function Js(n){const t="INTERNAL ASSERTION FAILED: "+n;throw tf(t),new Error(t)}function oo(n,t){n||Js(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function T2(){return Gw()==="http:"||Gw()==="https:"}function Gw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T2()||Lk()||"connection"in navigator)?navigator.onLine:!0}function I2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e){this.shortDelay=t,this.longDelay=e,oo(e>t,"Short delay should be less than long delay!"),this.isMobile=Rk()||Ok()}get(){return E2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(n,t){oo(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P2=new Jc(3e4,6e4);function ua(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}async function la(n,t,e,i,s={}){return GI(n,s,async()=>{let a={},c={};i&&(t==="GET"?c=i:a={body:JSON.stringify(i)});const d=$c(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:t,headers:m},a);return xk()||(g.referrerPolicy="no-referrer"),KI.fetch()(await ZI(n,n.config.apiHost,e,d),g)})}async function GI(n,t,e){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},b2),t);try{const s=new R2(n),a=await Promise.race([e(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Bh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Bh(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Bh(n,"user-disabled",c);const w=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Q_(n,w,g);Tr(n,w)}}catch(s){if(s instanceof uo)throw s;Tr(n,"network-request-failed",{message:String(s)})}}async function Yc(n,t,e,i,s={}){const a=await la(n,t,e,i,s);return"mfaPendingCredential"in a&&Tr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function ZI(n,t,e,i){const s=`${t}${e}?${i}`,a=n,c=a.config.emulator?Y_(n.config,s):`${n.config.apiScheme}://${s}`;return A2.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function S2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(zr(this.auth,"network-request-failed")),P2.get())})}}function Bh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const s=zr(n,t,i);return s.customData._tokenResponse=e,s}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class C2{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return S2(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x2(n,t){return la(n,"GET","/v2/recaptchaConfig",ua(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(n,t){return la(n,"POST","/v1/accounts:delete",t)}async function Lf(n,t){return la(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function O2(n,t=!1){const e=Hi(n),i=await e.getIdToken(t),s=X_(i);ee(s&&s.exp&&s.auth_time&&s.iat,e.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:yc(Kp(s.auth_time)),issuedAtTime:yc(Kp(s.iat)),expirationTime:yc(Kp(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Kp(n){return Number(n)*1e3}function X_(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const s=YE(e);return s?JSON.parse(s):(tf("Failed to decode base64 JWT payload"),null)}catch(s){return tf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Qw(n){const t=X_(n);return ee(t,"internal-error"),ee(typeof t.exp<"u","internal-error"),ee(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof uo&&k2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function k2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(n){var t;const e=n.auth,i=await n.getIdToken(),s=await Dc(n,Lf(e,{idToken:i}));ee(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?QI(a.providerUserInfo):[],d=N2(n.providerData,c),m=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),w=m?g:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Nm(a.createdAt,a.lastLoginAt),isAnonymous:w};Object.assign(n,E)}async function D2(n){const t=Hi(n);await Of(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function N2(n,t){return[...n.filter(i=>!t.some(s=>s.providerId===i.providerId)),...t]}function QI(n){return n.map(t=>{var{providerId:e}=t,i=Z_(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(n,t){const e=await GI(n,{},async()=>{const i=$c({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await ZI(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",KI.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function F2(n,t){return la(n,"POST","/v2/accounts:revokeToken",ua(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ee(t.idToken,"internal-error"),ee(typeof t.idToken<"u","internal-error"),ee(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Qw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ee(t.length!==0,"internal-error");const e=Qw(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:s,expiresIn:a}=await V2(t,e);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:s,expirationTime:a}=e,c=new ol;return i&&(ee(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),s&&(ee(typeof s=="string","internal-error",{appName:t}),c.accessToken=s),a&&(ee(typeof a=="number","internal-error",{appName:t}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return Js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(n,t){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Ur{constructor(t){var{uid:e,auth:i,stsTokenManager:s}=t,a=Z_(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new M2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Nm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await Dc(this,this.stsTokenManager.getToken(this.auth,t));return ee(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return O2(this,t)}reload(){return D2(this)}_assign(t){this!==t&&(ee(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ur(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(no(this.auth));const t=await this.getIdToken();return await Dc(this,L2(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,s,a,c,d,m,g,w;const E=(i=e.displayName)!==null&&i!==void 0?i:void 0,S=(s=e.email)!==null&&s!==void 0?s:void 0,x=(a=e.phoneNumber)!==null&&a!==void 0?a:void 0,z=(c=e.photoURL)!==null&&c!==void 0?c:void 0,q=(d=e.tenantId)!==null&&d!==void 0?d:void 0,K=(m=e._redirectEventId)!==null&&m!==void 0?m:void 0,ht=(g=e.createdAt)!==null&&g!==void 0?g:void 0,lt=(w=e.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:at,emailVerified:vt,isAnonymous:xt,providerData:Ut,stsTokenManager:U}=e;ee(at&&U,t,"internal-error");const O=ol.fromJSON(this.name,U);ee(typeof at=="string",t,"internal-error"),Vo(E,t.name),Vo(S,t.name),ee(typeof vt=="boolean",t,"internal-error"),ee(typeof xt=="boolean",t,"internal-error"),Vo(x,t.name),Vo(z,t.name),Vo(q,t.name),Vo(K,t.name),Vo(ht,t.name),Vo(lt,t.name);const N=new Ur({uid:at,auth:t,email:S,emailVerified:vt,displayName:E,isAnonymous:xt,photoURL:z,phoneNumber:x,tenantId:q,stsTokenManager:O,createdAt:ht,lastLoginAt:lt});return Ut&&Array.isArray(Ut)&&(N.providerData=Ut.map(H=>Object.assign({},H))),K&&(N._redirectEventId=K),N}static async _fromIdTokenResponse(t,e,i=!1){const s=new ol;s.updateFromServerResponse(e);const a=new Ur({uid:e.localId,auth:t,stsTokenManager:s,isAnonymous:i});return await Of(a),a}static async _fromGetAccountInfoResponse(t,e,i){const s=e.users[0];ee(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?QI(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new ol;d.updateFromIdToken(i);const m=new Ur({uid:s.localId,auth:t,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Nm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new Map;function Ys(n){oo(n instanceof Function,"Expected a class definition");let t=Jw.get(n);return t?(oo(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Jw.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}JI.type="NONE";const Yw=JI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n,t,e){return`firebase:${n}:${t}:${e}`}class al{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=ef(this.userKey,s.apiKey,a),this.fullPersistenceKey=ef("persistence",s.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Lf(this.auth,{idToken:t}).catch(()=>{});return e?Ur._fromGetAccountInfoResponse(this.auth,e,t):null}return Ur._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new al(Ys(Yw),t,i);const s=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=s[0]||Ys(Yw);const c=ef(i,t.config.apiKey,t.name);let d=null;for(const g of e)try{const w=await g._get(c);if(w){let E;if(typeof w=="string"){const S=await Lf(t,{idToken:w}).catch(()=>{});if(!S)break;E=await Ur._fromGetAccountInfoResponse(t,S,w)}else E=Ur._fromJSON(t,w);g!==a&&(d=E),a=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new al(a,t,i):(a=m[0],d&&await a._set(c,d.toJSON()),await Promise.all(e.map(async g=>{if(g!==a)try{await g._remove(c)}catch{}})),new al(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(YI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ib(t))return"Blackberry";if(rb(t))return"Webos";if(XI(t))return"Safari";if((t.includes("chrome/")||tb(t))&&!t.includes("edge/"))return"Chrome";if(nb(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function YI(n=mi()){return/firefox\//i.test(n)}function XI(n=mi()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tb(n=mi()){return/crios\//i.test(n)}function eb(n=mi()){return/iemobile/i.test(n)}function nb(n=mi()){return/android/i.test(n)}function ib(n=mi()){return/blackberry/i.test(n)}function rb(n=mi()){return/webos/i.test(n)}function tg(n=mi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function U2(n=mi()){var t;return tg(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function B2(){return kk()&&document.documentMode===10}function sb(n=mi()){return tg(n)||nb(n)||rb(n)||ib(n)||/windows phone/i.test(n)||eb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n,t=[]){let e;switch(n){case"Browser":e=Xw(mi());break;case"Worker":e=`${Xw(mi())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=a=>new Promise((c,d)=>{try{const m=t(a);c(m)}catch(m){d(m)}});i.onAbort=e,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const s of e)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2(n,t={}){return la(n,"GET","/v2/passwordPolicy",ua(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=6;class q2{constructor(t){var e,i,s,a;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=c.minPasswordLength)!==null&&e!==void 0?e:W2,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,s,a,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(e=m.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(s=m.containsLowercaseLetter)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(a=m.containsUppercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),s&&(e.meetsMaxPasswordLength=t.length<=s)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let s=0;s<t.length;s++)i=t.charAt(s),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,e,i,s){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tT(this),this.idTokenSubscription=new tT(this),this.beforeStateQueue=new z2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ys(e)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await al.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Lf(this,{idToken:t}),i=await Ur._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if(er(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,d=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===d)&&(m!=null&&m.user)&&(s=m.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Of(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=I2()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(er(this.app))return Promise.reject(no(this));const e=t?Hi(t):null;return e&&ee(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&ee(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(no(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return er(this.app)?Promise.reject(no(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await H2(this),e=new q2(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new qc("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await F2(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ys(t)||this._popupRedirectResolver;ee(e,this,"argument-error"),this.redirectPersistenceManager=await al.create(this,[Ys(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,s){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof e=="function"){const m=t.addObserver(e,i,s);return()=>{c=!0,m()}}else{const m=t.addObserver(e);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return e!=null&&e.error&&y2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ca(n){return Hi(n)}class tT{constructor(t){this.auth=t,this.observer=null,this.addObserver=zk(e=>this.observer=e)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j2(n){md=n}function ab(n){return md.loadJS(n)}function K2(){return md.recaptchaEnterpriseScript}function G2(){return md.gapiScript}function Z2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Q2{constructor(){this.enterprise=new J2}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class J2{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const Y2="recaptcha-enterprise",ub="NO_RECAPTCHA";class X2{constructor(t){this.type=Y2,this.auth=ca(t)}async verify(t="verify",e=!1){async function i(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{x2(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new C2(m);return a.tenantId==null?a._agentRecaptchaConfig=g:a._tenantRecaptchaConfigs[a.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function s(a,c,d){const m=window.grecaptcha;Zw(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:t}).then(g=>{c(g)}).catch(()=>{c(ub)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Q2().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(d=>{if(!e&&Zw(window.grecaptcha))s(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=K2();m.length!==0&&(m+=d),ab(m).then(()=>{s(d,a,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function eT(n,t,e,i=!1,s=!1){const a=new X2(n);let c;if(s)c=ub;else try{c=await a.verify(e)}catch{c=await a.verify(e,!0)}const d=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Vm(n,t,e,i,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await eT(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await eT(n,t,e,e==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(n,t){const e=m_(n,"auth");if(e.isInitialized()){const s=e.getImmediate(),a=e.getOptions();if(au(a,t??{}))return s;Tr(s,"already-initialized")}return e.initialize({options:t})}function eF(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Ys);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function nF(n,t,e){const i=ca(n);ee(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!1,a=lb(t),{host:c,port:d}=iF(t),m=d===null?"":`:${d}`,g={url:`${a}//${c}${m}/`},w=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ee(au(g,i.config.emulator)&&au(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,rF()}function lb(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function iF(n){const t=lb(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:nT(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:nT(c)}}}function nT(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function rF(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Js("not implemented")}_getIdTokenResponse(t){return Js("not implemented")}_linkToIdToken(t,e){return Js("not implemented")}_getReauthenticationResolver(t){return Js("not implemented")}}async function sF(n,t){return la(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(n,t){return Yc(n,"POST","/v1/accounts:signInWithPassword",ua(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(n,t){return Yc(n,"POST","/v1/accounts:signInWithEmailLink",ua(n,t))}async function uF(n,t){return Yc(n,"POST","/v1/accounts:signInWithEmailLink",ua(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends eg{constructor(t,e,i,s=null){super("password",i),this._email=t,this._password=e,this._tenantId=s}static _fromEmailAndPassword(t,e){return new Nc(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Nc(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(t,e,"signInWithPassword",oF);case"emailLink":return aF(t,{email:this._email,oobCode:this._password});default:Tr(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(t,i,"signUpPassword",sF);case"emailLink":return uF(t,{idToken:e,email:this._email,oobCode:this._password});default:Tr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,t){return Yc(n,"POST","/v1/accounts:signInWithIdp",ua(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF="http://localhost";class hu extends eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new hu(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Tr("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:s}=e,a=Z_(e,["providerId","signInMethod"]);if(!i||!s)return null;const c=new hu(i,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return ul(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,ul(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ul(t,e)}buildRequest(){const t={requestUri:lF,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=$c(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hF(n){const t=Xl(tc(n)).link,e=t?Xl(tc(t)).deep_link_id:null,i=Xl(tc(n)).deep_link_id;return(i?Xl(tc(i)).link:null)||i||e||t||n}class ng{constructor(t){var e,i,s,a,c,d;const m=Xl(tc(t)),g=(e=m.apiKey)!==null&&e!==void 0?e:null,w=(i=m.oobCode)!==null&&i!==void 0?i:null,E=cF((s=m.mode)!==null&&s!==void 0?s:null);ee(g&&w&&E,"argument-error"),this.apiKey=g,this.operation=E,this.code=w,this.continueUrl=(a=m.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=m.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const e=hF(t);try{return new ng(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.providerId=Cl.PROVIDER_ID}static credential(t,e){return Nc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=ng.parseLink(e);return ee(i,"argument-error"),Nc._fromEmailAndCode(t,i.code,i.tenantId)}}Cl.PROVIDER_ID="password";Cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends ig{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Xc{constructor(){super("facebook.com")}static credential(t){return hu._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ho.credentialFromTaggedObject(t)}static credentialFromError(t){return Ho.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ho.credential(t.oauthAccessToken)}catch{return null}}}Ho.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ho.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return hu._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Qs.credentialFromTaggedObject(t)}static credentialFromError(t){return Qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Qs.credential(e,i)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo extends Xc{constructor(){super("github.com")}static credential(t){return hu._fromParams({providerId:Wo.PROVIDER_ID,signInMethod:Wo.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wo.credentialFromTaggedObject(t)}static credentialFromError(t){return Wo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wo.credential(t.oauthAccessToken)}catch{return null}}}Wo.GITHUB_SIGN_IN_METHOD="github.com";Wo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Xc{constructor(){super("twitter.com")}static credential(t,e){return hu._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return qo.credentialFromTaggedObject(t)}static credentialFromError(t){return qo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return qo.credential(e,i)}catch{return null}}}qo.TWITTER_SIGN_IN_METHOD="twitter.com";qo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(n,t){return Yc(n,"POST","/v1/accounts:signUp",ua(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,s=!1){const a=await Ur._fromIdTokenResponse(t,i,s),c=iT(i);return new fu({user:a,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const s=iT(i);return new fu({user:t,providerId:s,_tokenResponse:i,operationType:e})}}function iT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends uo{constructor(t,e,i,s){var a;super(e.code,e.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,s){return new kf(t,e,i,s)}}function cb(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(n,a,t,i):a})}async function dF(n,t,e=!1){const i=await Dc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return fu._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(n,t,e=!1){const{auth:i}=n;if(er(i.app))return Promise.reject(no(i));const s="reauthenticate";try{const a=await Dc(n,cb(i,s,t,n),e);ee(a.idToken,i,"internal-error");const c=X_(a.idToken);ee(c,i,"internal-error");const{sub:d}=c;return ee(n.uid===d,i,"user-mismatch"),fu._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Tr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(n,t,e=!1){if(er(n.app))return Promise.reject(no(n));const i="signIn",s=await cb(n,i,t),a=await fu._fromIdTokenResponse(n,i,s);return e||await n._updateCurrentUser(a.user),a}async function mF(n,t){return hb(ca(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(n){const t=ca(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _F(n,t,e){if(er(n.app))return Promise.reject(no(n));const i=ca(n),c=await Vm(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fF).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&fb(n),m}),d=await fu._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function gF(n,t,e){return er(n.app)?Promise.reject(no(n)):mF(Hi(n),Cl.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&fb(n),i})}function vF(n,t,e,i){return Hi(n).onIdTokenChanged(t,e,i)}function yF(n,t,e){return Hi(n).beforeAuthStateChanged(t,e)}function wF(n,t,e,i){return Hi(n).onAuthStateChanged(t,e,i)}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=1e3,EF=10;class pb extends db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),s=this.localCache[e];i!==s&&t(e,s,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=t.key;e?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);B2()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,EF):s()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}pb.type="LOCAL";const IF=pb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb extends db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}mb.type="SESSION";const _b=mb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(s=>s.isListeningto(t));if(e)return e;const i=new _d(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:s,data:a}=e.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async g=>g(e.origin,a)),m=await bF(d);e.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((d,m)=>{const g=rg("",20);s.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(w),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(w),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(){return window}function PF(n){ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){return typeof ms().WorkerGlobalScope<"u"&&typeof ms().importScripts=="function"}async function SF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function CF(){return gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="firebaseLocalStorageDb",xF=1,Df="firebaseLocalStorage",yb="fbase_key";class th{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function gd(n,t){return n.transaction([Df],t?"readwrite":"readonly").objectStore(Df)}function LF(){const n=indexedDB.deleteDatabase(vb);return new th(n).toPromise()}function Fm(){const n=indexedDB.open(vb,xF);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Df,{keyPath:yb})}catch(s){e(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Df)?t(i):(i.close(),await LF(),t(await Fm()))})})}async function rT(n,t,e){const i=gd(n,!0).put({[yb]:t,value:e});return new th(i).toPromise()}async function OF(n,t){const e=gd(n,!1).get(t),i=await new th(e).toPromise();return i===void 0?null:i.value}function sT(n,t){const e=gd(n,!0).delete(t);return new th(e).toPromise()}const kF=800,MF=3;class wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>MF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(CF()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await SF(),!this.activeServiceWorker)return;this.sender=new AF(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((e=i[0])===null||e===void 0)&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||RF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Fm();return await rT(t,Mf,"1"),await sT(t,Mf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>rT(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>OF(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>sT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(s=>{const a=gd(s,!1).getAll();return new th(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),e.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),e.push(s));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wb.type="LOCAL";const DF=wb;new Jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n,t){return t?Ys(t):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends eg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ul(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ul(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ul(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function NF(n){return hb(n.auth,new sg(n),n.bypassAuthState)}function VF(n){const{auth:t,user:e}=n;return ee(e,t,"internal-error"),pF(e,new sg(n),n.bypassAuthState)}async function FF(n){const{auth:t,user:e}=n;return ee(e,t,"internal-error"),dF(e,new sg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t,e,i,s,a=!1){this.auth=t,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:s,tenantId:a,error:c,type:d}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:e,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return NF;case"linkViaPopup":case"linkViaRedirect":return FF;case"reauthViaPopup":case"reauthViaRedirect":return VF;default:Tr(this.auth,"internal-error")}}resolve(t){oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new Jc(2e3,1e4);async function BF(n,t,e){if(er(n.app))return Promise.reject(zr(n,"operation-not-supported-in-this-environment"));const i=ca(n);w2(n,t,ig);const s=Tb(i,e);return new eu(i,"signInViaPopup",t,s).executeNotNull()}class eu extends Eb{constructor(t,e,i,s,a){super(t,e,s,a),this.provider=i,this.authWindow=null,this.pollId=null,eu.currentPopupAction&&eu.currentPopupAction.cancel(),eu.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ee(t,this.auth,"internal-error"),t}async onExecution(){oo(this.filter.length===1,"Popup operations only handle one event");const t=rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eu.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if(!((i=(e=this.authWindow)===null||e===void 0?void 0:e.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,UF.get())};t()}}eu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="pendingRedirect",nf=new Map;class HF extends Eb{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=nf.get(this.auth._key());if(!t){try{const i=await WF(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}nf.set(this.auth._key(),t)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WF(n,t){const e=jF(t),i=$F(n);if(!await i._isAvailable())return!1;const s=await i._get(e)==="true";return await i._remove(e),s}function qF(n,t){nf.set(n._key(),t)}function $F(n){return Ys(n._redirectPersistence)}function jF(n){return ef(zF,n.config.apiKey,n.name)}async function KF(n,t,e=!1){if(er(n.app))return Promise.reject(no(n));const i=ca(n),s=Tb(i,t),c=await new HF(i,s,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=10*60*1e3;class ZF{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QF(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Ib(t)){const s=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(zr(this.auth,s))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=GF&&this.cachedEventUids.clear(),this.cachedEventUids.has(oT(t))}saveEventToCache(t){this.cachedEventUids.add(oT(t)),this.lastProcessedEventTime=Date.now()}}function oT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function Ib({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function QF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ib(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(n,t={}){return la(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XF=/^https?/;async function tU(n){if(n.config.emulator)return;const{authorizedDomains:t}=await JF(n);for(const e of t)try{if(eU(e))return}catch{}Tr(n,"unauthorized-domain")}function eU(n){const t=Dm(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!XF.test(e))return!1;if(YF.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=new Jc(3e4,6e4);function aT(){const n=ms().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function iU(n){return new Promise((t,e)=>{var i,s,a;function c(){aT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{aT(),e(zr(n,"network-request-failed"))},timeout:nU.get()})}if(!((s=(i=ms().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)t(gapi.iframes.getContext());else if(!((a=ms().gapi)===null||a===void 0)&&a.load)c();else{const d=Z2("iframefcb");return ms()[d]=()=>{gapi.load?c():e(zr(n,"network-request-failed"))},ab(`${G2()}?onload=${d}`).catch(m=>e(m))}}).catch(t=>{throw rf=null,t})}let rf=null;function rU(n){return rf=rf||iU(n),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new Jc(5e3,15e3),oU="__/auth/iframe",aU="emulator/auth/iframe",uU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cU(n){const t=n.config;ee(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Y_(t,aU):`https://${n.config.authDomain}/${oU}`,i={apiKey:t.apiKey,appName:n.name,v:Il},s=lU.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${e}?${$c(i).slice(1)}`}async function hU(n){const t=await rU(n),e=ms().gapi;return ee(e,n,"internal-error"),t.open({where:document.body,url:cU(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uU,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const c=zr(n,"network-request-failed"),d=ms().setTimeout(()=>{a(c)},sU.get());function m(){ms().clearTimeout(d),s(i)}i.ping(m).then(m,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dU=500,pU=600,mU="_blank",_U="http://localhost";class uT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gU(n,t,e,i=dU,s=pU){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},fU),{width:i.toString(),height:s.toString(),top:a,left:c}),g=mi().toLowerCase();e&&(d=tb(g)?mU:e),YI(g)&&(t=t||_U,m.scrollbars="yes");const w=Object.entries(m).reduce((S,[x,z])=>`${S}${x}=${z},`,"");if(U2(g)&&d!=="_self")return vU(t||"",d),new uT(null);const E=window.open(t||"",d,w);ee(E,n,"popup-blocked");try{E.focus()}catch{}return new uT(E)}function vU(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU="__/auth/handler",wU="emulator/auth/handler",TU=encodeURIComponent("fac");async function lT(n,t,e,i,s,a){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Il,eventId:s};if(t instanceof ig){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",Bk(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[w,E]of Object.entries({}))c[w]=E}if(t instanceof Xc){const w=t.getScopes().filter(E=>E!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const w of Object.keys(d))d[w]===void 0&&delete d[w];const m=await n._getAppCheckToken(),g=m?`#${TU}=${encodeURIComponent(m)}`:"";return`${EU(n)}?${$c(d).slice(1)}${g}`}function EU({config:n}){return n.emulator?Y_(n,wU):`https://${n.authDomain}/${yU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="webStorageSupport";class IU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_b,this._completeRedirectFn=KF,this._overrideRedirectResult=qF}async _openPopup(t,e,i,s){var a;oo((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await lT(t,e,i,Dm(),s);return gU(t,c,rg())}async _openRedirect(t,e,i,s){await this._originValidation(t);const a=await lT(t,e,i,Dm(),s);return PF(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:s,promise:a}=this.eventManagers[e];return s?Promise.resolve(s):(oo(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await hU(t),i=new ZF(t);return e.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,t,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Gp,{type:Gp},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Gp];c!==void 0&&e(!!c),Tr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=tU(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return sb()||XI()||tg()}}const bU=IU;var cT="@firebase/auth",hT="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SU(n){dl(new uu("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;ee(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ob(n)},g=new $2(i,s,a,m);return eF(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),dl(new uu("auth-internal",t=>{const e=ca(t.getProvider("auth").getImmediate());return(i=>new AU(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qo(cT,hT,PU(n)),Qo(cT,hT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=5*60,CU=e0("authIdTokenMaxAge")||RU;let fT=null;const xU=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>CU)return;const s=e==null?void 0:e.token;fT!==s&&(fT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bb(n=s0()){const t=m_(n,"auth");if(t.isInitialized())return t.getImmediate();const e=tF(n,{popupRedirectResolver:bU,persistence:[DF,IF,_b]}),i=e0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=xU(a.toString());yF(e,c,()=>c(e.currentUser)),vF(e,d=>c(d))}}const s=XE("auth");return s&&nF(e,`http://${s}`),e}function LU(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}j2({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=s=>{const a=zr("internal-error");a.customData=s,e(a)},i.type="text/javascript",i.charset="UTF-8",LU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SU("Browser");const OU={apiKey:"AIzaSyDx3EgoNVGjwsjvugK7-YwfwxRX2aPSB6k",authDomain:"tripmaster-64cb7.firebaseapp.com",projectId:"tripmaster-64cb7",storageBucket:"tripmaster-64cb7.firebasestorage.app",messagingSenderId:"1015671912746",appId:"1:1015671912746:web:9379e6f43ed18c9fe38653",measurementId:"G-MD5JGE52F8"},Ab=r0(OU),Vc=jV(Ab),Fc=bb(Ab),kU={name:"TripCard",props:{trip:{type:Object,required:!0}}},MU={class:"col-md-4 mb-4"},DU={class:"card shadow-sm h-100"},NU={class:"card-body"},VU={class:"card-title"},FU={class:"card-text"};function UU(n,t,e,i,s,a){const c=Zs("router-link");return Wt(),jt("div",MU,[J("div",DU,[J("div",NU,[J("h5",VU,Me(e.trip.name),1),J("p",FU,Me(e.trip.country),1),xn(c,{to:`/trip/${e.trip.id}`,class:"btn btn-green"},{default:o_(()=>t[0]||(t[0]=[$o("Zobacz podróż")])),_:1},8,["to"])])])])}const BU=or(kU,[["render",UU],["__scopeId","data-v-f13585cd"]]),zU={name:"AddTripModal",setup(n,{emit:t}){const e=Cn({country:"",name:"",departureDate:"",arrivalDate:""}),i=Cn(""),s=Cn([]),a=Cn(null);wF(Fc,g=>{g?a.value=g.uid:i.value="Musisz być zalogowany, aby dodać podróż."});const c=async()=>{try{const w=await(await fetch("https://restcountries.com/v3.1/all")).json();s.value=w.map(E=>E.name.common).sort()}catch(g){console.error("Błąd ładowania krajów:",g)}},d=async()=>{if(!a.value){i.value="Musisz być zalogowany, aby dodać podróż.";return}try{const g=await d2(OI(Vc,"trips"),{...e.value,userId:a.value,createdAt:new Date});t("add-trip",{id:g.id,...e.value,userId:a.value,createdAt:new Date}),m()}catch(g){i.value="Błąd zapisu do bazy: "+g.message}},m=()=>{t("close")};return Kf(c),{newTrip:e,countries:s,submitForm:d,closeModal:m,errorMessage:i}}},HU={class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"}},WU={class:"modal-dialog"},qU={class:"modal-content"},$U={class:"modal-header"},jU={class:"modal-body"},KU={class:"mb-3"},GU=["value"],ZU={class:"mb-3"},QU={class:"mb-3"},JU={class:"mb-3"},YU={key:0,class:"error"};function XU(n,t,e,i,s,a){return Wt(),jt("div",HU,[J("div",WU,[J("div",qU,[J("div",$U,[t[6]||(t[6]=J("h5",{class:"modal-title"},"Dodaj podróż",-1)),J("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...c)=>i.closeModal&&i.closeModal(...c))})]),J("div",jU,[J("form",{onSubmit:t[5]||(t[5]=c_((...c)=>i.submitForm&&i.submitForm(...c),["prevent"]))},[J("div",KU,[t[7]||(t[7]=J("label",{for:"country",class:"form-label"},"Kraj",-1)),Tn(J("select",{"onUpdate:modelValue":t[1]||(t[1]=c=>i.newTrip.country=c),id:"country",class:"form-select",required:""},[(Wt(!0),jt(Qn,null,Xo(i.countries,c=>(Wt(),jt("option",{key:c,value:c},Me(c),9,GU))),128))],512),[[QL,i.newTrip.country]])]),J("div",ZU,[t[8]||(t[8]=J("label",{for:"name",class:"form-label"},"Nazwa podróży",-1)),Tn(J("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.newTrip.name=c),type:"text",id:"name",class:"form-control",required:""},null,512),[[Nn,i.newTrip.name]])]),J("div",QU,[t[9]||(t[9]=J("label",{for:"departureDate",class:"form-label"},"Data wyjazdu (opcjonalnie)",-1)),Tn(J("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>i.newTrip.departureDate=c),type:"date",id:"departureDate",class:"form-control"},null,512),[[Nn,i.newTrip.departureDate]])]),J("div",JU,[t[10]||(t[10]=J("label",{for:"arrivalDate",class:"form-label"},"Data przyjazdu (opcjonalnie)",-1)),Tn(J("input",{"onUpdate:modelValue":t[4]||(t[4]=c=>i.newTrip.arrivalDate=c),type:"date",id:"arrivalDate",class:"form-control"},null,512),[[Nn,i.newTrip.arrivalDate]])]),t[11]||(t[11]=J("button",{type:"submit",class:"btn btn-primary"},"Dodaj podróż",-1))],32),i.errorMessage?(Wt(),jt("p",YU,Me(i.errorMessage),1)):dn("",!0)])])])])}const tB=or(zU,[["render",XU],["__scopeId","data-v-a8e3cc83"]]),eB={name:"HomeView",components:{TripCard:BU,AddTripModal:tB},setup(){const n=Cn([]),t=Cn(!1),e=Cn(null),i=async()=>{if(e.value)try{const d=s2(OI(Vc,"trips"),o2("userId","==",e.value)),m=await f2(d);n.value=m.docs.map(g=>({id:g.id,...g.data()}))}catch(d){console.error("Błąd podczas ładowania podróży:",d)}},s=d=>{n.value.push(d),c()},a=()=>{t.value=!0},c=()=>{t.value=!1};return Fc.onAuthStateChanged(d=>{d?(e.value=d.uid,i()):(e.value=null,n.value=[])}),Kf(i),{trips:n,isModalVisible:t,showAddTripModal:a,closeModal:c,addTrip:s}}},nB={class:"container py-5"},iB={key:0,class:"text-center text-muted mt-5"},rB={key:1,class:"row"},sB={key:2,class:"d-flex justify-content-center mt-4"};function oB(n,t,e,i,s,a){const c=Zs("TripCard"),d=Zs("AddTripModal");return Wt(),jt("div",nB,[t[3]||(t[3]=J("h1",{class:"text-center mb-4 display-4 fw-bold text-green"},"Trip Master",-1)),i.trips.length===0?(Wt(),jt("div",iB,[t[2]||(t[2]=J("p",{class:"fs-5"},"Nie masz jeszcze żadnych podróży 😢",-1)),J("button",{class:"btn btn-green",onClick:t[0]||(t[0]=(...m)=>i.showAddTripModal&&i.showAddTripModal(...m))},"Dodaj swoją pierwszą podróż")])):(Wt(),jt("div",rB,[(Wt(!0),jt(Qn,null,Xo(i.trips,m=>(Wt(),am(c,{key:m.id,trip:m},null,8,["trip"]))),128))])),i.trips.length>0?(Wt(),jt("div",sB,[J("button",{class:"btn btn-green",onClick:t[1]||(t[1]=(...m)=>i.showAddTripModal&&i.showAddTripModal(...m))},"Dodaj nową podróż")])):dn("",!0),i.isModalVisible?(Wt(),am(d,{key:3,onClose:i.closeModal,onAddTrip:i.addTrip},null,8,["onClose","onAddTrip"])):dn("",!0)])}const dT=or(eB,[["render",oB],["__scopeId","data-v-5624bbb8"]]);var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aB(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var uB=sc.exports,pT;function lB(){return pT||(pT=1,function(n,t){(function(e,i){i(t)})(uB,function(e){var i="1.9.4";function s(r){var u,f,_,T;for(f=1,_=arguments.length;f<_;f++){T=arguments[f];for(u in T)r[u]=T[u]}return r}var a=Object.create||function(){function r(){}return function(u){return r.prototype=u,new r}}();function c(r,u){var f=Array.prototype.slice;if(r.bind)return r.bind.apply(r,f.call(arguments,1));var _=f.call(arguments,2);return function(){return r.apply(u,_.length?_.concat(f.call(arguments)):arguments)}}var d=0;function m(r){return"_leaflet_id"in r||(r._leaflet_id=++d),r._leaflet_id}function g(r,u,f){var _,T,A,F;return F=function(){_=!1,T&&(A.apply(f,T),T=!1)},A=function(){_?T=arguments:(r.apply(f,arguments),setTimeout(F,u),_=!0)},A}function w(r,u,f){var _=u[1],T=u[0],A=_-T;return r===_&&f?r:((r-T)%A+A)%A+T}function E(){return!1}function S(r,u){if(u===!1)return r;var f=Math.pow(10,u===void 0?6:u);return Math.round(r*f)/f}function x(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function z(r){return x(r).split(/\s+/)}function q(r,u){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var f in u)r.options[f]=u[f];return r.options}function K(r,u,f){var _=[];for(var T in r)_.push(encodeURIComponent(f?T.toUpperCase():T)+"="+encodeURIComponent(r[T]));return(!u||u.indexOf("?")===-1?"?":"&")+_.join("&")}var ht=/\{ *([\w_ -]+) *\}/g;function lt(r,u){return r.replace(ht,function(f,_){var T=u[_];if(T===void 0)throw new Error("No value provided for variable "+f);return typeof T=="function"&&(T=T(u)),T})}var at=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function vt(r,u){for(var f=0;f<r.length;f++)if(r[f]===u)return f;return-1}var xt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ut(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var U=0;function O(r){var u=+new Date,f=Math.max(0,16-(u-U));return U=u+f,window.setTimeout(r,f)}var N=window.requestAnimationFrame||Ut("RequestAnimationFrame")||O,H=window.cancelAnimationFrame||Ut("CancelAnimationFrame")||Ut("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function W(r,u,f){if(f&&N===O)r.call(u);else return N.call(window,c(r,u))}function G(r){r&&H.call(window,r)}var V={__proto__:null,extend:s,create:a,bind:c,get lastId(){return d},stamp:m,throttle:g,wrapNum:w,falseFn:E,formatNum:S,trim:x,splitWords:z,setOptions:q,getParamString:K,template:lt,isArray:at,indexOf:vt,emptyImageUrl:xt,requestFn:N,cancelFn:H,requestAnimFrame:W,cancelAnimFrame:G};function Ze(){}Ze.extend=function(r){var u=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,_=a(f);_.constructor=u,u.prototype=_;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(u[T]=this[T]);return r.statics&&s(u,r.statics),r.includes&&(Xn(r.includes),s.apply(null,[_].concat(r.includes))),s(_,r),delete _.statics,delete _.includes,_.options&&(_.options=f.options?a(f.options):{},s(_.options,r.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var A=0,F=_._initHooks.length;A<F;A++)_._initHooks[A].call(this)}},u},Ze.include=function(r){var u=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=u,this.mergeOptions(r.options)),this},Ze.mergeOptions=function(r){return s(this.prototype.options,r),this},Ze.addInitHook=function(r){var u=Array.prototype.slice.call(arguments,1),f=typeof r=="function"?r:function(){this[r].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function Xn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=at(r)?r:[r];for(var u=0;u<r.length;u++)r[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ce={on:function(r,u,f){if(typeof r=="object")for(var _ in r)this._on(_,r[_],u);else{r=z(r);for(var T=0,A=r.length;T<A;T++)this._on(r[T],u,f)}return this},off:function(r,u,f){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var _ in r)this._off(_,r[_],u);else{r=z(r);for(var T=arguments.length===1,A=0,F=r.length;A<F;A++)T?this._off(r[A]):this._off(r[A],u,f)}return this},_on:function(r,u,f,_){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(r,u,f)===!1){f===this&&(f=void 0);var T={fn:u,ctx:f};_&&(T.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(T)}},_off:function(r,u,f){var _,T,A;if(this._events&&(_=this._events[r],!!_)){if(arguments.length===1){if(this._firingCount)for(T=0,A=_.length;T<A;T++)_[T].fn=E;delete this._events[r];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var F=this._listens(r,u,f);if(F!==!1){var Y=_[F];this._firingCount&&(Y.fn=E,this._events[r]=_=_.slice()),_.splice(F,1)}}},fire:function(r,u,f){if(!this.listens(r,f))return this;var _=s({},u,{type:r,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var T=this._events[r];if(T){this._firingCount=this._firingCount+1||1;for(var A=0,F=T.length;A<F;A++){var Y=T[A],X=Y.fn;Y.once&&this.off(r,X,Y.ctx),X.call(Y.ctx||this,_)}this._firingCount--}}return f&&this._propagateEvent(_),this},listens:function(r,u,f,_){typeof r!="string"&&console.warn('"string" type argument expected');var T=u;typeof u!="function"&&(_=!!u,T=void 0,f=void 0);var A=this._events&&this._events[r];if(A&&A.length&&this._listens(r,T,f)!==!1)return!0;if(_){for(var F in this._eventParents)if(this._eventParents[F].listens(r,u,f,_))return!0}return!1},_listens:function(r,u,f){if(!this._events)return!1;var _=this._events[r]||[];if(!u)return!!_.length;f===this&&(f=void 0);for(var T=0,A=_.length;T<A;T++)if(_[T].fn===u&&_[T].ctx===f)return T;return!1},once:function(r,u,f){if(typeof r=="object")for(var _ in r)this._on(_,r[_],u,!0);else{r=z(r);for(var T=0,A=r.length;T<A;T++)this._on(r[T],u,f,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[m(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[m(r)],this},_propagateEvent:function(r){for(var u in this._eventParents)this._eventParents[u].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};Ce.addEventListener=Ce.on,Ce.removeEventListener=Ce.clearAllEventListeners=Ce.off,Ce.addOneTimeEventListener=Ce.once,Ce.fireEvent=Ce.fire,Ce.hasEventListeners=Ce.listens;var ae=Ze.extend(Ce);function Tt(r,u,f){this.x=f?Math.round(r):r,this.y=f?Math.round(u):u}var Un=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};Tt.prototype={clone:function(){return new Tt(this.x,this.y)},add:function(r){return this.clone()._add(Mt(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(Mt(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new Tt(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new Tt(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Un(this.x),this.y=Un(this.y),this},distanceTo:function(r){r=Mt(r);var u=r.x-this.x,f=r.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(r){return r=Mt(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=Mt(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function Mt(r,u,f){return r instanceof Tt?r:at(r)?new Tt(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new Tt(r.x,r.y):new Tt(r,u,f)}function ie(r,u){if(r)for(var f=u?[r,u]:r,_=0,T=f.length;_<T;_++)this.extend(f[_])}ie.prototype={extend:function(r){var u,f;if(!r)return this;if(r instanceof Tt||typeof r[0]=="number"||"x"in r)u=f=Mt(r);else if(r=ve(r),u=r.min,f=r.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(r){return Mt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return Mt(this.min.x,this.max.y)},getTopRight:function(){return Mt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var u,f;return typeof r[0]=="number"||r instanceof Tt?r=Mt(r):r=ve(r),r instanceof ie?(u=r.min,f=r.max):u=f=r,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(r){r=ve(r);var u=this.min,f=this.max,_=r.min,T=r.max,A=T.x>=u.x&&_.x<=f.x,F=T.y>=u.y&&_.y<=f.y;return A&&F},overlaps:function(r){r=ve(r);var u=this.min,f=this.max,_=r.min,T=r.max,A=T.x>u.x&&_.x<f.x,F=T.y>u.y&&_.y<f.y;return A&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var u=this.min,f=this.max,_=Math.abs(u.x-f.x)*r,T=Math.abs(u.y-f.y)*r;return ve(Mt(u.x-_,u.y-T),Mt(f.x+_,f.y+T))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,u){return!r||r instanceof ie?r:new ie(r,u)}function ye(r,u){if(r)for(var f=u?[r,u]:r,_=0,T=f.length;_<T;_++)this.extend(f[_])}ye.prototype={extend:function(r){var u=this._southWest,f=this._northEast,_,T;if(r instanceof re)_=r,T=r;else if(r instanceof ye){if(_=r._southWest,T=r._northEast,!_||!T)return this}else return r?this.extend(qt(r)||Fe(r)):this;return!u&&!f?(this._southWest=new re(_.lat,_.lng),this._northEast=new re(T.lat,T.lng)):(u.lat=Math.min(_.lat,u.lat),u.lng=Math.min(_.lng,u.lng),f.lat=Math.max(T.lat,f.lat),f.lng=Math.max(T.lng,f.lng)),this},pad:function(r){var u=this._southWest,f=this._northEast,_=Math.abs(u.lat-f.lat)*r,T=Math.abs(u.lng-f.lng)*r;return new ye(new re(u.lat-_,u.lng-T),new re(f.lat+_,f.lng+T))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof re||"lat"in r?r=qt(r):r=Fe(r);var u=this._southWest,f=this._northEast,_,T;return r instanceof ye?(_=r.getSouthWest(),T=r.getNorthEast()):_=T=r,_.lat>=u.lat&&T.lat<=f.lat&&_.lng>=u.lng&&T.lng<=f.lng},intersects:function(r){r=Fe(r);var u=this._southWest,f=this._northEast,_=r.getSouthWest(),T=r.getNorthEast(),A=T.lat>=u.lat&&_.lat<=f.lat,F=T.lng>=u.lng&&_.lng<=f.lng;return A&&F},overlaps:function(r){r=Fe(r);var u=this._southWest,f=this._northEast,_=r.getSouthWest(),T=r.getNorthEast(),A=T.lat>u.lat&&_.lat<f.lat,F=T.lng>u.lng&&_.lng<f.lng;return A&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,u){return r?(r=Fe(r),this._southWest.equals(r.getSouthWest(),u)&&this._northEast.equals(r.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(r,u){return r instanceof ye?r:new ye(r,u)}function re(r,u,f){if(isNaN(r)||isNaN(u))throw new Error("Invalid LatLng object: ("+r+", "+u+")");this.lat=+r,this.lng=+u,f!==void 0&&(this.alt=+f)}re.prototype={equals:function(r,u){if(!r)return!1;r=qt(r);var f=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return f<=(u===void 0?1e-9:u)},toString:function(r){return"LatLng("+S(this.lat,r)+", "+S(this.lng,r)+")"},distanceTo:function(r){return It.distance(this,qt(r))},wrap:function(){return It.wrapLatLng(this)},toBounds:function(r){var u=180*r/40075017,f=u/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function qt(r,u,f){return r instanceof re?r:at(r)&&typeof r[0]!="object"?r.length===3?new re(r[0],r[1],r[2]):r.length===2?new re(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new re(r.lat,"lng"in r?r.lng:r.lon,r.alt):u===void 0?null:new re(r,u,f)}var it={latLngToPoint:function(r,u){var f=this.projection.project(r),_=this.scale(u);return this.transformation._transform(f,_)},pointToLatLng:function(r,u){var f=this.scale(u),_=this.transformation.untransform(r,f);return this.projection.unproject(_)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(r),_=this.transformation.transform(u.min,f),T=this.transformation.transform(u.max,f);return new ie(_,T)},infinite:!1,wrapLatLng:function(r){var u=this.wrapLng?w(r.lng,this.wrapLng,!0):r.lng,f=this.wrapLat?w(r.lat,this.wrapLat,!0):r.lat,_=r.alt;return new re(f,u,_)},wrapLatLngBounds:function(r){var u=r.getCenter(),f=this.wrapLatLng(u),_=u.lat-f.lat,T=u.lng-f.lng;if(_===0&&T===0)return r;var A=r.getSouthWest(),F=r.getNorthEast(),Y=new re(A.lat-_,A.lng-T),X=new re(F.lat-_,F.lng-T);return new ye(Y,X)}},It=s({},it,{wrapLng:[-180,180],R:6371e3,distance:function(r,u){var f=Math.PI/180,_=r.lat*f,T=u.lat*f,A=Math.sin((u.lat-r.lat)*f/2),F=Math.sin((u.lng-r.lng)*f/2),Y=A*A+Math.cos(_)*Math.cos(T)*F*F,X=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*X}}),bt=6378137,Lt={R:bt,MAX_LATITUDE:85.0511287798,project:function(r){var u=Math.PI/180,f=this.MAX_LATITUDE,_=Math.max(Math.min(f,r.lat),-f),T=Math.sin(_*u);return new Tt(this.R*r.lng*u,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(r){var u=180/Math.PI;return new re((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*u,r.x*u/this.R)},bounds:function(){var r=bt*Math.PI;return new ie([-r,-r],[r,r])}()};function _e(r,u,f,_){if(at(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=u,this._c=f,this._d=_}_e.prototype={transform:function(r,u){return this._transform(r.clone(),u)},_transform:function(r,u){return u=u||1,r.x=u*(this._a*r.x+this._b),r.y=u*(this._c*r.y+this._d),r},untransform:function(r,u){return u=u||1,new Tt((r.x/u-this._b)/this._a,(r.y/u-this._d)/this._c)}};function k(r,u,f,_){return new _e(r,u,f,_)}var D=s({},It,{code:"EPSG:3857",projection:Lt,transformation:function(){var r=.5/(Math.PI*Lt.R);return k(r,.5,-r,.5)}()}),j=s({},D,{code:"EPSG:900913"});function st(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ft(r,u){var f="",_,T,A,F,Y,X;for(_=0,A=r.length;_<A;_++){for(Y=r[_],T=0,F=Y.length;T<F;T++)X=Y[T],f+=(T?"L":"M")+X.x+" "+X.y;f+=u?Vt.svg?"z":"x":""}return f||"M0 0"}var ot=document.documentElement.style,At="ActiveXObject"in window,Et=At&&!document.addEventListener,yt="msLaunchUri"in navigator&&!("documentMode"in document),dt=Si("webkit"),Dt=Si("android"),Pt=Si("android 2")||Si("android 3"),Nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),zt=Dt&&Si("Google")&&Nt<537&&!("AudioNode"in window),Bt=!!window.opera,Kt=!yt&&Si("chrome"),le=Si("gecko")&&!dt&&!Bt&&!At,mn=!Kt&&Si("safari"),on=Si("phantom"),kn="OTransition"in ot,_n=navigator.platform.indexOf("Win")===0,_i=At&&"transition"in ot,Wi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pt,an="MozPerspective"in ot,Bn=!window.L_DISABLE_3D&&(_i||Wi||an)&&!kn&&!on,Pi=typeof orientation<"u"||Si("mobile"),ha=Pi&&dt,yu=Pi&&Wi,fa=!window.PointerEvent&&window.MSPointerEvent,Er=!!(window.PointerEvent||fa),ys="ontouchstart"in window||!!window.TouchEvent,da=!window.L_NO_TOUCH&&(ys||Er),Ir=Pi&&Bt,wu=Pi&&le,lo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,pa=function(){var r=!1;try{var u=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",E,u),window.removeEventListener("testPassiveEventSupport",E,u)}catch{}return r}(),ws=function(){return!!document.createElement("canvas").getContext}(),co=!!(document.createElementNS&&st("svg").createSVGRect),Mn=!!co&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ho=!co&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var u=r.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Ts=navigator.platform.indexOf("Mac")===0,br=navigator.platform.indexOf("Linux")===0;function Si(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var Vt={ie:At,ielt9:Et,edge:yt,webkit:dt,android:Dt,android23:Pt,androidStock:zt,opera:Bt,chrome:Kt,gecko:le,safari:mn,phantom:on,opera12:kn,win:_n,ie3d:_i,webkit3d:Wi,gecko3d:an,any3d:Bn,mobile:Pi,mobileWebkit:ha,mobileWebkit3d:yu,msPointer:fa,pointer:Er,touch:da,touchNative:ys,mobileOpera:Ir,mobileGecko:wu,retina:lo,passiveEvents:pa,canvas:ws,svg:co,vml:ho,inlineSvg:Mn,mac:Ts,linux:br},Ar=Vt.msPointer?"MSPointerDown":"pointerdown",Tu=Vt.msPointer?"MSPointerMove":"pointermove",Eu=Vt.msPointer?"MSPointerUp":"pointerup",Es=Vt.msPointer?"MSPointerCancel":"pointercancel",fo={touchstart:Ar,touchmove:Tu,touchend:Eu,touchcancel:Es},po={touchstart:Pr,touchmove:mo,touchend:mo,touchcancel:mo},Ri={},qi=!1;function Iu(r,u,f){return u==="touchstart"&&Is(),po[u]?(f=po[u].bind(this,f),r.addEventListener(fo[u],f,!1),f):(console.warn("wrong event specified:",u),E)}function bu(r,u,f){if(!fo[u]){console.warn("wrong event specified:",u);return}r.removeEventListener(fo[u],f,!1)}function ma(r){Ri[r.pointerId]=r}function _a(r){Ri[r.pointerId]&&(Ri[r.pointerId]=r)}function ga(r){delete Ri[r.pointerId]}function Is(){qi||(document.addEventListener(Ar,ma,!0),document.addEventListener(Tu,_a,!0),document.addEventListener(Eu,ga,!0),document.addEventListener(Es,ga,!0),qi=!0)}function mo(r,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in Ri)u.touches.push(Ri[f]);u.changedTouches=[u],r(u)}}function Pr(r,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&te(u),mo(r,u)}function Au(r){var u={},f,_;for(_ in r)f=r[_],u[_]=f&&f.bind?f.bind(r):f;return r=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var va=200;function bs(r,u){r.addEventListener("dblclick",u);var f=0,_;function T(A){if(A.detail!==1){_=A.detail;return}if(!(A.pointerType==="mouse"||A.sourceCapabilities&&!A.sourceCapabilities.firesTouchEvents)){var F=Sa(A);if(!(F.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!F.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var Y=Date.now();Y-f<=va?(_++,_===2&&u(Au(A))):_=1,f=Y}}}return r.addEventListener("click",T),{dblclick:u,simDblclick:T}}function ar(r,u){r.removeEventListener("dblclick",u.dblclick),r.removeEventListener("click",u.simDblclick)}var $r=$i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jr=$i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ya=jr==="webkitTransition"||jr==="OTransition"?jr+"End":"transitionend";function wa(r){return typeof r=="string"?document.getElementById(r):r}function Kr(r,u){var f=r.style[u]||r.currentStyle&&r.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(r,null);f=_?_[u]:null}return f==="auto"?null:f}function Pe(r,u,f){var _=document.createElement(r);return _.className=u||"",f&&f.appendChild(_),_}function Ue(r){var u=r.parentNode;u&&u.removeChild(r)}function Gr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function ur(r){var u=r.parentNode;u&&u.lastChild!==r&&u.appendChild(r)}function lr(r){var u=r.parentNode;u&&u.firstChild!==r&&u.insertBefore(r,u.firstChild)}function Ta(r,u){if(r.classList!==void 0)return r.classList.contains(u);var f=Ci(r);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function se(r,u){if(r.classList!==void 0)for(var f=z(u),_=0,T=f.length;_<T;_++)r.classList.add(f[_]);else if(!Ta(r,u)){var A=Ci(r);_o(r,(A?A+" ":"")+u)}}function Ge(r,u){r.classList!==void 0?r.classList.remove(u):_o(r,x((" "+Ci(r)+" ").replace(" "+u+" "," ")))}function _o(r,u){r.className.baseVal===void 0?r.className=u:r.className.baseVal=u}function Ci(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function rn(r,u){"opacity"in r.style?r.style.opacity=u:"filter"in r.style&&As(r,u)}function As(r,u){var f=!1,_="DXImageTransform.Microsoft.Alpha";try{f=r.filters.item(_)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):r.style.filter+=" progid:"+_+"(opacity="+u+")"}function $i(r){for(var u=document.documentElement.style,f=0;f<r.length;f++)if(r[f]in u)return r[f];return!1}function cr(r,u,f){var _=u||new Tt(0,0);r.style[$r]=(Vt.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(f?" scale("+f+")":"")}function Xt(r,u){r._leaflet_pos=u,Vt.any3d?cr(r,u):(r.style.left=u.x+"px",r.style.top=u.y+"px")}function ti(r){return r._leaflet_pos||new Tt(0,0)}var gi,zn,go;if("onselectstart"in document)gi=function(){Gt(window,"selectstart",te)},zn=function(){Be(window,"selectstart",te)};else{var Sr=$i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);gi=function(){if(Sr){var r=document.documentElement.style;go=r[Sr],r[Sr]="none"}},zn=function(){Sr&&(document.documentElement.style[Sr]=go,go=void 0)}}function Ea(){Gt(window,"dragstart",te)}function vo(){Be(window,"dragstart",te)}var Ps,yo;function hr(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(vi(),Ps=r,yo=r.style.outlineStyle,r.style.outlineStyle="none",Gt(window,"keydown",vi))}function vi(){Ps&&(Ps.style.outlineStyle=yo,Ps=void 0,yo=void 0,Be(window,"keydown",vi))}function Ia(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function wo(r){var u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}var ba={__proto__:null,TRANSFORM:$r,TRANSITION:jr,TRANSITION_END:ya,get:wa,getStyle:Kr,create:Pe,remove:Ue,empty:Gr,toFront:ur,toBack:lr,hasClass:Ta,addClass:se,removeClass:Ge,setClass:_o,getClass:Ci,setOpacity:rn,testProp:$i,setTransform:cr,setPosition:Xt,getPosition:ti,get disableTextSelection(){return gi},get enableTextSelection(){return zn},disableImageDrag:Ea,enableImageDrag:vo,preventOutline:hr,restoreOutline:vi,getSizedParentNode:Ia,getScale:wo};function Gt(r,u,f,_){if(u&&typeof u=="object")for(var T in u)Aa(r,T,u[T],f);else{u=z(u);for(var A=0,F=u.length;A<F;A++)Aa(r,u[A],f,_)}return this}var xi="_leaflet_events";function Be(r,u,f,_){if(arguments.length===1)Pu(r),delete r[xi];else if(u&&typeof u=="object")for(var T in u)Pa(r,T,u[T],f);else if(u=z(u),arguments.length===2)Pu(r,function(Y){return vt(u,Y)!==-1});else for(var A=0,F=u.length;A<F;A++)Pa(r,u[A],f,_);return this}function Pu(r,u){for(var f in r[xi]){var _=f.split(/\d/)[0];(!u||u(_))&&Pa(r,_,null,null,f)}}var ei={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(r,u,f,_){var T=u+m(f)+(_?"_"+m(_):"");if(r[xi]&&r[xi][T])return this;var A=function(Y){return f.call(_||r,Y||window.event)},F=A;!Vt.touchNative&&Vt.pointer&&u.indexOf("touch")===0?A=Iu(r,u,A):Vt.touch&&u==="dblclick"?A=bs(r,A):"addEventListener"in r?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?r.addEventListener(ei[u]||u,A,Vt.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(A=function(Y){Y=Y||window.event,Ra(r,Y)&&F(Y)},r.addEventListener(ei[u],A,!1)):r.addEventListener(u,F,!1):r.attachEvent("on"+u,A),r[xi]=r[xi]||{},r[xi][T]=A}function Pa(r,u,f,_,T){T=T||u+m(f)+(_?"_"+m(_):"");var A=r[xi]&&r[xi][T];if(!A)return this;!Vt.touchNative&&Vt.pointer&&u.indexOf("touch")===0?bu(r,u,A):Vt.touch&&u==="dblclick"?ar(r,A):"removeEventListener"in r?r.removeEventListener(ei[u]||u,A,!1):r.detachEvent("on"+u,A),r[xi][T]=null}function Li(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Zr(r){return Aa(r,"wheel",Li),this}function Qr(r){return Gt(r,"mousedown touchstart dblclick contextmenu",Li),r._leaflet_disable_click=!0,this}function te(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function we(r){return te(r),Li(r),this}function Sa(r){if(r.composedPath)return r.composedPath();for(var u=[],f=r.target;f;)u.push(f),f=f.parentNode;return u}function To(r,u){if(!u)return new Tt(r.clientX,r.clientY);var f=wo(u),_=f.boundingClientRect;return new Tt((r.clientX-_.left)/f.x-u.clientLeft,(r.clientY-_.top)/f.y-u.clientTop)}var Xe=Vt.linux&&Vt.chrome?window.devicePixelRatio:Vt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Su(r){return Vt.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Xe:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Ra(r,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==r;)f=f.parentNode}catch{return!1}return f!==r}var Ru={__proto__:null,on:Gt,off:Be,stopPropagation:Li,disableScrollPropagation:Zr,disableClickPropagation:Qr,preventDefault:te,stop:we,getPropagationPath:Sa,getMousePosition:To,getWheelDelta:Su,isExternalTarget:Ra,addListener:Gt,removeListener:Be},Eo=ae.extend({run:function(r,u,f,_){this.stop(),this._el=r,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=ti(r),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=W(this._animate,this),this._step()},_step:function(r){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),r):(this._runFrame(1),this._complete())},_runFrame:function(r,u){var f=this._startPos.add(this._offset.multiplyBy(r));u&&f._round(),Xt(this._el,f),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ee=ae.extend({options:{crs:D,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,u){u=q(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(qt(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jr&&Vt.any3d&&!Vt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Gt(this._proxy,ya,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),r=this._limitCenter(qt(r),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var _=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,u,f.zoom):this._tryAnimatedPan(r,f.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(r,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(r,u){return this._loaded?this.setView(this.getCenter(),r,{zoom:u}):(this._zoom=r,this)},zoomIn:function(r,u){return r=r||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,u)},zoomOut:function(r,u){return r=r||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,u)},setZoomAround:function(r,u,f){var _=this.getZoomScale(u),T=this.getSize().divideBy(2),A=r instanceof Tt?r:this.latLngToContainerPoint(r),F=A.subtract(T).multiplyBy(1-1/_),Y=this.containerPointToLatLng(T.add(F));return this.setView(Y,u,{zoom:f})},_getBoundsCenterZoom:function(r,u){u=u||{},r=r.getBounds?r.getBounds():Fe(r);var f=Mt(u.paddingTopLeft||u.padding||[0,0]),_=Mt(u.paddingBottomRight||u.padding||[0,0]),T=this.getBoundsZoom(r,!1,f.add(_));if(T=typeof u.maxZoom=="number"?Math.min(u.maxZoom,T):T,T===1/0)return{center:r.getCenter(),zoom:T};var A=_.subtract(f).divideBy(2),F=this.project(r.getSouthWest(),T),Y=this.project(r.getNorthEast(),T),X=this.unproject(F.add(Y).divideBy(2).add(A),T);return{center:X,zoom:T}},fitBounds:function(r,u){if(r=Fe(r),!r.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(r,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,u){return this.setView(r,this._zoom,{pan:u})},panBy:function(r,u){if(r=Mt(r).round(),u=u||{},!r.x&&!r.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Eo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,u,f){if(f=f||{},f.animate===!1||!Vt.any3d)return this.setView(r,u,f);this._stop();var _=this.project(this.getCenter()),T=this.project(r),A=this.getSize(),F=this._zoom;r=qt(r),u=u===void 0?F:u;var Y=Math.max(A.x,A.y),X=Y*this.getZoomScale(F,u),_t=T.distanceTo(_)||1,Rt=1.42,Ht=Rt*Rt;function pe(tn){var Ha=tn?-1:1,P=tn?X:Y,xo=X*X-Y*Y+Ha*Ht*Ht*_t*_t,Bu=2*P*Ht*_t,ri=xo/Bu,Ie=Math.sqrt(ri*ri+1)-ri,Md=Ie<1e-9?-18:Math.log(Ie);return Md}function yn(tn){return(Math.exp(tn)-Math.exp(-tn))/2}function cn(tn){return(Math.exp(tn)+Math.exp(-tn))/2}function qn(tn){return yn(tn)/cn(tn)}var Dn=pe(0);function Gi(tn){return Y*(cn(Dn)/cn(Dn+Rt*tn))}function xd(tn){return Y*(cn(Dn)*qn(Dn+Rt*tn)-yn(Dn))/Ht}function Ld(tn){return 1-Math.pow(1-tn,1.5)}var Od=Date.now(),lh=(pe(1)-Dn)/Rt,kd=f.duration?1e3*f.duration:1e3*lh*.8;function za(){var tn=(Date.now()-Od)/kd,Ha=Ld(tn)*lh;tn<=1?(this._flyToFrame=W(za,this),this._move(this.unproject(_.add(T.subtract(_).multiplyBy(xd(Ha)/_t)),F),this.getScaleZoom(Y/Gi(Ha),F),{flyTo:!0})):this._move(r,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),za.call(this),this},flyToBounds:function(r,u){var f=this._getBoundsCenterZoom(r,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(r){return r=Fe(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var u=this.options.minZoom;return this.options.minZoom=r,this._loaded&&u!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var u=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&u!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,u){this._enforcingBounds=!0;var f=this.getCenter(),_=this._limitCenter(f,this._zoom,Fe(r));return f.equals(_)||this.panTo(_,u),this._enforcingBounds=!1,this},panInside:function(r,u){u=u||{};var f=Mt(u.paddingTopLeft||u.padding||[0,0]),_=Mt(u.paddingBottomRight||u.padding||[0,0]),T=this.project(this.getCenter()),A=this.project(r),F=this.getPixelBounds(),Y=ve([F.min.add(f),F.max.subtract(_)]),X=Y.getSize();if(!Y.contains(A)){this._enforcingBounds=!0;var _t=A.subtract(Y.getCenter()),Rt=Y.extend(A).getSize().subtract(X);T.x+=_t.x<0?-Rt.x:Rt.x,T.y+=_t.y<0?-Rt.y:Rt.y,this.panTo(this.unproject(T),u),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),_=u.divideBy(2).round(),T=f.divideBy(2).round(),A=_.subtract(T);return!A.x&&!A.y?this:(r.animate&&r.pan?this.panBy(A):(r.pan&&this._rawPanBy(A),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=c(this._handleGeolocationResponse,this),f=c(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,r):navigator.geolocation.getCurrentPosition(u,f,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var u=r.code,f=r.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var u=r.coords.latitude,f=r.coords.longitude,_=new re(u,f),T=_.toBounds(r.coords.accuracy*2),A=this._locateOptions;if(A.setView){var F=this.getBoundsZoom(T);this.setView(_,A.maxZoom?Math.min(F,A.maxZoom):F)}var Y={latlng:_,bounds:T,timestamp:r.timestamp};for(var X in r.coords)typeof r.coords[X]=="number"&&(Y[X]=r.coords[X]);this.fire("locationfound",Y)}},addHandler:function(r,u){if(!u)return this;var f=this[r]=new u(this);return this._handlers.push(f),this.options[r]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ue(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,u){var f="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),_=Pe("div",f,u||this._mapPane);return r&&(this._panes[r]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),u=this.unproject(r.getBottomLeft()),f=this.unproject(r.getTopRight());return new ye(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,u,f){r=Fe(r),f=Mt(f||[0,0]);var _=this.getZoom()||0,T=this.getMinZoom(),A=this.getMaxZoom(),F=r.getNorthWest(),Y=r.getSouthEast(),X=this.getSize().subtract(f),_t=ve(this.project(Y,_),this.project(F,_)).getSize(),Rt=Vt.any3d?this.options.zoomSnap:1,Ht=X.x/_t.x,pe=X.y/_t.y,yn=u?Math.max(Ht,pe):Math.min(Ht,pe);return _=this.getScaleZoom(yn,_),Rt&&(_=Math.round(_/(Rt/100))*(Rt/100),_=u?Math.ceil(_/Rt)*Rt:Math.floor(_/Rt)*Rt),Math.max(T,Math.min(A,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Tt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,u){var f=this._getTopLeftPoint(r,u);return new ie(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(r)/f.scale(u)},getScaleZoom:function(r,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var _=f.zoom(r*f.scale(u));return isNaN(_)?1/0:_},project:function(r,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(qt(r),u)},unproject:function(r,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(Mt(r),u)},layerPointToLatLng:function(r){var u=Mt(r).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(r){var u=this.project(qt(r))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(qt(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Fe(r))},distance:function(r,u){return this.options.crs.distance(qt(r),qt(u))},containerPointToLayerPoint:function(r){return Mt(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return Mt(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var u=this.containerPointToLayerPoint(Mt(r));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(qt(r)))},mouseEventToContainerPoint:function(r){return To(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var u=this._container=wa(r);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Gt(u,"scroll",this._onScroll,this),this._containerId=m(u)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&Vt.any3d,se(r,"leaflet-container"+(Vt.touch?" leaflet-touch":"")+(Vt.retina?" leaflet-retina":"")+(Vt.ielt9?" leaflet-oldie":"")+(Vt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Kr(r,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xt(this._mapPane,new Tt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(r.markerPane,"leaflet-zoom-hide"),se(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,u,f){Xt(this._mapPane,new Tt(0,0));var _=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var T=this._zoom!==u;this._moveStart(T,f)._move(r,u)._moveEnd(T),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(r,u){return r&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(r,u,f,_){u===void 0&&(u=this._zoom);var T=this._zoom!==u;return this._zoom=u,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),_?f&&f.pinch&&this.fire("zoom",f):((T||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Xt(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[m(this._container)]=this;var u=r?Be:Gt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Vt.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=W(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,u){for(var f=[],_,T=u==="mouseout"||u==="mouseover",A=r.target||r.srcElement,F=!1;A;){if(_=this._targets[m(A)],_&&(u==="click"||u==="preclick")&&this._draggableMoved(_)){F=!0;break}if(_&&_.listens(u,!0)&&(T&&!Ra(A,r)||(f.push(_),T))||A===this._container)break;A=A.parentNode}return!f.length&&!F&&!T&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var u=r.target||r.srcElement;if(!(!this._loaded||u._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(u))){var f=r.type;f==="mousedown"&&hr(u),this._fireDOMEvent(r,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,u,f){if(r.type==="click"){var _=s({},r);_.type="preclick",this._fireDOMEvent(_,_.type,f)}var T=this._findEventTargets(r,u);if(f){for(var A=[],F=0;F<f.length;F++)f[F].listens(u,!0)&&A.push(f[F]);T=A.concat(T)}if(T.length){u==="contextmenu"&&te(r);var Y=T[0],X={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var _t=Y.getLatLng&&(!Y._radius||Y._radius<=10);X.containerPoint=_t?this.latLngToContainerPoint(Y.getLatLng()):this.mouseEventToContainerPoint(r),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=_t?Y.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(F=0;F<T.length;F++)if(T[F].fire(u,X,!0),X.originalEvent._stopped||T[F].options.bubblingMouseEvents===!1&&vt(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,u=this._handlers.length;r<u;r++)this._handlers[r].disable()},whenReady:function(r,u){return this._loaded?r.call(u||this,{target:this}):this.on("load",r,u),this},_getMapPanePos:function(){return ti(this._mapPane)||new Tt(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,u){var f=r&&u!==void 0?this._getNewPixelOrigin(r,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,u){var f=this.getSize()._divideBy(2);return this.project(r,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,u,f){var _=this._getNewPixelOrigin(f,u);return this.project(r,u)._subtract(_)},_latLngBoundsToNewLayerBounds:function(r,u,f){var _=this._getNewPixelOrigin(f,u);return ve([this.project(r.getSouthWest(),u)._subtract(_),this.project(r.getNorthWest(),u)._subtract(_),this.project(r.getSouthEast(),u)._subtract(_),this.project(r.getNorthEast(),u)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,u,f){if(!f)return r;var _=this.project(r,u),T=this.getSize().divideBy(2),A=new ie(_.subtract(T),_.add(T)),F=this._getBoundsOffset(A,f,u);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?r:this.unproject(_.add(F),u)},_limitOffset:function(r,u){if(!u)return r;var f=this.getPixelBounds(),_=new ie(f.min.add(r),f.max.add(r));return r.add(this._getBoundsOffset(_,u))},_getBoundsOffset:function(r,u,f){var _=ve(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),T=_.min.subtract(r.min),A=_.max.subtract(r.max),F=this._rebound(T.x,-A.x),Y=this._rebound(T.y,-A.y);return new Tt(F,Y)},_rebound:function(r,u){return r+u>0?Math.round(r-u)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(u))},_limitZoom:function(r){var u=this.getMinZoom(),f=this.getMaxZoom(),_=Vt.any3d?this.options.zoomSnap:1;return _&&(r=Math.round(r/_)*_),Math.max(u,Math.min(f,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,u){var f=this._getCenterOffset(r)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(u){var f=$r,_=this._proxy.style[f];cr(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),_===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),u=this.getZoom();cr(this._proxy,this.project(r,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(u),T=this._getCenterOffset(r)._divideBy(1-1/_);return f.animate!==!0&&!this.getSize().contains(T)?!1:(W(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(r,u,!0)},this),!0)},_animateZoom:function(r,u,f,_){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=u,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:u,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function un(r,u){return new Ee(r,u)}var Hn=Ze.extend({options:{position:"topright"},initialize:function(r){q(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var u=this._map;return u&&u.removeControl(this),this.options.position=r,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var u=this._container=this.onAdd(r),f=this.getPosition(),_=r._controlCorners[f];return se(u,"leaflet-control"),f.indexOf("bottom")!==-1?_.insertBefore(u,_.firstChild):_.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),hn=function(r){return new Hn(r)};Ee.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},u="leaflet-",f=this._controlContainer=Pe("div",u+"control-container",this._container);function _(T,A){var F=u+T+" "+u+A;r[T+A]=Pe("div",F,f)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ue(this._controlCorners[r]);Ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Io=Hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,u,f,_){return f<_?-1:_<f?1:0}},initialize:function(r,u,f){q(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in r)this._addLayer(r[_],_);for(_ in u)this._addLayer(u[_],_,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Hn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,u){return this._addLayer(r,u),this._map?this._update():this},addOverlay:function(r,u){return this._addLayer(r,u,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var u=this._getLayer(m(r));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",u=this._container=Pe("div",r),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Qr(u),Zr(u);var _=this._section=Pe("section",r+"-list");f&&(this._map.on("click",this.collapse,this),Gt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Pe("a",r+"-toggle",u);T.href="#",T.title="Layers",T.setAttribute("role","button"),Gt(T,{keydown:function(A){A.keyCode===13&&this._expandSafely()},click:function(A){te(A),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Pe("div",r+"-base",_),this._separator=Pe("div",r+"-separator",_),this._overlaysList=Pe("div",r+"-overlays",_),u.appendChild(_)},_getLayer:function(r){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&m(this._layers[u].layer)===r)return this._layers[u]},_addLayer:function(r,u,f){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(c(function(_,T){return this.options.sortFunction(_.layer,T.layer,_.name,T.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Gr(this._baseLayersList),Gr(this._overlaysList),this._layerControlInputs=[];var r,u,f,_,T=0;for(f=0;f<this._layers.length;f++)_=this._layers[f],this._addItem(_),u=u||_.overlay,r=r||!_.overlay,T+=_.overlay?0:1;return this.options.hideSingleBase&&(r=r&&T>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=u&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var u=this._getLayer(m(r.target)),f=u.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(r,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(u?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=f,_.firstChild},_addItem:function(r){var u=document.createElement("label"),f=this._map.hasLayer(r.layer),_;r.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=f):_=this._createRadioElement("leaflet-base-layers_"+m(this),f),this._layerControlInputs.push(_),_.layerId=m(r.layer),Gt(_,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+r.name;var A=document.createElement("span");u.appendChild(A),A.appendChild(_),A.appendChild(T);var F=r.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,u,f,_=[],T=[];this._handlingClick=!0;for(var A=r.length-1;A>=0;A--)u=r[A],f=this._getLayer(u.layerId).layer,u.checked?_.push(f):u.checked||T.push(f);for(A=0;A<T.length;A++)this._map.hasLayer(T[A])&&this._map.removeLayer(T[A]);for(A=0;A<_.length;A++)this._map.hasLayer(_[A])||this._map.addLayer(_[A]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,u,f,_=this._map.getZoom(),T=r.length-1;T>=0;T--)u=r[T],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&_<f.options.minZoom||f.options.maxZoom!==void 0&&_>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Gt(r,"click",te),this.expand();var u=this;setTimeout(function(){Be(r,"click",te),u._preventClick=!1})}}),Ca=function(r,u,f){return new Io(r,u,f)},gn=Hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var u="leaflet-control-zoom",f=Pe("div",u+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,u,f,_,T){var A=Pe("a",f,_);return A.innerHTML=r,A.href="#",A.title=u,A.setAttribute("role","button"),A.setAttribute("aria-label",u),Qr(A),Gt(A,"click",we),Gt(A,"click",T,this),Gt(A,"click",this._refocusOnMap,this),A},_updateDisabled:function(){var r=this._map,u="leaflet-disabled";Ge(this._zoomInButton,u),Ge(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(se(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(se(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gn,this.addControl(this.zoomControl))});var xa=function(r){return new gn(r)},Ss=Hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var u="leaflet-control-scale",f=Pe("div",u),_=this.options;return this._addScales(_,u+"-line",f),r.on(_.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),f},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,u,f){r.metric&&(this._mScale=Pe("div",u,f)),r.imperial&&(this._iScale=Pe("div",u,f))},_update:function(){var r=this._map,u=r.getSize().y/2,f=r.distance(r.containerPointToLatLng([0,u]),r.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var u=this._getRoundNum(r),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/r)},_updateImperial:function(r){var u=r*3.2808399,f,_,T;u>5280?(f=u/5280,_=this._getRoundNum(f),this._updateScale(this._iScale,_+" mi",_/f)):(T=this._getRoundNum(u),this._updateScale(this._iScale,T+" ft",T/u))},_updateScale:function(r,u,f){r.style.width=Math.round(this.options.maxWidth*f)+"px",r.innerHTML=u},_getRoundNum:function(r){var u=Math.pow(10,(Math.floor(r)+"").length-1),f=r/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),Rs=function(r){return new Ss(r)},La='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rr=Hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Vt.inlineSvg?La+" ":"")+"Leaflet</a>"},initialize:function(r){q(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Qr(this._container);for(var u in r._layers)r._layers[u].getAttribution&&this.addAttribution(r._layers[u].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var u in this._attributions)this._attributions[u]&&r.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),r.length&&f.push(r.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new Rr().addTo(this)});var Cu=function(r){return new Rr(r)};Hn.Layers=Io,Hn.Zoom=gn,Hn.Scale=Ss,Hn.Attribution=Rr,hn.layers=Ca,hn.zoom=xa,hn.scale=Rs,hn.attribution=Cu;var Qe=Ze.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(r,u){return r.addHandler(u,this),this};var Cs={Events:Ce},Wn=Vt.touch?"touchstart mousedown":"mousedown",ji=ae.extend({options:{clickTolerance:3},initialize:function(r,u,f,_){q(this,_),this._element=r,this._dragStartTarget=u||r,this._preventOutline=f},enable:function(){this._enabled||(Gt(this._dragStartTarget,Wn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ji._dragging===this&&this.finishDrag(!0),Be(this._dragStartTarget,Wn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Ta(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){ji._dragging===this&&this.finishDrag();return}if(!(ji._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(ji._dragging=this,this._preventOutline&&hr(this._element),Ea(),gi(),!this._moving)){this.fire("down");var u=r.touches?r.touches[0]:r,f=Ia(this._element);this._startPoint=new Tt(u.clientX,u.clientY),this._startPos=ti(this._element),this._parentScale=wo(f);var _=r.type==="mousedown";Gt(document,_?"mousemove":"touchmove",this._onMove,this),Gt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var u=r.touches&&r.touches.length===1?r.touches[0]:r,f=new Tt(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,te(r),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Xt(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ge(document.body,"leaflet-dragging"),this._lastTarget&&(Ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Be(document,"mousemove touchmove",this._onMove,this),Be(document,"mouseup touchend touchcancel",this._onUp,this),vo(),zn();var u=this._moved&&this._moving;this._moving=!1,ji._dragging=!1,u&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function xs(r,u,f){var _,T=[1,4,2,8],A,F,Y,X,_t,Rt,Ht,pe;for(A=0,Rt=r.length;A<Rt;A++)r[A]._code=wi(r[A],u);for(Y=0;Y<4;Y++){for(Ht=T[Y],_=[],A=0,Rt=r.length,F=Rt-1;A<Rt;F=A++)X=r[A],_t=r[F],X._code&Ht?_t._code&Ht||(pe=En(_t,X,Ht,u,f),pe._code=wi(pe,u),_.push(pe)):(_t._code&Ht&&(pe=En(_t,X,Ht,u,f),pe._code=wi(pe,u),_.push(pe)),_.push(X));r=_}return r}function yi(r,u){var f,_,T,A,F,Y,X,_t,Rt;if(!r||r.length===0)throw new Error("latlngs not passed");h(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Ht=qt([0,0]),pe=Fe(r),yn=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());yn<1700&&(Ht=Cr(r));var cn=r.length,qn=[];for(f=0;f<cn;f++){var Dn=qt(r[f]);qn.push(u.project(qt([Dn.lat-Ht.lat,Dn.lng-Ht.lng])))}for(Y=X=_t=0,f=0,_=cn-1;f<cn;_=f++)T=qn[f],A=qn[_],F=T.y*A.x-A.y*T.x,X+=(T.x+A.x)*F,_t+=(T.y+A.y)*F,Y+=F*3;Y===0?Rt=qn[0]:Rt=[X/Y,_t/Y];var Gi=u.unproject(Mt(Rt));return qt([Gi.lat+Ht.lat,Gi.lng+Ht.lng])}function Cr(r){for(var u=0,f=0,_=0,T=0;T<r.length;T++){var A=qt(r[T]);u+=A.lat,f+=A.lng,_++}return qt([u/_,f/_])}var Jr={__proto__:null,clipPolygon:xs,polygonCenter:yi,centroid:Cr};function ze(r,u){if(!u||!r.length)return r.slice();var f=u*u;return r=Lu(r,f),r=xu(r,f),r}function Oi(r,u,f){return Math.sqrt(ki(r,u,f,!0))}function Ki(r,u,f){return ki(r,u,f)}function xu(r,u){var f=r.length,_=typeof Uint8Array<"u"?Uint8Array:Array,T=new _(f);T[0]=T[f-1]=1,Yr(r,T,u,0,f-1);var A,F=[];for(A=0;A<f;A++)T[A]&&F.push(r[A]);return F}function Yr(r,u,f,_,T){var A=0,F,Y,X;for(Y=_+1;Y<=T-1;Y++)X=ki(r[Y],r[_],r[T],!0),X>A&&(F=Y,A=X);A>f&&(u[F]=1,Yr(r,u,f,_,F),Yr(r,u,f,F,T))}function Lu(r,u){for(var f=[r[0]],_=1,T=0,A=r.length;_<A;_++)xr(r[_],r[T])>u&&(f.push(r[_]),T=_);return T<A-1&&f.push(r[A-1]),f}var Oa;function Ls(r,u,f,_,T){var A=_?Oa:wi(r,f),F=wi(u,f),Y,X,_t;for(Oa=F;;){if(!(A|F))return[r,u];if(A&F)return!1;Y=A||F,X=En(r,u,Y,f,T),_t=wi(X,f),Y===A?(r=X,A=_t):(u=X,F=_t)}}function En(r,u,f,_,T){var A=u.x-r.x,F=u.y-r.y,Y=_.min,X=_.max,_t,Rt;return f&8?(_t=r.x+A*(X.y-r.y)/F,Rt=X.y):f&4?(_t=r.x+A*(Y.y-r.y)/F,Rt=Y.y):f&2?(_t=X.x,Rt=r.y+F*(X.x-r.x)/A):f&1&&(_t=Y.x,Rt=r.y+F*(Y.x-r.x)/A),new Tt(_t,Rt,T)}function wi(r,u){var f=0;return r.x<u.min.x?f|=1:r.x>u.max.x&&(f|=2),r.y<u.min.y?f|=4:r.y>u.max.y&&(f|=8),f}function xr(r,u){var f=u.x-r.x,_=u.y-r.y;return f*f+_*_}function ki(r,u,f,_){var T=u.x,A=u.y,F=f.x-T,Y=f.y-A,X=F*F+Y*Y,_t;return X>0&&(_t=((r.x-T)*F+(r.y-A)*Y)/X,_t>1?(T=f.x,A=f.y):_t>0&&(T+=F*_t,A+=Y*_t)),F=r.x-T,Y=r.y-A,_?F*F+Y*Y:new Tt(T,A)}function h(r){return!at(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function v(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(r)}function I(r,u){var f,_,T,A,F,Y,X,_t;if(!r||r.length===0)throw new Error("latlngs not passed");h(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Rt=qt([0,0]),Ht=Fe(r),pe=Ht.getNorthWest().distanceTo(Ht.getSouthWest())*Ht.getNorthEast().distanceTo(Ht.getNorthWest());pe<1700&&(Rt=Cr(r));var yn=r.length,cn=[];for(f=0;f<yn;f++){var qn=qt(r[f]);cn.push(u.project(qt([qn.lat-Rt.lat,qn.lng-Rt.lng])))}for(f=0,_=0;f<yn-1;f++)_+=cn[f].distanceTo(cn[f+1])/2;if(_===0)_t=cn[0];else for(f=0,A=0;f<yn-1;f++)if(F=cn[f],Y=cn[f+1],T=F.distanceTo(Y),A+=T,A>_){X=(A-_)/T,_t=[Y.x-X*(Y.x-F.x),Y.y-X*(Y.y-F.y)];break}var Dn=u.unproject(Mt(_t));return qt([Dn.lat+Rt.lat,Dn.lng+Rt.lng])}var R={__proto__:null,simplify:ze,pointToSegmentDistance:Oi,closestPointOnSegment:Ki,clipSegment:Ls,_getEdgeIntersection:En,_getBitCode:wi,_sqClosestPointOnSegment:ki,isFlat:h,_flat:v,polylineCenter:I},Q={project:function(r){return new Tt(r.lng,r.lat)},unproject:function(r){return new re(r.y,r.x)},bounds:new ie([-180,-90],[180,90])},et={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var u=Math.PI/180,f=this.R,_=r.lat*u,T=this.R_MINOR/f,A=Math.sqrt(1-T*T),F=A*Math.sin(_),Y=Math.tan(Math.PI/4-_/2)/Math.pow((1-F)/(1+F),A/2);return _=-f*Math.log(Math.max(Y,1e-10)),new Tt(r.lng*u*f,_)},unproject:function(r){for(var u=180/Math.PI,f=this.R,_=this.R_MINOR/f,T=Math.sqrt(1-_*_),A=Math.exp(-r.y/f),F=Math.PI/2-2*Math.atan(A),Y=0,X=.1,_t;Y<15&&Math.abs(X)>1e-7;Y++)_t=T*Math.sin(F),_t=Math.pow((1-_t)/(1+_t),T/2),X=Math.PI/2-2*Math.atan(A*_t)-F,F+=X;return new re(F*u,r.x*u/f)}},wt={__proto__:null,LonLat:Q,Mercator:et,SphericalMercator:Lt},Ve=s({},It,{code:"EPSG:3395",projection:et,transformation:function(){var r=.5/(Math.PI*et.R);return k(r,.5,-r,.5)}()}),vn=s({},It,{code:"EPSG:4326",projection:Q,transformation:k(1/180,1,-1/180,.5)}),Se=s({},it,{projection:Q,transformation:k(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,u){var f=u.lng-r.lng,_=u.lat-r.lat;return Math.sqrt(f*f+_*_)},infinite:!0});it.Earth=It,it.EPSG3395=Ve,it.EPSG3857=D,it.EPSG900913=j,it.EPSG4326=vn,it.Simple=Se;var de=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[m(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[m(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var u=r.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var u=m(r);return this._layers[u]?this:(this._layers[u]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var u=m(r);return this._layers[u]?(this._loaded&&r.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return m(r)in this._layers},eachLayer:function(r,u){for(var f in this._layers)r.call(u,this._layers[f]);return this},_addLayers:function(r){r=r?at(r)?r:[r]:[];for(var u=0,f=r.length;u<f;u++)this.addLayer(r[u])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[m(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var u=m(r);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,u=-1/0,f=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var T=this._zoomBoundLayers[_].options;r=T.minZoom===void 0?r:Math.min(r,T.minZoom),u=T.maxZoom===void 0?u:Math.max(u,T.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=r===1/0?void 0:r,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Je=de.extend({initialize:function(r,u){q(this,u),this._layers={};var f,_;if(r)for(f=0,_=r.length;f<_;f++)this.addLayer(r[f])},addLayer:function(r){var u=this.getLayerId(r);return this._layers[u]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var u=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(r){var u=typeof r=="number"?r:this.getLayerId(r);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var u=Array.prototype.slice.call(arguments,1),f,_;for(f in this._layers)_=this._layers[f],_[r]&&_[r].apply(_,u);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,u){for(var f in this._layers)r.call(u,this._layers[f]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return m(r)}}),Mi=function(r,u){return new Je(r,u)},ln=Je.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Je.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Je.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ye;for(var u in this._layers){var f=this._layers[u];r.extend(f.getBounds?f.getBounds():f.getLatLng())}return r}}),Os=function(r,u){return new ln(r,u)},fr=Ze.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){q(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,u){var f=this._getIconUrl(r);if(!f){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(_,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(r,u){var f=this.options,_=f[u+"Size"];typeof _=="number"&&(_=[_,_]);var T=Mt(_),A=Mt(u==="shadow"&&f.shadowAnchor||f.iconAnchor||T&&T.divideBy(2,!0));r.className="leaflet-marker-"+u+" "+(f.className||""),A&&(r.style.marginLeft=-A.x+"px",r.style.marginTop=-A.y+"px"),T&&(r.style.width=T.x+"px",r.style.height=T.y+"px")},_createImg:function(r,u){return u=u||document.createElement("img"),u.src=r,u},_getIconUrl:function(r){return Vt.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function bd(r){return new fr(r)}var ka=fr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof ka.imagePath!="string"&&(ka.imagePath=this._detectIconPath()),(this.options.imagePath||ka.imagePath)+fr.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var u=function(f,_,T){var A=_.exec(f);return A&&A[T]};return r=u(r,/^url\((['"])?(.+)\1\)$/,2),r&&u(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),u=Kr(r,"background-image")||Kr(r,"backgroundImage");if(document.body.removeChild(r),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),ih=Qe.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new ji(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var u=this._marker,f=u._map,_=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,A=ti(u._icon),F=f.getPixelBounds(),Y=f.getPixelOrigin(),X=ve(F.min._subtract(Y).add(T),F.max._subtract(Y).subtract(T));if(!X.contains(A)){var _t=Mt((Math.max(X.max.x,A.x)-X.max.x)/(F.max.x-X.max.x)-(Math.min(X.min.x,A.x)-X.min.x)/(F.min.x-X.min.x),(Math.max(X.max.y,A.y)-X.max.y)/(F.max.y-X.max.y)-(Math.min(X.min.y,A.y)-X.min.y)/(F.min.y-X.min.y)).multiplyBy(_);f.panBy(_t,{animate:!1}),this._draggable._newPos._add(_t),this._draggable._startPos._add(_t),Xt(u._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=W(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=W(this._adjustPan.bind(this,r)))},_onDrag:function(r){var u=this._marker,f=u._shadow,_=ti(u._icon),T=u._map.layerPointToLatLng(_);f&&Xt(f,_),u._latlng=T,r.latlng=T,r.oldLatLng=this._oldLatLng,u.fire("move",r).fire("drag",r)},_onDragEnd:function(r){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Ou=de.extend({options:{icon:new ka,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,u){q(this,u),this._latlng=qt(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var u=this._latlng;return this._latlng=qt(r),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=r.icon.createIcon(this._icon),_=!1;f!==this._icon&&(this._icon&&this._removeIcon(),_=!0,r.title&&(f.title=r.title),f.tagName==="IMG"&&(f.alt=r.alt||"")),se(f,u),r.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Gt(f,"focus",this._panOnFocus,this);var T=r.icon.createShadow(this._shadow),A=!1;T!==this._shadow&&(this._removeShadow(),A=!0),T&&(se(T,u),T.alt=""),this._shadow=T,r.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&A&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(this._icon,"focus",this._panOnFocus,this),Ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ue(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Xt(this._icon,r),this._shadow&&Xt(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var u=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ih)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ih(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&rn(this._icon,r),this._shadow&&rn(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var u=this.options.icon.options,f=u.iconSize?Mt(u.iconSize):Mt(0,0),_=u.iconAnchor?Mt(u.iconAnchor):Mt(0,0);r.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:f.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bo(r,u){return new Ou(r,u)}var Xr=de.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return q(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ku=Xr.extend({options:{fill:!0,radius:10},initialize:function(r,u){q(this,u),this._latlng=qt(r),this._radius=this.options.radius},setLatLng:function(r){var u=this._latlng;return this._latlng=qt(r),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var u=r&&r.radius||this._radius;return Xr.prototype.setStyle.call(this,r),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,u=this._radiusY||r,f=this._clickTolerance(),_=[r+f,u+f];this._pxBounds=new ie(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ol(r,u){return new ku(r,u)}var Mu=ku.extend({initialize:function(r,u,f){if(typeof u=="number"&&(u=s({},f,{radius:u})),q(this,u),this._latlng=qt(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ye(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Xr.prototype.setStyle,_project:function(){var r=this._latlng.lng,u=this._latlng.lat,f=this._map,_=f.options.crs;if(_.distance===It.distance){var T=Math.PI/180,A=this._mRadius/It.R/T,F=f.project([u+A,r]),Y=f.project([u-A,r]),X=F.add(Y).divideBy(2),_t=f.unproject(X).lat,Rt=Math.acos((Math.cos(A*T)-Math.sin(u*T)*Math.sin(_t*T))/(Math.cos(u*T)*Math.cos(_t*T)))/T;(isNaN(Rt)||Rt===0)&&(Rt=A/Math.cos(Math.PI/180*u)),this._point=X.subtract(f.getPixelOrigin()),this._radius=isNaN(Rt)?0:X.x-f.project([_t,r-Rt]).x,this._radiusY=X.y-F.y}else{var Ht=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Ht).x}this._updateBounds()}});function ts(r,u,f){return new Mu(r,u,f)}var Di=Xr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,u){q(this,u),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var u=1/0,f=null,_=ki,T,A,F=0,Y=this._parts.length;F<Y;F++)for(var X=this._parts[F],_t=1,Rt=X.length;_t<Rt;_t++){T=X[_t-1],A=X[_t];var Ht=_(r,T,A,!0);Ht<u&&(u=Ht,f=_(r,T,A))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return I(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,u){return u=u||this._defaultShape(),r=qt(r),u.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ye,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var u=[],f=h(r),_=0,T=r.length;_<T;_++)f?(u[_]=qt(r[_]),this._bounds.extend(u[_])):u[_]=this._convertLatLngs(r[_]);return u},_project:function(){var r=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),u=new Tt(r,r);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(r,u,f){var _=r[0]instanceof re,T=r.length,A,F;if(_){for(F=[],A=0;A<T;A++)F[A]=this._map.latLngToLayerPoint(r[A]),f.extend(F[A]);u.push(F)}else for(A=0;A<T;A++)this._projectLatlngs(r[A],u,f)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,_,T,A,F,Y,X;for(f=0,T=0,A=this._rings.length;f<A;f++)for(X=this._rings[f],_=0,F=X.length;_<F-1;_++)Y=Ls(X[_],X[_+1],r,_,!0),Y&&(u[T]=u[T]||[],u[T].push(Y[0]),(Y[1]!==X[_+1]||_===F-2)&&(u[T].push(Y[1]),T++))}},_simplifyPoints:function(){for(var r=this._parts,u=this.options.smoothFactor,f=0,_=r.length;f<_;f++)r[f]=ze(r[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,u){var f,_,T,A,F,Y,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(f=0,A=this._parts.length;f<A;f++)for(Y=this._parts[f],_=0,F=Y.length,T=F-1;_<F;T=_++)if(!(!u&&_===0)&&Oi(r,Y[T],Y[_])<=X)return!0;return!1}});function Ad(r,u){return new Di(r,u)}Di._flat=v;var Ao=Di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var u=Di.prototype._convertLatLngs.call(this,r),f=u.length;return f>=2&&u[0]instanceof re&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(r){Di.prototype._setLatLngs.call(this,r),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,u=this.options.weight,f=new Tt(u,u);if(r=new ie(r.min.subtract(f),r.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,T=this._rings.length,A;_<T;_++)A=xs(this._rings[_],r,!0),A.length&&this._parts.push(A)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var u=!1,f,_,T,A,F,Y,X,_t;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(A=0,X=this._parts.length;A<X;A++)for(f=this._parts[A],F=0,_t=f.length,Y=_t-1;F<_t;Y=F++)_=f[F],T=f[Y],_.y>r.y!=T.y>r.y&&r.x<(T.x-_.x)*(r.y-_.y)/(T.y-_.y)+_.x&&(u=!u);return u||Di.prototype._containsPoint.call(this,r,!0)}});function Pd(r,u){return new Ao(r,u)}var ni=ln.extend({initialize:function(r,u){q(this,u),this._layers={},r&&this.addData(r)},addData:function(r){var u=at(r)?r:r.features,f,_,T;if(u){for(f=0,_=u.length;f<_;f++)T=u[f],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var A=this.options;if(A.filter&&!A.filter(r))return this;var F=ii(r,A);return F?(F.feature=Lr(r),F.defaultOptions=F.options,this.resetStyle(F),A.onEachFeature&&A.onEachFeature(r,F),this.addLayer(F)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(u){this._setLayerStyle(u,r)},this)},_setLayerStyle:function(r,u){r.setStyle&&(typeof u=="function"&&(u=u(r.feature)),r.setStyle(u))}});function ii(r,u){var f=r.type==="Feature"?r.geometry:r,_=f?f.coordinates:null,T=[],A=u&&u.pointToLayer,F=u&&u.coordsToLatLng||Ml,Y,X,_t,Rt;if(!_&&!f)return null;switch(f.type){case"Point":return Y=F(_),kl(A,r,Y,u);case"MultiPoint":for(_t=0,Rt=_.length;_t<Rt;_t++)Y=F(_[_t]),T.push(kl(A,r,Y,u));return new ln(T);case"LineString":case"MultiLineString":return X=Du(_,f.type==="LineString"?0:1,F),new Di(X,u);case"Polygon":case"MultiPolygon":return X=Du(_,f.type==="Polygon"?1:2,F),new Ao(X,u);case"GeometryCollection":for(_t=0,Rt=f.geometries.length;_t<Rt;_t++){var Ht=ii({geometry:f.geometries[_t],type:"Feature",properties:r.properties},u);Ht&&T.push(Ht)}return new ln(T);case"FeatureCollection":for(_t=0,Rt=f.features.length;_t<Rt;_t++){var pe=ii(f.features[_t],u);pe&&T.push(pe)}return new ln(T);default:throw new Error("Invalid GeoJSON object.")}}function kl(r,u,f,_){return r?r(u,f):new Ou(f,_&&_.markersInheritOptions&&_)}function Ml(r){return new re(r[1],r[0],r[2])}function Du(r,u,f){for(var _=[],T=0,A=r.length,F;T<A;T++)F=u?Du(r[T],u-1,f):(f||Ml)(r[T]),_.push(F);return _}function Dl(r,u){return r=qt(r),r.alt!==void 0?[S(r.lng,u),S(r.lat,u),S(r.alt,u)]:[S(r.lng,u),S(r.lat,u)]}function Nu(r,u,f,_){for(var T=[],A=0,F=r.length;A<F;A++)T.push(u?Nu(r[A],h(r[A])?0:u-1,f,_):Dl(r[A],_));return!u&&f&&T.length>0&&T.push(T[0].slice()),T}function Po(r,u){return r.feature?s({},r.feature,{geometry:u}):Lr(u)}function Lr(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var $={toGeoJSON:function(r){return Po(this,{type:"Point",coordinates:Dl(this.getLatLng(),r)})}};Ou.include($),Mu.include($),ku.include($),Di.include({toGeoJSON:function(r){var u=!h(this._latlngs),f=Nu(this._latlngs,u?1:0,!1,r);return Po(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),Ao.include({toGeoJSON:function(r){var u=!h(this._latlngs),f=u&&!h(this._latlngs[0]),_=Nu(this._latlngs,f?2:u?1:0,!0,r);return u||(_=[_]),Po(this,{type:(f?"Multi":"")+"Polygon",coordinates:_})}}),Je.include({toMultiPoint:function(r){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(r).geometry.coordinates)}),Po(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(r){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(r);var f=u==="GeometryCollection",_=[];return this.eachLayer(function(T){if(T.toGeoJSON){var A=T.toGeoJSON(r);if(f)_.push(A.geometry);else{var F=Lr(A);F.type==="FeatureCollection"?_.push.apply(_,F.features):_.push(F)}}}),f?Po(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function rt(r,u){return new ni(r,u)}var tt=rt,Ct=de.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,u,f){this._url=r,this._bounds=Fe(u),q(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&ur(this._image),this},bringToBack:function(){return this._map&&lr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Fe(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",u=this._image=r?this._url:Pe("img");if(se(u,"leaflet-image-layer"),this._zoomAnimated&&se(u,"leaflet-zoom-animated"),this.options.className&&se(u,this.options.className),u.onselectstart=E,u.onmousemove=E,u.onload=c(this.fire,this,"load"),u.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(r){var u=this._map.getZoomScale(r.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;cr(this._image,f,u)},_reset:function(){var r=this._image,u=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();Xt(r,u.min),r.style.width=f.x+"px",r.style.height=f.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),oe=function(r,u,f){return new Ct(r,u,f)},De=Ct.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",u=this._image=r?this._url:Pe("video");if(se(u,"leaflet-image-layer"),this._zoomAnimated&&se(u,"leaflet-zoom-animated"),this.options.className&&se(u,this.options.className),u.onselectstart=E,u.onmousemove=E,u.onloadeddata=c(this.fire,this,"load"),r){for(var f=u.getElementsByTagName("source"),_=[],T=0;T<f.length;T++)_.push(f[T].src);this._url=f.length>0?_:[u.src];return}at(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var A=0;A<this._url.length;A++){var F=Pe("source");F.src=this._url[A],u.appendChild(F)}}});function In(r,u,f){return new De(r,u,f)}var He=Ct.extend({_initImage:function(){var r=this._image=this._url;se(r,"leaflet-image-layer"),this._zoomAnimated&&se(r,"leaflet-zoom-animated"),this.options.className&&se(r,this.options.className),r.onselectstart=E,r.onmousemove=E}});function Nl(r,u,f){return new He(r,u,f)}var dr=de.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,u){r&&(r instanceof re||at(r))?(this._latlng=qt(r),q(this,u)):(q(this,r),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(c(Ue,void 0,this._container),200)):Ue(this._container),this.options.interactive&&(Ge(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=qt(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ur(this._container),this},bringToBack:function(){return this._map&&lr(this._container),this},_prepareOpen:function(r){var u=this._source;if(!u._map)return!1;if(u instanceof ln){u=null;var f=this._source._layers;for(var _ in f)if(f[_]._map){u=f[_];break}if(!u)return!1;this._source=u}if(!r)if(u.getCenter)r=u.getCenter();else if(u.getLatLng)r=u.getLatLng();else if(u.getBounds)r=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")r.innerHTML=u;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),u=Mt(this.options.offset),f=this._getAnchor();this._zoomAnimated?Xt(this._container,r.add(f)):u=u.add(r).add(f);var _=this._containerBottom=-u.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=_+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(r,u,f,_){var T=u;return T instanceof r||(T=new r(_).setContent(u)),f&&T.setLatLng(f),T}}),de.include({_initOverlay:function(r,u,f,_){var T=f;return T instanceof r?(q(T,_),T._source=this):(T=u&&!_?u:new r(_,this),T.setContent(f)),T}});var Kn=dr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,dr.prototype.openOn.call(this,r)},onAdd:function(r){dr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xr||this._source.on("preclick",Li))},onRemove:function(r){dr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xr||this._source.off("preclick",Li))},getEvents:function(){var r=dr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",u=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Pe("div",r+"-content-wrapper",u);if(this._contentNode=Pe("div",r+"-content",f),Qr(u),Zr(this._contentNode),Gt(u,"contextmenu",Li),this._tipContainer=Pe("div",r+"-tip-container",u),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Pe("a",r+"-close-button",u);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Gt(_,"click",function(T){te(T),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,u=r.style;u.width="",u.whiteSpace="nowrap";var f=r.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var _=r.offsetHeight,T=this.options.maxHeight,A="leaflet-popup-scrolled";T&&_>T?(u.height=T+"px",se(r,A)):Ge(r,A),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var u=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),f=this._getAnchor();Xt(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,u=parseInt(Kr(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,_=this._containerWidth,T=new Tt(this._containerLeft,-f-this._containerBottom);T._add(ti(this._container));var A=r.layerPointToContainerPoint(T),F=Mt(this.options.autoPanPadding),Y=Mt(this.options.autoPanPaddingTopLeft||F),X=Mt(this.options.autoPanPaddingBottomRight||F),_t=r.getSize(),Rt=0,Ht=0;A.x+_+X.x>_t.x&&(Rt=A.x+_-_t.x+X.x),A.x-Rt-Y.x<0&&(Rt=A.x-Y.x),A.y+f+X.y>_t.y&&(Ht=A.y+f-_t.y+X.y),A.y-Ht-Y.y<0&&(Ht=A.y-Y.y),(Rt||Ht)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([Rt,Ht]))}},_getAnchor:function(){return Mt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Vu=function(r,u){return new Kn(r,u)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(r,u,f){return this._initOverlay(Kn,r,u,f).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),de.include({bindPopup:function(r,u){return this._popup=this._initOverlay(Kn,this._popup,r,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof ln||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){we(r);var u=r.layer||r.target;if(this._popup._source===u&&!(u instanceof Xr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=u,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Fu=dr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){dr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){dr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=dr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",u=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var u,f,_=this._map,T=this._container,A=_.latLngToContainerPoint(_.getCenter()),F=_.layerPointToContainerPoint(r),Y=this.options.direction,X=T.offsetWidth,_t=T.offsetHeight,Rt=Mt(this.options.offset),Ht=this._getAnchor();Y==="top"?(u=X/2,f=_t):Y==="bottom"?(u=X/2,f=0):Y==="center"?(u=X/2,f=_t/2):Y==="right"?(u=0,f=_t/2):Y==="left"?(u=X,f=_t/2):F.x<A.x?(Y="right",u=0,f=_t/2):(Y="left",u=X+(Rt.x+Ht.x)*2,f=_t/2),r=r.subtract(Mt(u,f,!0)).add(Rt).add(Ht),Ge(T,"leaflet-tooltip-right"),Ge(T,"leaflet-tooltip-left"),Ge(T,"leaflet-tooltip-top"),Ge(T,"leaflet-tooltip-bottom"),se(T,"leaflet-tooltip-"+Y),Xt(T,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&rn(this._container,r)},_animateZoom:function(r){var u=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(u)},_getAnchor:function(){return Mt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),So=function(r,u){return new Fu(r,u)};Ee.include({openTooltip:function(r,u,f){return this._initOverlay(Fu,r,u,f).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),de.include({bindTooltip:function(r,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fu,this._tooltip,r,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var u=r?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof ln||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var u=typeof r.getElement=="function"&&r.getElement();u&&(Gt(u,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Gt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var u=typeof r.getElement=="function"&&r.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var u=r.latlng,f,_;this._tooltip.options.sticky&&r.originalEvent&&(f=this._map.mouseEventToContainerPoint(r.originalEvent),_=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(u)}});var Ma=fr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var u=r&&r.tagName==="DIV"?r:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Gr(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var _=Mt(f.bgPos);u.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function Uu(r){return new Ma(r)}fr.Default=ka;var Oe=de.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Vt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){q(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ue(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ur(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(lr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof Tt?r:new Tt(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var u=this.getPane().children,f=-r(-1/0,1/0),_=0,T=u.length,A;_<T;_++)A=u[_].style.zIndex,u[_]!==this._container&&A&&(f=r(f,+A));isFinite(f)&&(this.options.zIndex=f+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Vt.ielt9){rn(this._container,this.options.opacity);var r=+new Date,u=!1,f=!1;for(var _ in this._tiles){var T=this._tiles[_];if(!(!T.current||!T.loaded)){var A=Math.min(1,(r-T.loaded)/200);rn(T.el,A),A<1?u=!0:(T.active?f=!0:this._onOpaqueTile(T),T.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&(G(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,u=this.options.maxZoom;if(r!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===r?(this._levels[f].el.style.zIndex=u-Math.abs(r-f),this._onUpdateLevel(f)):(Ue(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var _=this._levels[r],T=this._map;return _||(_=this._levels[r]={},_.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=u,_.origin=T.project(T.unproject(T.getPixelOrigin()),r).round(),_.zoom=r,this._setZoomTransform(_,T.getCenter(),T.getZoom()),E(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var r,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)u=this._tiles[r],u.retain=u.current;for(r in this._tiles)if(u=this._tiles[r],u.current&&!u.active){var _=u.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var u in this._tiles)this._tiles[u].coords.z===r&&this._removeTile(u)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ue(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,u,f,_){var T=Math.floor(r/2),A=Math.floor(u/2),F=f-1,Y=new Tt(+T,+A);Y.z=+F;var X=this._tileCoordsToKey(Y),_t=this._tiles[X];return _t&&_t.active?(_t.retain=!0,!0):(_t&&_t.loaded&&(_t.retain=!0),F>_?this._retainParent(T,A,F,_):!1)},_retainChildren:function(r,u,f,_){for(var T=2*r;T<2*r+2;T++)for(var A=2*u;A<2*u+2;A++){var F=new Tt(T,A);F.z=f+1;var Y=this._tileCoordsToKey(F),X=this._tiles[Y];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);f+1<_&&this._retainChildren(T,A,f+1,_)}},_resetView:function(r){var u=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var u=this.options;return u.minNativeZoom!==void 0&&r<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<r?u.maxNativeZoom:r},_setView:function(r,u,f,_){var T=Math.round(u);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var A=this.options.updateWhenZooming&&T!==this._tileZoom;(!_||A)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(r),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(r,u)},_setZoomTransforms:function(r,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],r,u)},_setZoomTransform:function(r,u,f){var _=this._map.getZoomScale(f,r.zoom),T=r.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(u,f)).round();Vt.any3d?cr(r.el,T,_):Xt(r.el,T)},_resetGrid:function(){var r=this._map,u=r.options.crs,f=this._tileSize=this.getTileSize(),_=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,u.wrapLng[0]],_).x/f.x),Math.ceil(r.project([0,u.wrapLng[1]],_).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([u.wrapLat[0],0],_).y/f.x),Math.ceil(r.project([u.wrapLat[1],0],_).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),_=u.getZoomScale(f,this._tileZoom),T=u.project(r,this._tileZoom).floor(),A=u.getSize().divideBy(_*2);return new ie(T.subtract(A),T.add(A))},_update:function(r){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(r===void 0&&(r=u.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(r),T=this._pxBoundsToTileRange(_),A=T.getCenter(),F=[],Y=this.options.keepBuffer,X=new ie(T.getBottomLeft().subtract([Y,-Y]),T.getTopRight().add([Y,-Y]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _t in this._tiles){var Rt=this._tiles[_t].coords;(Rt.z!==this._tileZoom||!X.contains(new Tt(Rt.x,Rt.y)))&&(this._tiles[_t].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(r,f);return}for(var Ht=T.min.y;Ht<=T.max.y;Ht++)for(var pe=T.min.x;pe<=T.max.x;pe++){var yn=new Tt(pe,Ht);if(yn.z=this._tileZoom,!!this._isValidTile(yn)){var cn=this._tiles[this._tileCoordsToKey(yn)];cn?cn.current=!0:F.push(yn)}}if(F.sort(function(Dn,Gi){return Dn.distanceTo(A)-Gi.distanceTo(A)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var qn=document.createDocumentFragment();for(pe=0;pe<F.length;pe++)this._addTile(F[pe],qn);this._level.el.appendChild(qn)}}}},_isValidTile:function(r){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(r.x<f.min.x||r.x>f.max.x)||!u.wrapLat&&(r.y<f.min.y||r.y>f.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(r);return Fe(this.options.bounds).overlaps(_)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var u=this._map,f=this.getTileSize(),_=r.scaleBy(f),T=_.add(f),A=u.unproject(_,r.z),F=u.unproject(T,r.z);return[A,F]},_tileCoordsToBounds:function(r){var u=this._tileCoordsToNwSe(r),f=new ye(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var u=r.split(":"),f=new Tt(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(r){var u=this._tiles[r];u&&(Ue(u.el),delete this._tiles[r],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){se(r,"leaflet-tile");var u=this.getTileSize();r.style.width=u.x+"px",r.style.height=u.y+"px",r.onselectstart=E,r.onmousemove=E,Vt.ielt9&&this.options.opacity<1&&rn(r,this.options.opacity)},_addTile:function(r,u){var f=this._getTilePos(r),_=this._tileCoordsToKey(r),T=this.createTile(this._wrapCoords(r),c(this._tileReady,this,r));this._initTile(T),this.createTile.length<2&&W(c(this._tileReady,this,r,null,T)),Xt(T,f),this._tiles[_]={el:T,coords:r,current:!0},u.appendChild(T),this.fire("tileloadstart",{tile:T,coords:r})},_tileReady:function(r,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:r});var _=this._tileCoordsToKey(r);f=this._tiles[_],f&&(f.loaded=+new Date,this._map._fadeAnimated?(rn(f.el,0),G(this._fadeFrame),this._fadeFrame=W(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(se(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Vt.ielt9||!this._map._fadeAnimated?W(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var u=new Tt(this._wrapX?w(r.x,this._wrapX):r.x,this._wrapY?w(r.y,this._wrapY):r.y);return u.z=r.z,u},_pxBoundsToTileRange:function(r){var u=this.getTileSize();return new ie(r.min.unscaleBy(u).floor(),r.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Sd(r){return new Oe(r)}var ks=Oe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,u){this._url=r,u=q(this,u),u.detectRetina&&Vt.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,u){return this._url===r&&u===void 0&&(u=!0),this._url=r,u||this.redraw(),this},createTile:function(r,u){var f=document.createElement("img");return Gt(f,"load",c(this._tileOnLoad,this,u,f)),Gt(f,"error",c(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(r),f},getTileUrl:function(r){var u={r:Vt.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-r.y;this.options.tms&&(u.y=f),u["-y"]=f}return lt(this._url,s(u,this.options))},_tileOnLoad:function(r,u){Vt.ielt9?setTimeout(c(r,this,null,u),0):r(null,u)},_tileOnError:function(r,u,f){var _=this.options.errorTileUrl;_&&u.getAttribute("src")!==_&&(u.src=_),r(f,u)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,_=this.options.zoomOffset;return f&&(r=u-r),r+_},_getSubdomain:function(r){var u=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var r,u;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(u=this._tiles[r].el,u.onload=E,u.onerror=E,!u.complete)){u.src=xt;var f=this._tiles[r].coords;Ue(u),delete this._tiles[r],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(r){var u=this._tiles[r];if(u)return u.el.setAttribute("src",xt),Oe.prototype._removeTile.call(this,r)},_tileReady:function(r,u,f){if(!(!this._map||f&&f.getAttribute("src")===xt))return Oe.prototype._tileReady.call(this,r,u,f)}});function Da(r,u){return new ks(r,u)}var rh=ks.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,u){this._url=r;var f=s({},this.defaultWmsParams);for(var _ in u)_ in this.options||(f[_]=u[_]);u=q(this,u);var T=u.detectRetina&&Vt.retina?2:1,A=this.getTileSize();f.width=A.x*T,f.height=A.y*T,this.wmsParams=f},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,ks.prototype.onAdd.call(this,r)},getTileUrl:function(r){var u=this._tileCoordsToNwSe(r),f=this._crs,_=ve(f.project(u[0]),f.project(u[1])),T=_.min,A=_.max,F=(this._wmsVersion>=1.3&&this._crs===vn?[T.y,T.x,A.y,A.x]:[T.x,T.y,A.x,A.y]).join(","),Y=ks.prototype.getTileUrl.call(this,r);return Y+K(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(r,u){return s(this.wmsParams,r),u||this.redraw(),this}});function Rd(r,u){return new rh(r,u)}ks.WMS=rh,Da.wms=Rd;var Or=de.extend({options:{padding:.1},initialize:function(r){q(this,r),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,u){var f=this._map.getZoomScale(u,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,u),A=_.multiplyBy(-f).add(T).subtract(this._map._getNewPixelOrigin(r,u));Vt.any3d?cr(this._container,A,f):Xt(this._container,A)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-r)).round();this._bounds=new ie(f,f.add(u.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Na=Or.extend({options:{tolerance:0},getEvents:function(){var r=Or.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Or.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Gt(r,"mousemove",this._onMouseMove,this),Gt(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Gt(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,Ue(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var u in this._layers)r=this._layers[u],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Or.prototype._update.call(this);var r=this._bounds,u=this._container,f=r.getSize(),_=Vt.retina?2:1;Xt(u,r.min),u.width=_*f.x,u.height=_*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",Vt.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Or.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[m(r)]=r;var u=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var u=r._order,f=u.next,_=u.prev;f?f.prev=_:this._drawLast=_,_?_.next=f:this._drawFirst=f,delete r._order,delete this._layers[m(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var u=r.options.dashArray.split(/[, ]+/),f=[],_,T;for(T=0;T<u.length;T++){if(_=Number(u[T]),isNaN(_))return;f.push(_)}r.options._dashArray=f}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||W(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var u=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(r._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(r._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var u=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)r=_.layer,(!u||r._pxBounds&&r._pxBounds.intersects(u))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,u){if(this._drawing){var f,_,T,A,F=r._parts,Y=F.length,X=this._ctx;if(Y){for(X.beginPath(),f=0;f<Y;f++){for(_=0,T=F[f].length;_<T;_++)A=F[f][_],X[_?"lineTo":"moveTo"](A.x,A.y);u&&X.closePath()}this._fillStroke(X,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var u=r._point,f=this._ctx,_=Math.max(Math.round(r._radius),1),T=(Math.max(Math.round(r._radiusY),1)||_)/_;T!==1&&(f.save(),f.scale(1,T)),f.beginPath(),f.arc(u.x,u.y/T,_,0,Math.PI*2,!1),T!==1&&f.restore(),this._fillStroke(f,r)}},_fillStroke:function(r,u){var f=u.options;f.fill&&(r.globalAlpha=f.fillOpacity,r.fillStyle=f.fillColor||f.color,r.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(r.setLineDash&&r.setLineDash(u.options&&u.options._dashArray||[]),r.globalAlpha=f.opacity,r.lineWidth=f.weight,r.strokeStyle=f.color,r.lineCap=f.lineCap,r.lineJoin=f.lineJoin,r.stroke())},_onClick:function(r){for(var u=this._map.mouseEventToLayerPoint(r),f,_,T=this._drawFirst;T;T=T.next)f=T.layer,f.options.interactive&&f._containsPoint(u)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(f))&&(_=f);this._fireEvent(_?[_]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,u)}},_handleMouseOut:function(r){var u=this._hoveredLayer;u&&(Ge(this._container,"leaflet-interactive"),this._fireEvent([u],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,u){if(!this._mouseHoverThrottled){for(var f,_,T=this._drawFirst;T;T=T.next)f=T.layer,f.options.interactive&&f._containsPoint(u)&&(_=f);_!==this._hoveredLayer&&(this._handleMouseOut(r),_&&(se(this._container,"leaflet-interactive"),this._fireEvent([_],r,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,u,f){this._map._fireDOMEvent(u,f||u.type,r)},_bringToFront:function(r){var u=r._order;if(u){var f=u.next,_=u.prev;if(f)f.prev=_;else return;_?_.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(r)}},_bringToBack:function(r){var u=r._order;if(u){var f=u.next,_=u.prev;if(_)_.next=f;else return;f?f.prev=_:_&&(this._drawLast=_),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(r)}}});function kr(r){return Vt.canvas?new Na(r):null}var es=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),sh={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Or.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var u=r._container=es("shape");se(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",r._path=es("path"),u.appendChild(r._path),this._updateStyle(r),this._layers[m(r)]=r},_addPath:function(r){var u=r._container;this._container.appendChild(u),r.options.interactive&&r.addInteractiveTarget(u)},_removePath:function(r){var u=r._container;Ue(u),r.removeInteractiveTarget(u),delete this._layers[m(r)]},_updateStyle:function(r){var u=r._stroke,f=r._fill,_=r.options,T=r._container;T.stroked=!!_.stroke,T.filled=!!_.fill,_.stroke?(u||(u=r._stroke=es("stroke")),T.appendChild(u),u.weight=_.weight+"px",u.color=_.color,u.opacity=_.opacity,_.dashArray?u.dashStyle=at(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=_.lineCap.replace("butt","flat"),u.joinstyle=_.lineJoin):u&&(T.removeChild(u),r._stroke=null),_.fill?(f||(f=r._fill=es("fill")),T.appendChild(f),f.color=_.fillColor||_.color,f.opacity=_.fillOpacity):f&&(T.removeChild(f),r._fill=null)},_updateCircle:function(r){var u=r._point.round(),f=Math.round(r._radius),_=Math.round(r._radiusY||f);this._setPath(r,r._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+_+" 0,"+65535*360)},_setPath:function(r,u){r._path.v=u},_bringToFront:function(r){ur(r._container)},_bringToBack:function(r){lr(r._container)}},Ms=Vt.vml?es:st,Ro=Or.extend({_initContainer:function(){this._container=Ms("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ms("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ue(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Or.prototype._update.call(this);var r=this._bounds,u=r.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),Xt(f,r.min),f.setAttribute("viewBox",[r.min.x,r.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(r){var u=r._path=Ms("path");r.options.className&&se(u,r.options.className),r.options.interactive&&se(u,"leaflet-interactive"),this._updateStyle(r),this._layers[m(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ue(r._path),r.removeInteractiveTarget(r._path),delete this._layers[m(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var u=r._path,f=r.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(r,u){this._setPath(r,ft(r._parts,u))},_updateCircle:function(r){var u=r._point,f=Math.max(Math.round(r._radius),1),_=Math.max(Math.round(r._radiusY),1)||f,T="a"+f+","+_+" 0 1,0 ",A=r._empty()?"M0 0":"M"+(u.x-f)+","+u.y+T+f*2+",0 "+T+-f*2+",0 ";this._setPath(r,A)},_setPath:function(r,u){r._path.setAttribute("d",u)},_bringToFront:function(r){ur(r._path)},_bringToBack:function(r){lr(r._path)}});Vt.vml&&Ro.include(sh);function Vl(r){return Vt.svg||Vt.vml?new Ro(r):null}Ee.include({getRenderer:function(r){var u=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var u=this._paneRenderers[r];return u===void 0&&(u=this._createRenderer({pane:r}),this._paneRenderers[r]=u),u},_createRenderer:function(r){return this.options.preferCanvas&&kr(r)||Vl(r)}});var Va=Ao.extend({initialize:function(r,u){Ao.prototype.initialize.call(this,this._boundsToLatLngs(r),u)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Fe(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function oh(r,u){return new Va(r,u)}Ro.create=Ms,Ro.pointsToPath=ft,ni.geometryToLayer=ii,ni.coordsToLatLng=Ml,ni.coordsToLatLngs=Du,ni.latLngToCoords=Dl,ni.latLngsToCoords=Nu,ni.getFeature=Po,ni.asFeature=Lr,Ee.mergeOptions({boxZoom:!0});var Co=Qe.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),gi(),Ea(),this._startPoint=this._map.mouseEventToContainerPoint(r),Gt(document,{contextmenu:we,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var u=new ie(this._point,this._startPoint),f=u.getSize();Xt(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Ue(this._box),Ge(this._container,"leaflet-crosshair")),zn(),vo(),Be(document,{contextmenu:we,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var u=new ye(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",Co),Ee.mergeOptions({doubleClickZoom:!0});var ns=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var u=this._map,f=u.getZoom(),_=u.options.zoomDelta,T=r.originalEvent.shiftKey?f-_:f+_;u.options.doubleClickZoom==="center"?u.setZoom(T):u.setZoomAround(r.containerPoint,T)}});Ee.addInitHook("addHandler","doubleClickZoom",ns),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fa=Qe.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new ji(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ge(this._map._container,"leaflet-grab"),Ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Fe(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,u){return r-(r-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;r.x<u.min.x&&(r.x=this._viscousLimit(r.x,u.min.x)),r.y<u.min.y&&(r.y=this._viscousLimit(r.y,u.min.y)),r.x>u.max.x&&(r.x=this._viscousLimit(r.x,u.max.x)),r.y>u.max.y&&(r.y=this._viscousLimit(r.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,u=Math.round(r/2),f=this._initialWorldOffset,_=this._draggable._newPos.x,T=(_-u+f)%r+u-f,A=(_+u+f)%r-u-f,F=Math.abs(T+f)<Math.abs(A+f)?T:A;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(r){var u=this._map,f=u.options,_=!f.inertia||r.noInertia||this._times.length<2;if(u.fire("dragend",r),_)u.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),A=(this._lastTime-this._times[0])/1e3,F=f.easeLinearity,Y=T.multiplyBy(F/A),X=Y.distanceTo([0,0]),_t=Math.min(f.inertiaMaxSpeed,X),Rt=Y.multiplyBy(_t/X),Ht=_t/(f.inertiaDeceleration*F),pe=Rt.multiplyBy(-Ht/2).round();!pe.x&&!pe.y?u.fire("moveend"):(pe=u._limitOffset(pe,u.options.maxBounds),W(function(){u.panBy(pe,{duration:Ht,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",Fa),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ah=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Gt(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,u=document.documentElement,f=r.scrollTop||u.scrollTop,_=r.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(_,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var u=this._panKeys={},f=this.keyCodes,_,T;for(_=0,T=f.left.length;_<T;_++)u[f.left[_]]=[-1*r,0];for(_=0,T=f.right.length;_<T;_++)u[f.right[_]]=[r,0];for(_=0,T=f.down.length;_<T;_++)u[f.down[_]]=[0,r];for(_=0,T=f.up.length;_<T;_++)u[f.up[_]]=[0,-1*r]},_setZoomDelta:function(r){var u=this._zoomKeys={},f=this.keyCodes,_,T;for(_=0,T=f.zoomIn.length;_<T;_++)u[f.zoomIn[_]]=r;for(_=0,T=f.zoomOut.length;_<T;_++)u[f.zoomOut[_]]=-r},_addHooks:function(){Gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var u=r.keyCode,f=this._map,_;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(_=this._panKeys[u],r.shiftKey&&(_=Mt(_).multiplyBy(3)),f.options.maxBounds&&(_=f._limitOffset(Mt(_),f.options.maxBounds)),f.options.worldCopyJump){var T=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(_)));f.panTo(T)}else f.panBy(_)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;we(r)}}});Ee.addInitHook("addHandler","keyboard",ah),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var uh=Qe.extend({addHooks:function(){Gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var u=Su(r),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var _=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),_),we(r)},_performZoom:function(){var r=this._map,u=r.getZoom(),f=this._map.options.zoomSnap||0;r._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,A=f?Math.ceil(T/f)*f:T,F=r._limitZoom(u+(this._delta>0?A:-A))-u;this._delta=0,this._startTime=null,F&&(r.options.scrollWheelZoom==="center"?r.setZoom(u+F):r.setZoomAround(this._lastMousePos,u+F))}});Ee.addInitHook("addHandler","scrollWheelZoom",uh);var Cd=600;Ee.mergeOptions({tapHold:Vt.touchNative&&Vt.safari&&Vt.mobile,tapTolerance:15});var Ua=Qe.extend({addHooks:function(){Gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var u=r.touches[0];this._startPos=this._newPos=new Tt(u.clientX,u.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(Gt(document,"touchend",te),Gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Cd),Gt(document,"touchend touchcancel contextmenu",this._cancel,this),Gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Be(document,"touchend",te),Be(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)},_onMove:function(r){var u=r.touches[0];this._newPos=new Tt(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,u){var f=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});Ee.addInitHook("addHandler","tapHold",Ua),Ee.mergeOptions({touchZoom:Vt.touch,bounceAtZoomLimits:!0});var Ba=Qe.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ge(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var u=this._map;if(!(!r.touches||r.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(r.touches[0]),_=u.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(_)._divideBy(2))),this._startDist=f.distanceTo(_),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Gt(document,"touchmove",this._onTouchMove,this),Gt(document,"touchend touchcancel",this._onTouchEnd,this),te(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(r.touches[0]),_=u.mouseEventToContainerPoint(r.touches[1]),T=f.distanceTo(_)/this._startDist;if(this._zoom=u.getScaleZoom(T,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&T<1||this._zoom>u.getMaxZoom()&&T>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var A=f._add(_)._divideBy(2)._subtract(this._centerPoint);if(T===1&&A.x===0&&A.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(A),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var F=c(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=W(F,this,!0),te(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",Ba),Ee.BoxZoom=Co,Ee.DoubleClickZoom=ns,Ee.Drag=Fa,Ee.Keyboard=ah,Ee.ScrollWheelZoom=uh,Ee.TapHold=Ua,Ee.TouchZoom=Ba,e.Bounds=ie,e.Browser=Vt,e.CRS=it,e.Canvas=Na,e.Circle=Mu,e.CircleMarker=ku,e.Class=Ze,e.Control=Hn,e.DivIcon=Ma,e.DivOverlay=dr,e.DomEvent=Ru,e.DomUtil=ba,e.Draggable=ji,e.Evented=ae,e.FeatureGroup=ln,e.GeoJSON=ni,e.GridLayer=Oe,e.Handler=Qe,e.Icon=fr,e.ImageOverlay=Ct,e.LatLng=re,e.LatLngBounds=ye,e.Layer=de,e.LayerGroup=Je,e.LineUtil=R,e.Map=Ee,e.Marker=Ou,e.Mixin=Cs,e.Path=Xr,e.Point=Tt,e.PolyUtil=Jr,e.Polygon=Ao,e.Polyline=Di,e.Popup=Kn,e.PosAnimation=Eo,e.Projection=wt,e.Rectangle=Va,e.Renderer=Or,e.SVG=Ro,e.SVGOverlay=He,e.TileLayer=ks,e.Tooltip=Fu,e.Transformation=_e,e.Util=V,e.VideoOverlay=De,e.bind=c,e.bounds=ve,e.canvas=kr,e.circle=ts,e.circleMarker=Ol,e.control=hn,e.divIcon=Uu,e.extend=s,e.featureGroup=Os,e.geoJSON=rt,e.geoJson=tt,e.gridLayer=Sd,e.icon=bd,e.imageOverlay=oe,e.latLng=qt,e.latLngBounds=Fe,e.layerGroup=Mi,e.map=un,e.marker=bo,e.point=Mt,e.polygon=Pd,e.polyline=Ad,e.popup=Vu,e.rectangle=oh,e.setOptions=q,e.stamp=m,e.svg=Vl,e.svgOverlay=Nl,e.tileLayer=Da,e.tooltip=So,e.transformation=k,e.version=i,e.videoOverlay=In;var Fl=window.L;e.noConflict=function(){return window.L=Fl,this},window.L=e})}(sc,sc.exports)),sc.exports}var cB=lB();const Hh=aB(cB);function Pb(n,t){return function(){return n.apply(t,arguments)}}const{toString:hB}=Object.prototype,{getPrototypeOf:og}=Object,vd=(n=>t=>{const e=hB.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),qr=n=>(n=n.toLowerCase(),t=>vd(t)===n),yd=n=>t=>typeof t===n,{isArray:xl}=Array,Uc=yd("undefined");function fB(n){return n!==null&&!Uc(n)&&n.constructor!==null&&!Uc(n.constructor)&&sr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Sb=qr("ArrayBuffer");function dB(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&Sb(n.buffer),t}const pB=yd("string"),sr=yd("function"),Rb=yd("number"),wd=n=>n!==null&&typeof n=="object",mB=n=>n===!0||n===!1,sf=n=>{if(vd(n)!=="object")return!1;const t=og(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_B=qr("Date"),gB=qr("File"),vB=qr("Blob"),yB=qr("FileList"),wB=n=>wd(n)&&sr(n.pipe),TB=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||sr(n.append)&&((t=vd(n))==="formdata"||t==="object"&&sr(n.toString)&&n.toString()==="[object FormData]"))},EB=qr("URLSearchParams"),[IB,bB,AB,PB]=["ReadableStream","Request","Response","Headers"].map(qr),SB=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function eh(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),xl(n))for(i=0,s=n.length;i<s;i++)t.call(null,n[i],i,n);else{const a=e?Object.getOwnPropertyNames(n):Object.keys(n),c=a.length;let d;for(i=0;i<c;i++)d=a[i],t.call(null,n[d],d,n)}}function Cb(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,s;for(;i-- >0;)if(s=e[i],t===s.toLowerCase())return s;return null}const nu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xb=n=>!Uc(n)&&n!==nu;function Um(){const{caseless:n}=xb(this)&&this||{},t={},e=(i,s)=>{const a=n&&Cb(t,s)||s;sf(t[a])&&sf(i)?t[a]=Um(t[a],i):sf(i)?t[a]=Um({},i):xl(i)?t[a]=i.slice():t[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&eh(arguments[i],e);return t}const RB=(n,t,e,{allOwnKeys:i}={})=>(eh(t,(s,a)=>{e&&sr(s)?n[a]=Pb(s,e):n[a]=s},{allOwnKeys:i}),n),CB=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),xB=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},LB=(n,t,e,i)=>{let s,a,c;const d={};if(t=t||{},n==null)return t;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)c=s[a],(!i||i(c,n,t))&&!d[c]&&(t[c]=n[c],d[c]=!0);n=e!==!1&&og(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},OB=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},kB=n=>{if(!n)return null;if(xl(n))return n;let t=n.length;if(!Rb(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},MB=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&og(Uint8Array)),DB=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let s;for(;(s=i.next())&&!s.done;){const a=s.value;t.call(n,a[0],a[1])}},NB=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},VB=qr("HTMLFormElement"),FB=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),mT=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),UB=qr("RegExp"),Lb=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};eh(e,(s,a)=>{let c;(c=t(s,a,n))!==!1&&(i[a]=c||s)}),Object.defineProperties(n,i)},BB=n=>{Lb(n,(t,e)=>{if(sr(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(sr(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},zB=(n,t)=>{const e={},i=s=>{s.forEach(a=>{e[a]=!0})};return xl(n)?i(n):i(String(n).split(t)),e},HB=()=>{},WB=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function qB(n){return!!(n&&sr(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const $B=n=>{const t=new Array(10),e=(i,s)=>{if(wd(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[s]=i;const a=xl(i)?[]:{};return eh(i,(c,d)=>{const m=e(c,s+1);!Uc(m)&&(a[d]=m)}),t[s]=void 0,a}}return i};return e(n,0)},jB=qr("AsyncFunction"),KB=n=>n&&(wd(n)||sr(n))&&sr(n.then)&&sr(n.catch),Ob=((n,t)=>n?setImmediate:t?((e,i)=>(nu.addEventListener("message",({source:s,data:a})=>{s===nu&&a===e&&i.length&&i.shift()()},!1),s=>{i.push(s),nu.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",sr(nu.postMessage)),GB=typeof queueMicrotask<"u"?queueMicrotask.bind(nu):typeof process<"u"&&process.nextTick||Ob,nt={isArray:xl,isArrayBuffer:Sb,isBuffer:fB,isFormData:TB,isArrayBufferView:dB,isString:pB,isNumber:Rb,isBoolean:mB,isObject:wd,isPlainObject:sf,isReadableStream:IB,isRequest:bB,isResponse:AB,isHeaders:PB,isUndefined:Uc,isDate:_B,isFile:gB,isBlob:vB,isRegExp:UB,isFunction:sr,isStream:wB,isURLSearchParams:EB,isTypedArray:MB,isFileList:yB,forEach:eh,merge:Um,extend:RB,trim:SB,stripBOM:CB,inherits:xB,toFlatObject:LB,kindOf:vd,kindOfTest:qr,endsWith:OB,toArray:kB,forEachEntry:DB,matchAll:NB,isHTMLForm:VB,hasOwnProperty:mT,hasOwnProp:mT,reduceDescriptors:Lb,freezeMethods:BB,toObjectSet:zB,toCamelCase:FB,noop:HB,toFiniteNumber:WB,findKey:Cb,global:nu,isContextDefined:xb,isSpecCompliantForm:qB,toJSONObject:$B,isAsyncFn:jB,isThenable:KB,setImmediate:Ob,asap:GB};function me(n,t,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}nt.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:nt.toJSONObject(this.config),code:this.code,status:this.status}}});const kb=me.prototype,Mb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Mb[n]={value:n}});Object.defineProperties(me,Mb);Object.defineProperty(kb,"isAxiosError",{value:!0});me.from=(n,t,e,i,s,a)=>{const c=Object.create(kb);return nt.toFlatObject(n,c,function(m){return m!==Error.prototype},d=>d!=="isAxiosError"),me.call(c,n.message,t,e,i,s),c.cause=n,c.name=n.name,a&&Object.assign(c,a),c};const ZB=null;function Bm(n){return nt.isPlainObject(n)||nt.isArray(n)}function Db(n){return nt.endsWith(n,"[]")?n.slice(0,-2):n}function _T(n,t,e){return n?n.concat(t).map(function(s,a){return s=Db(s),!e&&a?"["+s+"]":s}).join(e?".":""):t}function QB(n){return nt.isArray(n)&&!n.some(Bm)}const JB=nt.toFlatObject(nt,{},null,function(t){return/^is[A-Z]/.test(t)});function Td(n,t,e){if(!nt.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=nt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,K){return!nt.isUndefined(K[q])});const i=e.metaTokens,s=e.visitor||w,a=e.dots,c=e.indexes,m=(e.Blob||typeof Blob<"u"&&Blob)&&nt.isSpecCompliantForm(t);if(!nt.isFunction(s))throw new TypeError("visitor must be a function");function g(z){if(z===null)return"";if(nt.isDate(z))return z.toISOString();if(!m&&nt.isBlob(z))throw new me("Blob is not supported. Use a Buffer instead.");return nt.isArrayBuffer(z)||nt.isTypedArray(z)?m&&typeof Blob=="function"?new Blob([z]):Buffer.from(z):z}function w(z,q,K){let ht=z;if(z&&!K&&typeof z=="object"){if(nt.endsWith(q,"{}"))q=i?q:q.slice(0,-2),z=JSON.stringify(z);else if(nt.isArray(z)&&QB(z)||(nt.isFileList(z)||nt.endsWith(q,"[]"))&&(ht=nt.toArray(z)))return q=Db(q),ht.forEach(function(at,vt){!(nt.isUndefined(at)||at===null)&&t.append(c===!0?_T([q],vt,a):c===null?q:q+"[]",g(at))}),!1}return Bm(z)?!0:(t.append(_T(K,q,a),g(z)),!1)}const E=[],S=Object.assign(JB,{defaultVisitor:w,convertValue:g,isVisitable:Bm});function x(z,q){if(!nt.isUndefined(z)){if(E.indexOf(z)!==-1)throw Error("Circular reference detected in "+q.join("."));E.push(z),nt.forEach(z,function(ht,lt){(!(nt.isUndefined(ht)||ht===null)&&s.call(t,ht,nt.isString(lt)?lt.trim():lt,q,S))===!0&&x(ht,q?q.concat(lt):[lt])}),E.pop()}}if(!nt.isObject(n))throw new TypeError("data must be an object");return x(n),t}function gT(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function ag(n,t){this._pairs=[],n&&Td(n,this,t)}const Nb=ag.prototype;Nb.append=function(t,e){this._pairs.push([t,e])};Nb.toString=function(t){const e=t?function(i){return t.call(this,i,gT)}:gT;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function YB(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vb(n,t,e){if(!t)return n;const i=e&&e.encode||YB;nt.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let a;if(s?a=s(t,e):a=nt.isURLSearchParams(t)?t.toString():new ag(t,e).toString(i),a){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class vT{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){nt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Fb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XB=typeof URLSearchParams<"u"?URLSearchParams:ag,tz=typeof FormData<"u"?FormData:null,ez=typeof Blob<"u"?Blob:null,nz={isBrowser:!0,classes:{URLSearchParams:XB,FormData:tz,Blob:ez},protocols:["http","https","file","blob","url","data"]},ug=typeof window<"u"&&typeof document<"u",zm=typeof navigator=="object"&&navigator||void 0,iz=ug&&(!zm||["ReactNative","NativeScript","NS"].indexOf(zm.product)<0),rz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sz=ug&&window.location.href||"http://localhost",oz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ug,hasStandardBrowserEnv:iz,hasStandardBrowserWebWorkerEnv:rz,navigator:zm,origin:sz},Symbol.toStringTag,{value:"Module"})),fi={...oz,...nz};function az(n,t){return Td(n,new fi.classes.URLSearchParams,Object.assign({visitor:function(e,i,s,a){return fi.isNode&&nt.isBuffer(e)?(this.append(i,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function uz(n){return nt.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function lz(n){const t={},e=Object.keys(n);let i;const s=e.length;let a;for(i=0;i<s;i++)a=e[i],t[a]=n[a];return t}function Ub(n){function t(e,i,s,a){let c=e[a++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),m=a>=e.length;return c=!c&&nt.isArray(s)?s.length:c,m?(nt.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!d):((!s[c]||!nt.isObject(s[c]))&&(s[c]=[]),t(e,i,s[c],a)&&nt.isArray(s[c])&&(s[c]=lz(s[c])),!d)}if(nt.isFormData(n)&&nt.isFunction(n.entries)){const e={};return nt.forEachEntry(n,(i,s)=>{t(uz(i),s,e,0)}),e}return null}function cz(n,t,e){if(nt.isString(n))try{return(t||JSON.parse)(n),nt.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const nh={transitional:Fb,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,a=nt.isObject(t);if(a&&nt.isHTMLForm(t)&&(t=new FormData(t)),nt.isFormData(t))return s?JSON.stringify(Ub(t)):t;if(nt.isArrayBuffer(t)||nt.isBuffer(t)||nt.isStream(t)||nt.isFile(t)||nt.isBlob(t)||nt.isReadableStream(t))return t;if(nt.isArrayBufferView(t))return t.buffer;if(nt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return az(t,this.formSerializer).toString();if((d=nt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Td(d?{"files[]":t}:t,m&&new m,this.formSerializer)}}return a||s?(e.setContentType("application/json",!1),cz(t)):t}],transformResponse:[function(t){const e=this.transitional||nh.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(nt.isResponse(t)||nt.isReadableStream(t))return t;if(t&&nt.isString(t)&&(i&&!this.responseType||s)){const c=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(d){if(c)throw d.name==="SyntaxError"?me.from(d,me.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fi.classes.FormData,Blob:fi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};nt.forEach(["delete","get","head","post","put","patch"],n=>{nh.headers[n]={}});const hz=nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fz=n=>{const t={};let e,i,s;return n&&n.split(`
`).forEach(function(c){s=c.indexOf(":"),e=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!e||t[e]&&hz[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},yT=Symbol("internals");function Jl(n){return n&&String(n).trim().toLowerCase()}function of(n){return n===!1||n==null?n:nt.isArray(n)?n.map(of):String(n)}function dz(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const pz=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Zp(n,t,e,i,s){if(nt.isFunction(i))return i.call(this,t,e);if(s&&(t=e),!!nt.isString(t)){if(nt.isString(i))return t.indexOf(i)!==-1;if(nt.isRegExp(i))return i.test(t)}}function mz(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function _z(n,t){const e=nt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(s,a,c){return this[i].call(this,t,s,a,c)},configurable:!0})})}let zi=class{constructor(t){t&&this.set(t)}set(t,e,i){const s=this;function a(d,m,g){const w=Jl(m);if(!w)throw new Error("header name must be a non-empty string");const E=nt.findKey(s,w);(!E||s[E]===void 0||g===!0||g===void 0&&s[E]!==!1)&&(s[E||m]=of(d))}const c=(d,m)=>nt.forEach(d,(g,w)=>a(g,w,m));if(nt.isPlainObject(t)||t instanceof this.constructor)c(t,e);else if(nt.isString(t)&&(t=t.trim())&&!pz(t))c(fz(t),e);else if(nt.isHeaders(t))for(const[d,m]of t.entries())a(m,d,i);else t!=null&&a(e,t,i);return this}get(t,e){if(t=Jl(t),t){const i=nt.findKey(this,t);if(i){const s=this[i];if(!e)return s;if(e===!0)return dz(s);if(nt.isFunction(e))return e.call(this,s,i);if(nt.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Jl(t),t){const i=nt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||Zp(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let s=!1;function a(c){if(c=Jl(c),c){const d=nt.findKey(i,c);d&&(!e||Zp(i,i[d],d,e))&&(delete i[d],s=!0)}}return nt.isArray(t)?t.forEach(a):a(t),s}clear(t){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const a=e[i];(!t||Zp(this,this[a],a,t,!0))&&(delete this[a],s=!0)}return s}normalize(t){const e=this,i={};return nt.forEach(this,(s,a)=>{const c=nt.findKey(i,a);if(c){e[c]=of(s),delete e[a];return}const d=t?mz(a):String(a).trim();d!==a&&delete e[a],e[d]=of(s),i[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return nt.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=t&&nt.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[yT]=this[yT]={accessors:{}}).accessors,s=this.prototype;function a(c){const d=Jl(c);i[d]||(_z(s,c),i[d]=!0)}return nt.isArray(t)?t.forEach(a):a(t),this}};zi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);nt.reduceDescriptors(zi.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});nt.freezeMethods(zi);function Qp(n,t){const e=this||nh,i=t||e,s=zi.from(i.headers);let a=i.data;return nt.forEach(n,function(d){a=d.call(e,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function Bb(n){return!!(n&&n.__CANCEL__)}function Ll(n,t,e){me.call(this,n??"canceled",me.ERR_CANCELED,t,e),this.name="CanceledError"}nt.inherits(Ll,me,{__CANCEL__:!0});function zb(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new me("Request failed with status code "+e.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function gz(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function vz(n,t){n=n||10;const e=new Array(n),i=new Array(n);let s=0,a=0,c;return t=t!==void 0?t:1e3,function(m){const g=Date.now(),w=i[a];c||(c=g),e[s]=m,i[s]=g;let E=a,S=0;for(;E!==s;)S+=e[E++],E=E%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),g-c<t)return;const x=w&&g-w;return x?Math.round(S*1e3/x):void 0}}function yz(n,t){let e=0,i=1e3/t,s,a;const c=(g,w=Date.now())=>{e=w,s=null,a&&(clearTimeout(a),a=null),n.apply(null,g)};return[(...g)=>{const w=Date.now(),E=w-e;E>=i?c(g,w):(s=g,a||(a=setTimeout(()=>{a=null,c(s)},i-E)))},()=>s&&c(s)]}const Nf=(n,t,e=3)=>{let i=0;const s=vz(50,250);return yz(a=>{const c=a.loaded,d=a.lengthComputable?a.total:void 0,m=c-i,g=s(m),w=c<=d;i=c;const E={loaded:c,total:d,progress:d?c/d:void 0,bytes:m,rate:g||void 0,estimated:g&&d&&w?(d-c)/g:void 0,event:a,lengthComputable:d!=null,[t?"download":"upload"]:!0};n(E)},e)},wT=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},TT=n=>(...t)=>nt.asap(()=>n(...t)),wz=fi.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,fi.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(fi.origin),fi.navigator&&/(msie|trident)/i.test(fi.navigator.userAgent)):()=>!0,Tz=fi.hasStandardBrowserEnv?{write(n,t,e,i,s,a){const c=[n+"="+encodeURIComponent(t)];nt.isNumber(e)&&c.push("expires="+new Date(e).toGMTString()),nt.isString(i)&&c.push("path="+i),nt.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ez(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Iz(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function Hb(n,t,e){let i=!Ez(t);return n&&(i||e==!1)?Iz(n,t):t}const ET=n=>n instanceof zi?{...n}:n;function du(n,t){t=t||{};const e={};function i(g,w,E,S){return nt.isPlainObject(g)&&nt.isPlainObject(w)?nt.merge.call({caseless:S},g,w):nt.isPlainObject(w)?nt.merge({},w):nt.isArray(w)?w.slice():w}function s(g,w,E,S){if(nt.isUndefined(w)){if(!nt.isUndefined(g))return i(void 0,g,E,S)}else return i(g,w,E,S)}function a(g,w){if(!nt.isUndefined(w))return i(void 0,w)}function c(g,w){if(nt.isUndefined(w)){if(!nt.isUndefined(g))return i(void 0,g)}else return i(void 0,w)}function d(g,w,E){if(E in t)return i(g,w);if(E in n)return i(void 0,g)}const m={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(g,w,E)=>s(ET(g),ET(w),E,!0)};return nt.forEach(Object.keys(Object.assign({},n,t)),function(w){const E=m[w]||s,S=E(n[w],t[w],w);nt.isUndefined(S)&&E!==d||(e[w]=S)}),e}const Wb=n=>{const t=du({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:d}=t;t.headers=c=zi.from(c),t.url=Vb(Hb(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let m;if(nt.isFormData(e)){if(fi.hasStandardBrowserEnv||fi.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[g,...w]=m?m.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([g||"multipart/form-data",...w].join("; "))}}if(fi.hasStandardBrowserEnv&&(i&&nt.isFunction(i)&&(i=i(t)),i||i!==!1&&wz(t.url))){const g=s&&a&&Tz.read(a);g&&c.set(s,g)}return t},bz=typeof XMLHttpRequest<"u",Az=bz&&function(n){return new Promise(function(e,i){const s=Wb(n);let a=s.data;const c=zi.from(s.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:g}=s,w,E,S,x,z;function q(){x&&x(),z&&z(),s.cancelToken&&s.cancelToken.unsubscribe(w),s.signal&&s.signal.removeEventListener("abort",w)}let K=new XMLHttpRequest;K.open(s.method.toUpperCase(),s.url,!0),K.timeout=s.timeout;function ht(){if(!K)return;const at=zi.from("getAllResponseHeaders"in K&&K.getAllResponseHeaders()),xt={data:!d||d==="text"||d==="json"?K.responseText:K.response,status:K.status,statusText:K.statusText,headers:at,config:n,request:K};zb(function(U){e(U),q()},function(U){i(U),q()},xt),K=null}"onloadend"in K?K.onloadend=ht:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(ht)},K.onabort=function(){K&&(i(new me("Request aborted",me.ECONNABORTED,n,K)),K=null)},K.onerror=function(){i(new me("Network Error",me.ERR_NETWORK,n,K)),K=null},K.ontimeout=function(){let vt=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const xt=s.transitional||Fb;s.timeoutErrorMessage&&(vt=s.timeoutErrorMessage),i(new me(vt,xt.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,n,K)),K=null},a===void 0&&c.setContentType(null),"setRequestHeader"in K&&nt.forEach(c.toJSON(),function(vt,xt){K.setRequestHeader(xt,vt)}),nt.isUndefined(s.withCredentials)||(K.withCredentials=!!s.withCredentials),d&&d!=="json"&&(K.responseType=s.responseType),g&&([S,z]=Nf(g,!0),K.addEventListener("progress",S)),m&&K.upload&&([E,x]=Nf(m),K.upload.addEventListener("progress",E),K.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(w=at=>{K&&(i(!at||at.type?new Ll(null,n,K):at),K.abort(),K=null)},s.cancelToken&&s.cancelToken.subscribe(w),s.signal&&(s.signal.aborted?w():s.signal.addEventListener("abort",w)));const lt=gz(s.url);if(lt&&fi.protocols.indexOf(lt)===-1){i(new me("Unsupported protocol "+lt+":",me.ERR_BAD_REQUEST,n));return}K.send(a||null)})},Pz=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,s;const a=function(g){if(!s){s=!0,d();const w=g instanceof Error?g:this.reason;i.abort(w instanceof me?w:new Ll(w instanceof Error?w.message:w))}};let c=t&&setTimeout(()=>{c=null,a(new me(`timeout ${t} of ms exceeded`,me.ETIMEDOUT))},t);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(a):g.removeEventListener("abort",a)}),n=null)};n.forEach(g=>g.addEventListener("abort",a));const{signal:m}=i;return m.unsubscribe=()=>nt.asap(d),m}},Sz=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let i=0,s;for(;i<e;)s=i+t,yield n.slice(i,s),i=s},Rz=async function*(n,t){for await(const e of Cz(n))yield*Sz(e,t)},Cz=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},IT=(n,t,e,i)=>{const s=Rz(n,t);let a=0,c,d=m=>{c||(c=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:g,value:w}=await s.next();if(g){d(),m.close();return}let E=w.byteLength;if(e){let S=a+=E;e(S)}m.enqueue(new Uint8Array(w))}catch(g){throw d(g),g}},cancel(m){return d(m),s.return()}},{highWaterMark:2})},Ed=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qb=Ed&&typeof ReadableStream=="function",xz=Ed&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),$b=(n,...t)=>{try{return!!n(...t)}catch{return!1}},Lz=qb&&$b(()=>{let n=!1;const t=new Request(fi.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),bT=64*1024,Hm=qb&&$b(()=>nt.isReadableStream(new Response("").body)),Vf={stream:Hm&&(n=>n.body)};Ed&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Vf[t]&&(Vf[t]=nt.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new me(`Response type '${t}' is not supported`,me.ERR_NOT_SUPPORT,i)})})})(new Response);const Oz=async n=>{if(n==null)return 0;if(nt.isBlob(n))return n.size;if(nt.isSpecCompliantForm(n))return(await new Request(fi.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(nt.isArrayBufferView(n)||nt.isArrayBuffer(n))return n.byteLength;if(nt.isURLSearchParams(n)&&(n=n+""),nt.isString(n))return(await xz(n)).byteLength},kz=async(n,t)=>{const e=nt.toFiniteNumber(n.getContentLength());return e??Oz(t)},Mz=Ed&&(async n=>{let{url:t,method:e,data:i,signal:s,cancelToken:a,timeout:c,onDownloadProgress:d,onUploadProgress:m,responseType:g,headers:w,withCredentials:E="same-origin",fetchOptions:S}=Wb(n);g=g?(g+"").toLowerCase():"text";let x=Pz([s,a&&a.toAbortSignal()],c),z;const q=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let K;try{if(m&&Lz&&e!=="get"&&e!=="head"&&(K=await kz(w,i))!==0){let xt=new Request(t,{method:"POST",body:i,duplex:"half"}),Ut;if(nt.isFormData(i)&&(Ut=xt.headers.get("content-type"))&&w.setContentType(Ut),xt.body){const[U,O]=wT(K,Nf(TT(m)));i=IT(xt.body,bT,U,O)}}nt.isString(E)||(E=E?"include":"omit");const ht="credentials"in Request.prototype;z=new Request(t,{...S,signal:x,method:e.toUpperCase(),headers:w.normalize().toJSON(),body:i,duplex:"half",credentials:ht?E:void 0});let lt=await fetch(z);const at=Hm&&(g==="stream"||g==="response");if(Hm&&(d||at&&q)){const xt={};["status","statusText","headers"].forEach(N=>{xt[N]=lt[N]});const Ut=nt.toFiniteNumber(lt.headers.get("content-length")),[U,O]=d&&wT(Ut,Nf(TT(d),!0))||[];lt=new Response(IT(lt.body,bT,U,()=>{O&&O(),q&&q()}),xt)}g=g||"text";let vt=await Vf[nt.findKey(Vf,g)||"text"](lt,n);return!at&&q&&q(),await new Promise((xt,Ut)=>{zb(xt,Ut,{data:vt,headers:zi.from(lt.headers),status:lt.status,statusText:lt.statusText,config:n,request:z})})}catch(ht){throw q&&q(),ht&&ht.name==="TypeError"&&/fetch/i.test(ht.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,n,z),{cause:ht.cause||ht}):me.from(ht,ht&&ht.code,n,z)}}),Wm={http:ZB,xhr:Az,fetch:Mz};nt.forEach(Wm,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const AT=n=>`- ${n}`,Dz=n=>nt.isFunction(n)||n===null||n===!1,jb={getAdapter:n=>{n=nt.isArray(n)?n:[n];const{length:t}=n;let e,i;const s={};for(let a=0;a<t;a++){e=n[a];let c;if(i=e,!Dz(e)&&(i=Wm[(c=String(e)).toLowerCase()],i===void 0))throw new me(`Unknown adapter '${c}'`);if(i)break;s[c||"#"+a]=i}if(!i){const a=Object.entries(s).map(([d,m])=>`adapter ${d} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=t?a.length>1?`since :
`+a.map(AT).join(`
`):" "+AT(a[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Wm};function Jp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ll(null,n)}function PT(n){return Jp(n),n.headers=zi.from(n.headers),n.data=Qp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),jb.getAdapter(n.adapter||nh.adapter)(n).then(function(i){return Jp(n),i.data=Qp.call(n,n.transformResponse,i),i.headers=zi.from(i.headers),i},function(i){return Bb(i)||(Jp(n),i&&i.response&&(i.response.data=Qp.call(n,n.transformResponse,i.response),i.response.headers=zi.from(i.response.headers))),Promise.reject(i)})}const Kb="1.8.4",Id={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Id[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const ST={};Id.transitional=function(t,e,i){function s(a,c){return"[Axios v"+Kb+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,d)=>{if(t===!1)throw new me(s(c," has been removed"+(e?" in "+e:"")),me.ERR_DEPRECATED);return e&&!ST[c]&&(ST[c]=!0,console.warn(s(c," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(a,c,d):!0}};Id.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function Nz(n,t,e){if(typeof n!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const a=i[s],c=t[a];if(c){const d=n[a],m=d===void 0||c(d,a,n);if(m!==!0)throw new me("option "+a+" must be "+m,me.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new me("Unknown option "+a,me.ERR_BAD_OPTION)}}const af={assertOptions:Nz,validators:Id},as=af.validators;let ru=class{constructor(t){this.defaults=t,this.interceptors={request:new vT,response:new vT}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=du(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:a}=e;i!==void 0&&af.assertOptions(i,{silentJSONParsing:as.transitional(as.boolean),forcedJSONParsing:as.transitional(as.boolean),clarifyTimeoutError:as.transitional(as.boolean)},!1),s!=null&&(nt.isFunction(s)?e.paramsSerializer={serialize:s}:af.assertOptions(s,{encode:as.function,serialize:as.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),af.assertOptions(e,{baseUrl:as.spelling("baseURL"),withXsrfToken:as.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=a&&nt.merge(a.common,a[e.method]);a&&nt.forEach(["delete","get","head","post","put","patch","common"],z=>{delete a[z]}),e.headers=zi.concat(c,a);const d=[];let m=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(e)===!1||(m=m&&q.synchronous,d.unshift(q.fulfilled,q.rejected))});const g=[];this.interceptors.response.forEach(function(q){g.push(q.fulfilled,q.rejected)});let w,E=0,S;if(!m){const z=[PT.bind(this),void 0];for(z.unshift.apply(z,d),z.push.apply(z,g),S=z.length,w=Promise.resolve(e);E<S;)w=w.then(z[E++],z[E++]);return w}S=d.length;let x=e;for(E=0;E<S;){const z=d[E++],q=d[E++];try{x=z(x)}catch(K){q.call(this,K);break}}try{w=PT.call(this,x)}catch(z){return Promise.reject(z)}for(E=0,S=g.length;E<S;)w=w.then(g[E++],g[E++]);return w}getUri(t){t=du(this.defaults,t);const e=Hb(t.baseURL,t.url,t.allowAbsoluteUrls);return Vb(e,t.params,t.paramsSerializer)}};nt.forEach(["delete","get","head","options"],function(t){ru.prototype[t]=function(e,i){return this.request(du(i||{},{method:t,url:e,data:(i||{}).data}))}});nt.forEach(["post","put","patch"],function(t){function e(i){return function(a,c,d){return this.request(du(d||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}ru.prototype[t]=e(),ru.prototype[t+"Form"]=e(!0)});let Vz=class Gb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(d=>{i.subscribe(d),a=d}).then(s);return c.cancel=function(){i.unsubscribe(a)},c},t(function(a,c,d){i.reason||(i.reason=new Ll(a,c,d),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Gb(function(s){t=s}),cancel:t}}};function Fz(n){return function(e){return n.apply(null,e)}}function Uz(n){return nt.isObject(n)&&n.isAxiosError===!0}const qm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qm).forEach(([n,t])=>{qm[t]=n});function Zb(n){const t=new ru(n),e=Pb(ru.prototype.request,t);return nt.extend(e,ru.prototype,t,{allOwnKeys:!0}),nt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return Zb(du(n,s))},e}const Sn=Zb(nh);Sn.Axios=ru;Sn.CanceledError=Ll;Sn.CancelToken=Vz;Sn.isCancel=Bb;Sn.VERSION=Kb;Sn.toFormData=Td;Sn.AxiosError=me;Sn.Cancel=Sn.CanceledError;Sn.all=function(t){return Promise.all(t)};Sn.spread=Fz;Sn.isAxiosError=Uz;Sn.mergeConfig=du;Sn.AxiosHeaders=zi;Sn.formToJSON=n=>Ub(nt.isHTMLForm(n)?new FormData(n):n);Sn.getAdapter=jb.getAdapter;Sn.HttpStatusCode=qm;Sn.default=Sn;const{Axios:q9,AxiosError:$9,CanceledError:j9,isCancel:K9,CancelToken:G9,VERSION:Z9,all:Q9,Cancel:J9,isAxiosError:Y9,spread:X9,toFormData:t3,AxiosHeaders:e3,HttpStatusCode:n3,formToJSON:i3,getAdapter:r3,mergeConfig:s3}=Sn;var oc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Bz=oc.exports,RT;function zz(){return RT||(RT=1,function(n,t){(function(){var e,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",d="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",g=500,w="__lodash_placeholder__",E=1,S=2,x=4,z=1,q=2,K=1,ht=2,lt=4,at=8,vt=16,xt=32,Ut=64,U=128,O=256,N=512,H=30,W="...",G=800,V=16,Ze=1,Xn=2,Ce=3,ae=1/0,Tt=9007199254740991,Un=17976931348623157e292,Mt=NaN,ie=4294967295,ve=ie-1,ye=ie>>>1,Fe=[["ary",U],["bind",K],["bindKey",ht],["curry",at],["curryRight",vt],["flip",N],["partial",xt],["partialRight",Ut],["rearg",O]],re="[object Arguments]",qt="[object Array]",it="[object AsyncFunction]",It="[object Boolean]",bt="[object Date]",Lt="[object DOMException]",_e="[object Error]",k="[object Function]",D="[object GeneratorFunction]",j="[object Map]",st="[object Number]",ft="[object Null]",ot="[object Object]",At="[object Promise]",Et="[object Proxy]",yt="[object RegExp]",dt="[object Set]",Dt="[object String]",Pt="[object Symbol]",Nt="[object Undefined]",zt="[object WeakMap]",Bt="[object WeakSet]",Kt="[object ArrayBuffer]",le="[object DataView]",mn="[object Float32Array]",on="[object Float64Array]",kn="[object Int8Array]",_n="[object Int16Array]",_i="[object Int32Array]",Wi="[object Uint8Array]",an="[object Uint8ClampedArray]",Bn="[object Uint16Array]",Pi="[object Uint32Array]",ha=/\b__p \+= '';/g,yu=/\b(__p \+=) '' \+/g,fa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Er=/&(?:amp|lt|gt|quot|#39);/g,ys=/[&<>"']/g,da=RegExp(Er.source),Ir=RegExp(ys.source),wu=/<%-([\s\S]+?)%>/g,lo=/<%([\s\S]+?)%>/g,pa=/<%=([\s\S]+?)%>/g,ws=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,co=/^\w*$/,Mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ho=/[\\^$.*+?()[\]{}|]/g,Ts=RegExp(ho.source),br=/^\s+/,Si=/\s/,Vt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ar=/\{\n\/\* \[wrapped with (.+)\] \*/,Tu=/,? & /,Eu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Es=/[()=,{}\[\]\/\s]/,fo=/\\(\\)?/g,po=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ri=/\w*$/,qi=/^[-+]0x[0-9a-f]+$/i,Iu=/^0b[01]+$/i,bu=/^\[object .+?Constructor\]$/,ma=/^0o[0-7]+$/i,_a=/^(?:0|[1-9]\d*)$/,ga=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Is=/($^)/,mo=/['\n\r\u2028\u2029\\]/g,Pr="\\ud800-\\udfff",Au="\\u0300-\\u036f",va="\\ufe20-\\ufe2f",bs="\\u20d0-\\u20ff",ar=Au+va+bs,$r="\\u2700-\\u27bf",jr="a-z\\xdf-\\xf6\\xf8-\\xff",ya="\\xac\\xb1\\xd7\\xf7",wa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Kr="\\u2000-\\u206f",Pe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ue="A-Z\\xc0-\\xd6\\xd8-\\xde",Gr="\\ufe0e\\ufe0f",ur=ya+wa+Kr+Pe,lr="['’]",Ta="["+Pr+"]",se="["+ur+"]",Ge="["+ar+"]",_o="\\d+",Ci="["+$r+"]",rn="["+jr+"]",As="[^"+Pr+ur+_o+$r+jr+Ue+"]",$i="\\ud83c[\\udffb-\\udfff]",cr="(?:"+Ge+"|"+$i+")",Xt="[^"+Pr+"]",ti="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",zn="["+Ue+"]",go="\\u200d",Sr="(?:"+rn+"|"+As+")",Ea="(?:"+zn+"|"+As+")",vo="(?:"+lr+"(?:d|ll|m|re|s|t|ve))?",Ps="(?:"+lr+"(?:D|LL|M|RE|S|T|VE))?",yo=cr+"?",hr="["+Gr+"]?",vi="(?:"+go+"(?:"+[Xt,ti,gi].join("|")+")"+hr+yo+")*",Ia="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ba=hr+yo+vi,Gt="(?:"+[Ci,ti,gi].join("|")+")"+ba,xi="(?:"+[Xt+Ge+"?",Ge,ti,gi,Ta].join("|")+")",Be=RegExp(lr,"g"),Pu=RegExp(Ge,"g"),ei=RegExp($i+"(?="+$i+")|"+xi+ba,"g"),Aa=RegExp([zn+"?"+rn+"+"+vo+"(?="+[se,zn,"$"].join("|")+")",Ea+"+"+Ps+"(?="+[se,zn+Sr,"$"].join("|")+")",zn+"?"+Sr+"+"+vo,zn+"+"+Ps,wo,Ia,_o,Gt].join("|"),"g"),Pa=RegExp("["+go+Pr+ar+Gr+"]"),Li=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qr=-1,te={};te[mn]=te[on]=te[kn]=te[_n]=te[_i]=te[Wi]=te[an]=te[Bn]=te[Pi]=!0,te[re]=te[qt]=te[Kt]=te[It]=te[le]=te[bt]=te[_e]=te[k]=te[j]=te[st]=te[ot]=te[yt]=te[dt]=te[Dt]=te[zt]=!1;var we={};we[re]=we[qt]=we[Kt]=we[le]=we[It]=we[bt]=we[mn]=we[on]=we[kn]=we[_n]=we[_i]=we[j]=we[st]=we[ot]=we[yt]=we[dt]=we[Dt]=we[Pt]=we[Wi]=we[an]=we[Bn]=we[Pi]=!0,we[_e]=we[k]=we[zt]=!1;var Sa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},To={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Su={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ra=parseFloat,Ru=parseInt,Eo=typeof zh=="object"&&zh&&zh.Object===Object&&zh,Ee=typeof self=="object"&&self&&self.Object===Object&&self,un=Eo||Ee||Function("return this")(),Hn=t&&!t.nodeType&&t,hn=Hn&&!0&&n&&!n.nodeType&&n,Io=hn&&hn.exports===Hn,Ca=Io&&Eo.process,gn=function(){try{var $=hn&&hn.require&&hn.require("util").types;return $||Ca&&Ca.binding&&Ca.binding("util")}catch{}}(),xa=gn&&gn.isArrayBuffer,Ss=gn&&gn.isDate,Rs=gn&&gn.isMap,La=gn&&gn.isRegExp,Rr=gn&&gn.isSet,Cu=gn&&gn.isTypedArray;function Qe($,rt,tt){switch(tt.length){case 0:return $.call(rt);case 1:return $.call(rt,tt[0]);case 2:return $.call(rt,tt[0],tt[1]);case 3:return $.call(rt,tt[0],tt[1],tt[2])}return $.apply(rt,tt)}function Cs($,rt,tt,Ct){for(var oe=-1,De=$==null?0:$.length;++oe<De;){var In=$[oe];rt(Ct,In,tt(In),$)}return Ct}function Wn($,rt){for(var tt=-1,Ct=$==null?0:$.length;++tt<Ct&&rt($[tt],tt,$)!==!1;);return $}function ji($,rt){for(var tt=$==null?0:$.length;tt--&&rt($[tt],tt,$)!==!1;);return $}function xs($,rt){for(var tt=-1,Ct=$==null?0:$.length;++tt<Ct;)if(!rt($[tt],tt,$))return!1;return!0}function yi($,rt){for(var tt=-1,Ct=$==null?0:$.length,oe=0,De=[];++tt<Ct;){var In=$[tt];rt(In,tt,$)&&(De[oe++]=In)}return De}function Cr($,rt){var tt=$==null?0:$.length;return!!tt&&xr($,rt,0)>-1}function Jr($,rt,tt){for(var Ct=-1,oe=$==null?0:$.length;++Ct<oe;)if(tt(rt,$[Ct]))return!0;return!1}function ze($,rt){for(var tt=-1,Ct=$==null?0:$.length,oe=Array(Ct);++tt<Ct;)oe[tt]=rt($[tt],tt,$);return oe}function Oi($,rt){for(var tt=-1,Ct=rt.length,oe=$.length;++tt<Ct;)$[oe+tt]=rt[tt];return $}function Ki($,rt,tt,Ct){var oe=-1,De=$==null?0:$.length;for(Ct&&De&&(tt=$[++oe]);++oe<De;)tt=rt(tt,$[oe],oe,$);return tt}function xu($,rt,tt,Ct){var oe=$==null?0:$.length;for(Ct&&oe&&(tt=$[--oe]);oe--;)tt=rt(tt,$[oe],oe,$);return tt}function Yr($,rt){for(var tt=-1,Ct=$==null?0:$.length;++tt<Ct;)if(rt($[tt],tt,$))return!0;return!1}var Lu=I("length");function Oa($){return $.split("")}function Ls($){return $.match(Eu)||[]}function En($,rt,tt){var Ct;return tt($,function(oe,De,In){if(rt(oe,De,In))return Ct=De,!1}),Ct}function wi($,rt,tt,Ct){for(var oe=$.length,De=tt+(Ct?1:-1);Ct?De--:++De<oe;)if(rt($[De],De,$))return De;return-1}function xr($,rt,tt){return rt===rt?Ao($,rt,tt):wi($,h,tt)}function ki($,rt,tt,Ct){for(var oe=tt-1,De=$.length;++oe<De;)if(Ct($[oe],rt))return oe;return-1}function h($){return $!==$}function v($,rt){var tt=$==null?0:$.length;return tt?wt($,rt)/tt:Mt}function I($){return function(rt){return rt==null?e:rt[$]}}function R($){return function(rt){return $==null?e:$[rt]}}function Q($,rt,tt,Ct,oe){return oe($,function(De,In,He){tt=Ct?(Ct=!1,De):rt(tt,De,In,He)}),tt}function et($,rt){var tt=$.length;for($.sort(rt);tt--;)$[tt]=$[tt].value;return $}function wt($,rt){for(var tt,Ct=-1,oe=$.length;++Ct<oe;){var De=rt($[Ct]);De!==e&&(tt=tt===e?De:tt+De)}return tt}function Ve($,rt){for(var tt=-1,Ct=Array($);++tt<$;)Ct[tt]=rt(tt);return Ct}function vn($,rt){return ze(rt,function(tt){return[tt,$[tt]]})}function Se($){return $&&$.slice(0,kl($)+1).replace(br,"")}function de($){return function(rt){return $(rt)}}function Je($,rt){return ze(rt,function(tt){return $[tt]})}function Mi($,rt){return $.has(rt)}function ln($,rt){for(var tt=-1,Ct=$.length;++tt<Ct&&xr(rt,$[tt],0)>-1;);return tt}function Os($,rt){for(var tt=$.length;tt--&&xr(rt,$[tt],0)>-1;);return tt}function fr($,rt){for(var tt=$.length,Ct=0;tt--;)$[tt]===rt&&++Ct;return Ct}var bd=R(Sa),ka=R(To);function ih($){return"\\"+Su[$]}function Ou($,rt){return $==null?e:$[rt]}function bo($){return Pa.test($)}function Xr($){return Li.test($)}function ku($){for(var rt,tt=[];!(rt=$.next()).done;)tt.push(rt.value);return tt}function Ol($){var rt=-1,tt=Array($.size);return $.forEach(function(Ct,oe){tt[++rt]=[oe,Ct]}),tt}function Mu($,rt){return function(tt){return $(rt(tt))}}function ts($,rt){for(var tt=-1,Ct=$.length,oe=0,De=[];++tt<Ct;){var In=$[tt];(In===rt||In===w)&&($[tt]=w,De[oe++]=tt)}return De}function Di($){var rt=-1,tt=Array($.size);return $.forEach(function(Ct){tt[++rt]=Ct}),tt}function Ad($){var rt=-1,tt=Array($.size);return $.forEach(function(Ct){tt[++rt]=[Ct,Ct]}),tt}function Ao($,rt,tt){for(var Ct=tt-1,oe=$.length;++Ct<oe;)if($[Ct]===rt)return Ct;return-1}function Pd($,rt,tt){for(var Ct=tt+1;Ct--;)if($[Ct]===rt)return Ct;return Ct}function ni($){return bo($)?Du($):Lu($)}function ii($){return bo($)?Dl($):Oa($)}function kl($){for(var rt=$.length;rt--&&Si.test($.charAt(rt)););return rt}var Ml=R(Xe);function Du($){for(var rt=ei.lastIndex=0;ei.test($);)++rt;return rt}function Dl($){return $.match(ei)||[]}function Nu($){return $.match(Aa)||[]}var Po=function $(rt){rt=rt==null?un:Lr.defaults(un.Object(),rt,Lr.pick(un,Zr));var tt=rt.Array,Ct=rt.Date,oe=rt.Error,De=rt.Function,In=rt.Math,He=rt.Object,Nl=rt.RegExp,dr=rt.String,Kn=rt.TypeError,Vu=tt.prototype,Fu=De.prototype,So=He.prototype,Ma=rt["__core-js_shared__"],Uu=Fu.toString,Oe=So.hasOwnProperty,Sd=0,ks=function(){var o=/[^.]+$/.exec(Ma&&Ma.keys&&Ma.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Da=So.toString,rh=Uu.call(He),Rd=un._,Or=Nl("^"+Uu.call(Oe).replace(ho,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Na=Io?rt.Buffer:e,kr=rt.Symbol,es=rt.Uint8Array,sh=Na?Na.allocUnsafe:e,Ms=Mu(He.getPrototypeOf,He),Ro=He.create,Vl=So.propertyIsEnumerable,Va=Vu.splice,oh=kr?kr.isConcatSpreadable:e,Co=kr?kr.iterator:e,ns=kr?kr.toStringTag:e,Fa=function(){try{var o=Ka(He,"defineProperty");return o({},"",{}),o}catch{}}(),ah=rt.clearTimeout!==un.clearTimeout&&rt.clearTimeout,uh=Ct&&Ct.now!==un.Date.now&&Ct.now,Cd=rt.setTimeout!==un.setTimeout&&rt.setTimeout,Ua=In.ceil,Ba=In.floor,Fl=He.getOwnPropertySymbols,r=Na?Na.isBuffer:e,u=rt.isFinite,f=Vu.join,_=Mu(He.keys,He),T=In.max,A=In.min,F=Ct.now,Y=rt.parseInt,X=In.random,_t=Vu.reverse,Rt=Ka(rt,"DataView"),Ht=Ka(rt,"Map"),pe=Ka(rt,"Promise"),yn=Ka(rt,"Set"),cn=Ka(rt,"WeakMap"),qn=Ka(He,"create"),Dn=cn&&new cn,Gi={},xd=Ga(Rt),Ld=Ga(Ht),Od=Ga(pe),lh=Ga(yn),kd=Ga(cn),za=kr?kr.prototype:e,tn=za?za.valueOf:e,Ha=za?za.toString:e;function P(o){if(wn(o)&&!he(o)&&!(o instanceof Ie)){if(o instanceof ri)return o;if(Oe.call(o,"__wrapped__"))return lv(o)}return new ri(o)}var xo=function(){function o(){}return function(l){if(!fn(l))return{};if(Ro)return Ro(l);o.prototype=l;var p=new o;return o.prototype=e,p}}();function Bu(){}function ri(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=e}P.templateSettings={escape:wu,evaluate:lo,interpolate:pa,variable:"",imports:{_:P}},P.prototype=Bu.prototype,P.prototype.constructor=P,ri.prototype=xo(Bu.prototype),ri.prototype.constructor=ri;function Ie(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function Md(){var o=new Ie(this.__wrapped__);return o.__actions__=Ni(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Ni(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Ni(this.__views__),o}function Jb(){if(this.__filtered__){var o=new Ie(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function Yb(){var o=this.__wrapped__.value(),l=this.__dir__,p=he(o),y=l<0,b=p?o.length:0,C=cP(0,b,this.__views__),M=C.start,B=C.end,Z=B-M,ut=y?B:M-1,ct=this.__iteratees__,gt=ct.length,St=0,Ft=A(Z,this.__takeCount__);if(!p||!y&&b==Z&&Ft==Z)return Og(o,this.__actions__);var Qt=[];t:for(;Z--&&St<Ft;){ut+=l;for(var Te=-1,Jt=o[ut];++Te<gt;){var Re=ct[Te],ke=Re.iteratee,Ji=Re.type,Ii=ke(Jt);if(Ji==Xn)Jt=Ii;else if(!Ii){if(Ji==Ze)continue t;break t}}Qt[St++]=Jt}return Qt}Ie.prototype=xo(Bu.prototype),Ie.prototype.constructor=Ie;function Wa(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var y=o[l];this.set(y[0],y[1])}}function Xb(){this.__data__=qn?qn(null):{},this.size=0}function tA(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function eA(o){var l=this.__data__;if(qn){var p=l[o];return p===m?e:p}return Oe.call(l,o)?l[o]:e}function nA(o){var l=this.__data__;return qn?l[o]!==e:Oe.call(l,o)}function iA(o,l){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=qn&&l===e?m:l,this}Wa.prototype.clear=Xb,Wa.prototype.delete=tA,Wa.prototype.get=eA,Wa.prototype.has=nA,Wa.prototype.set=iA;function Ds(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var y=o[l];this.set(y[0],y[1])}}function rA(){this.__data__=[],this.size=0}function sA(o){var l=this.__data__,p=ch(l,o);if(p<0)return!1;var y=l.length-1;return p==y?l.pop():Va.call(l,p,1),--this.size,!0}function oA(o){var l=this.__data__,p=ch(l,o);return p<0?e:l[p][1]}function aA(o){return ch(this.__data__,o)>-1}function uA(o,l){var p=this.__data__,y=ch(p,o);return y<0?(++this.size,p.push([o,l])):p[y][1]=l,this}Ds.prototype.clear=rA,Ds.prototype.delete=sA,Ds.prototype.get=oA,Ds.prototype.has=aA,Ds.prototype.set=uA;function Ns(o){var l=-1,p=o==null?0:o.length;for(this.clear();++l<p;){var y=o[l];this.set(y[0],y[1])}}function lA(){this.size=0,this.__data__={hash:new Wa,map:new(Ht||Ds),string:new Wa}}function cA(o){var l=Eh(this,o).delete(o);return this.size-=l?1:0,l}function hA(o){return Eh(this,o).get(o)}function fA(o){return Eh(this,o).has(o)}function dA(o,l){var p=Eh(this,o),y=p.size;return p.set(o,l),this.size+=p.size==y?0:1,this}Ns.prototype.clear=lA,Ns.prototype.delete=cA,Ns.prototype.get=hA,Ns.prototype.has=fA,Ns.prototype.set=dA;function qa(o){var l=-1,p=o==null?0:o.length;for(this.__data__=new Ns;++l<p;)this.add(o[l])}function pA(o){return this.__data__.set(o,m),this}function mA(o){return this.__data__.has(o)}qa.prototype.add=qa.prototype.push=pA,qa.prototype.has=mA;function Mr(o){var l=this.__data__=new Ds(o);this.size=l.size}function _A(){this.__data__=new Ds,this.size=0}function gA(o){var l=this.__data__,p=l.delete(o);return this.size=l.size,p}function vA(o){return this.__data__.get(o)}function yA(o){return this.__data__.has(o)}function wA(o,l){var p=this.__data__;if(p instanceof Ds){var y=p.__data__;if(!Ht||y.length<s-1)return y.push([o,l]),this.size=++p.size,this;p=this.__data__=new Ns(y)}return p.set(o,l),this.size=p.size,this}Mr.prototype.clear=_A,Mr.prototype.delete=gA,Mr.prototype.get=vA,Mr.prototype.has=yA,Mr.prototype.set=wA;function lg(o,l){var p=he(o),y=!p&&Za(o),b=!p&&!y&&Do(o),C=!p&&!y&&!b&&qu(o),M=p||y||b||C,B=M?Ve(o.length,dr):[],Z=B.length;for(var ut in o)(l||Oe.call(o,ut))&&!(M&&(ut=="length"||b&&(ut=="offset"||ut=="parent")||C&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Bs(ut,Z)))&&B.push(ut);return B}function cg(o){var l=o.length;return l?o[$d(0,l-1)]:e}function TA(o,l){return Ih(Ni(o),$a(l,0,o.length))}function EA(o){return Ih(Ni(o))}function Dd(o,l,p){(p!==e&&!Dr(o[l],p)||p===e&&!(l in o))&&Vs(o,l,p)}function Ul(o,l,p){var y=o[l];(!(Oe.call(o,l)&&Dr(y,p))||p===e&&!(l in o))&&Vs(o,l,p)}function ch(o,l){for(var p=o.length;p--;)if(Dr(o[p][0],l))return p;return-1}function IA(o,l,p,y){return Lo(o,function(b,C,M){l(y,b,p(b),M)}),y}function hg(o,l){return o&&rs(l,$n(l),o)}function bA(o,l){return o&&rs(l,Fi(l),o)}function Vs(o,l,p){l=="__proto__"&&Fa?Fa(o,l,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[l]=p}function Nd(o,l){for(var p=-1,y=l.length,b=tt(y),C=o==null;++p<y;)b[p]=C?e:_p(o,l[p]);return b}function $a(o,l,p){return o===o&&(p!==e&&(o=o<=p?o:p),l!==e&&(o=o>=l?o:l)),o}function pr(o,l,p,y,b,C){var M,B=l&E,Z=l&S,ut=l&x;if(p&&(M=b?p(o,y,b,C):p(o)),M!==e)return M;if(!fn(o))return o;var ct=he(o);if(ct){if(M=fP(o),!B)return Ni(o,M)}else{var gt=si(o),St=gt==k||gt==D;if(Do(o))return Dg(o,B);if(gt==ot||gt==re||St&&!b){if(M=Z||St?{}:tv(o),!B)return Z?eP(o,bA(M,o)):tP(o,hg(M,o))}else{if(!we[gt])return b?o:{};M=dP(o,gt,B)}}C||(C=new Mr);var Ft=C.get(o);if(Ft)return Ft;C.set(o,M),Cv(o)?o.forEach(function(Jt){M.add(pr(Jt,l,p,Jt,o,C))}):Sv(o)&&o.forEach(function(Jt,Re){M.set(Re,pr(Jt,l,p,Re,o,C))});var Qt=ut?Z?np:ep:Z?Fi:$n,Te=ct?e:Qt(o);return Wn(Te||o,function(Jt,Re){Te&&(Re=Jt,Jt=o[Re]),Ul(M,Re,pr(Jt,l,p,Re,o,C))}),M}function AA(o){var l=$n(o);return function(p){return fg(p,o,l)}}function fg(o,l,p){var y=p.length;if(o==null)return!y;for(o=He(o);y--;){var b=p[y],C=l[b],M=o[b];if(M===e&&!(b in o)||!C(M))return!1}return!0}function dg(o,l,p){if(typeof o!="function")throw new Kn(c);return jl(function(){o.apply(e,p)},l)}function Bl(o,l,p,y){var b=-1,C=Cr,M=!0,B=o.length,Z=[],ut=l.length;if(!B)return Z;p&&(l=ze(l,de(p))),y?(C=Jr,M=!1):l.length>=s&&(C=Mi,M=!1,l=new qa(l));t:for(;++b<B;){var ct=o[b],gt=p==null?ct:p(ct);if(ct=y||ct!==0?ct:0,M&&gt===gt){for(var St=ut;St--;)if(l[St]===gt)continue t;Z.push(ct)}else C(l,gt,y)||Z.push(ct)}return Z}var Lo=Bg(is),pg=Bg(Fd,!0);function PA(o,l){var p=!0;return Lo(o,function(y,b,C){return p=!!l(y,b,C),p}),p}function hh(o,l,p){for(var y=-1,b=o.length;++y<b;){var C=o[y],M=l(C);if(M!=null&&(B===e?M===M&&!Qi(M):p(M,B)))var B=M,Z=C}return Z}function SA(o,l,p,y){var b=o.length;for(p=ge(p),p<0&&(p=-p>b?0:b+p),y=y===e||y>b?b:ge(y),y<0&&(y+=b),y=p>y?0:Lv(y);p<y;)o[p++]=l;return o}function mg(o,l){var p=[];return Lo(o,function(y,b,C){l(y,b,C)&&p.push(y)}),p}function Gn(o,l,p,y,b){var C=-1,M=o.length;for(p||(p=mP),b||(b=[]);++C<M;){var B=o[C];l>0&&p(B)?l>1?Gn(B,l-1,p,y,b):Oi(b,B):y||(b[b.length]=B)}return b}var Vd=zg(),_g=zg(!0);function is(o,l){return o&&Vd(o,l,$n)}function Fd(o,l){return o&&_g(o,l,$n)}function fh(o,l){return yi(l,function(p){return zs(o[p])})}function ja(o,l){l=ko(l,o);for(var p=0,y=l.length;o!=null&&p<y;)o=o[ss(l[p++])];return p&&p==y?o:e}function gg(o,l,p){var y=l(o);return he(o)?y:Oi(y,p(o))}function Ti(o){return o==null?o===e?Nt:ft:ns&&ns in He(o)?lP(o):EP(o)}function Ud(o,l){return o>l}function RA(o,l){return o!=null&&Oe.call(o,l)}function CA(o,l){return o!=null&&l in He(o)}function xA(o,l,p){return o>=A(l,p)&&o<T(l,p)}function Bd(o,l,p){for(var y=p?Jr:Cr,b=o[0].length,C=o.length,M=C,B=tt(C),Z=1/0,ut=[];M--;){var ct=o[M];M&&l&&(ct=ze(ct,de(l))),Z=A(ct.length,Z),B[M]=!p&&(l||b>=120&&ct.length>=120)?new qa(M&&ct):e}ct=o[0];var gt=-1,St=B[0];t:for(;++gt<b&&ut.length<Z;){var Ft=ct[gt],Qt=l?l(Ft):Ft;if(Ft=p||Ft!==0?Ft:0,!(St?Mi(St,Qt):y(ut,Qt,p))){for(M=C;--M;){var Te=B[M];if(!(Te?Mi(Te,Qt):y(o[M],Qt,p)))continue t}St&&St.push(Qt),ut.push(Ft)}}return ut}function LA(o,l,p,y){return is(o,function(b,C,M){l(y,p(b),C,M)}),y}function zl(o,l,p){l=ko(l,o),o=rv(o,l);var y=o==null?o:o[ss(_r(l))];return y==null?e:Qe(y,o,p)}function vg(o){return wn(o)&&Ti(o)==re}function OA(o){return wn(o)&&Ti(o)==Kt}function kA(o){return wn(o)&&Ti(o)==bt}function Hl(o,l,p,y,b){return o===l?!0:o==null||l==null||!wn(o)&&!wn(l)?o!==o&&l!==l:MA(o,l,p,y,Hl,b)}function MA(o,l,p,y,b,C){var M=he(o),B=he(l),Z=M?qt:si(o),ut=B?qt:si(l);Z=Z==re?ot:Z,ut=ut==re?ot:ut;var ct=Z==ot,gt=ut==ot,St=Z==ut;if(St&&Do(o)){if(!Do(l))return!1;M=!0,ct=!1}if(St&&!ct)return C||(C=new Mr),M||qu(o)?Jg(o,l,p,y,b,C):aP(o,l,Z,p,y,b,C);if(!(p&z)){var Ft=ct&&Oe.call(o,"__wrapped__"),Qt=gt&&Oe.call(l,"__wrapped__");if(Ft||Qt){var Te=Ft?o.value():o,Jt=Qt?l.value():l;return C||(C=new Mr),b(Te,Jt,p,y,C)}}return St?(C||(C=new Mr),uP(o,l,p,y,b,C)):!1}function DA(o){return wn(o)&&si(o)==j}function zd(o,l,p,y){var b=p.length,C=b,M=!y;if(o==null)return!C;for(o=He(o);b--;){var B=p[b];if(M&&B[2]?B[1]!==o[B[0]]:!(B[0]in o))return!1}for(;++b<C;){B=p[b];var Z=B[0],ut=o[Z],ct=B[1];if(M&&B[2]){if(ut===e&&!(Z in o))return!1}else{var gt=new Mr;if(y)var St=y(ut,ct,Z,o,l,gt);if(!(St===e?Hl(ct,ut,z|q,y,gt):St))return!1}}return!0}function yg(o){if(!fn(o)||gP(o))return!1;var l=zs(o)?Or:bu;return l.test(Ga(o))}function NA(o){return wn(o)&&Ti(o)==yt}function VA(o){return wn(o)&&si(o)==dt}function FA(o){return wn(o)&&Ch(o.length)&&!!te[Ti(o)]}function wg(o){return typeof o=="function"?o:o==null?Ui:typeof o=="object"?he(o)?Ig(o[0],o[1]):Eg(o):Hv(o)}function Hd(o){if(!$l(o))return _(o);var l=[];for(var p in He(o))Oe.call(o,p)&&p!="constructor"&&l.push(p);return l}function UA(o){if(!fn(o))return TP(o);var l=$l(o),p=[];for(var y in o)y=="constructor"&&(l||!Oe.call(o,y))||p.push(y);return p}function Wd(o,l){return o<l}function Tg(o,l){var p=-1,y=Vi(o)?tt(o.length):[];return Lo(o,function(b,C,M){y[++p]=l(b,C,M)}),y}function Eg(o){var l=rp(o);return l.length==1&&l[0][2]?nv(l[0][0],l[0][1]):function(p){return p===o||zd(p,o,l)}}function Ig(o,l){return op(o)&&ev(l)?nv(ss(o),l):function(p){var y=_p(p,o);return y===e&&y===l?gp(p,o):Hl(l,y,z|q)}}function dh(o,l,p,y,b){o!==l&&Vd(l,function(C,M){if(b||(b=new Mr),fn(C))BA(o,l,M,p,dh,y,b);else{var B=y?y(up(o,M),C,M+"",o,l,b):e;B===e&&(B=C),Dd(o,M,B)}},Fi)}function BA(o,l,p,y,b,C,M){var B=up(o,p),Z=up(l,p),ut=M.get(Z);if(ut){Dd(o,p,ut);return}var ct=C?C(B,Z,p+"",o,l,M):e,gt=ct===e;if(gt){var St=he(Z),Ft=!St&&Do(Z),Qt=!St&&!Ft&&qu(Z);ct=Z,St||Ft||Qt?he(B)?ct=B:bn(B)?ct=Ni(B):Ft?(gt=!1,ct=Dg(Z,!0)):Qt?(gt=!1,ct=Ng(Z,!0)):ct=[]:Kl(Z)||Za(Z)?(ct=B,Za(B)?ct=Ov(B):(!fn(B)||zs(B))&&(ct=tv(Z))):gt=!1}gt&&(M.set(Z,ct),b(ct,Z,y,C,M),M.delete(Z)),Dd(o,p,ct)}function bg(o,l){var p=o.length;if(p)return l+=l<0?p:0,Bs(l,p)?o[l]:e}function Ag(o,l,p){l.length?l=ze(l,function(C){return he(C)?function(M){return ja(M,C.length===1?C[0]:C)}:C}):l=[Ui];var y=-1;l=ze(l,de(Zt()));var b=Tg(o,function(C,M,B){var Z=ze(l,function(ut){return ut(C)});return{criteria:Z,index:++y,value:C}});return et(b,function(C,M){return XA(C,M,p)})}function zA(o,l){return Pg(o,l,function(p,y){return gp(o,y)})}function Pg(o,l,p){for(var y=-1,b=l.length,C={};++y<b;){var M=l[y],B=ja(o,M);p(B,M)&&Wl(C,ko(M,o),B)}return C}function HA(o){return function(l){return ja(l,o)}}function qd(o,l,p,y){var b=y?ki:xr,C=-1,M=l.length,B=o;for(o===l&&(l=Ni(l)),p&&(B=ze(o,de(p)));++C<M;)for(var Z=0,ut=l[C],ct=p?p(ut):ut;(Z=b(B,ct,Z,y))>-1;)B!==o&&Va.call(B,Z,1),Va.call(o,Z,1);return o}function Sg(o,l){for(var p=o?l.length:0,y=p-1;p--;){var b=l[p];if(p==y||b!==C){var C=b;Bs(b)?Va.call(o,b,1):Gd(o,b)}}return o}function $d(o,l){return o+Ba(X()*(l-o+1))}function WA(o,l,p,y){for(var b=-1,C=T(Ua((l-o)/(p||1)),0),M=tt(C);C--;)M[y?C:++b]=o,o+=p;return M}function jd(o,l){var p="";if(!o||l<1||l>Tt)return p;do l%2&&(p+=o),l=Ba(l/2),l&&(o+=o);while(l);return p}function be(o,l){return lp(iv(o,l,Ui),o+"")}function qA(o){return cg($u(o))}function $A(o,l){var p=$u(o);return Ih(p,$a(l,0,p.length))}function Wl(o,l,p,y){if(!fn(o))return o;l=ko(l,o);for(var b=-1,C=l.length,M=C-1,B=o;B!=null&&++b<C;){var Z=ss(l[b]),ut=p;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return o;if(b!=M){var ct=B[Z];ut=y?y(ct,Z,B):e,ut===e&&(ut=fn(ct)?ct:Bs(l[b+1])?[]:{})}Ul(B,Z,ut),B=B[Z]}return o}var Rg=Dn?function(o,l){return Dn.set(o,l),o}:Ui,jA=Fa?function(o,l){return Fa(o,"toString",{configurable:!0,enumerable:!1,value:yp(l),writable:!0})}:Ui;function KA(o){return Ih($u(o))}function mr(o,l,p){var y=-1,b=o.length;l<0&&(l=-l>b?0:b+l),p=p>b?b:p,p<0&&(p+=b),b=l>p?0:p-l>>>0,l>>>=0;for(var C=tt(b);++y<b;)C[y]=o[y+l];return C}function GA(o,l){var p;return Lo(o,function(y,b,C){return p=l(y,b,C),!p}),!!p}function ph(o,l,p){var y=0,b=o==null?y:o.length;if(typeof l=="number"&&l===l&&b<=ye){for(;y<b;){var C=y+b>>>1,M=o[C];M!==null&&!Qi(M)&&(p?M<=l:M<l)?y=C+1:b=C}return b}return Kd(o,l,Ui,p)}function Kd(o,l,p,y){var b=0,C=o==null?0:o.length;if(C===0)return 0;l=p(l);for(var M=l!==l,B=l===null,Z=Qi(l),ut=l===e;b<C;){var ct=Ba((b+C)/2),gt=p(o[ct]),St=gt!==e,Ft=gt===null,Qt=gt===gt,Te=Qi(gt);if(M)var Jt=y||Qt;else ut?Jt=Qt&&(y||St):B?Jt=Qt&&St&&(y||!Ft):Z?Jt=Qt&&St&&!Ft&&(y||!Te):Ft||Te?Jt=!1:Jt=y?gt<=l:gt<l;Jt?b=ct+1:C=ct}return A(C,ve)}function Cg(o,l){for(var p=-1,y=o.length,b=0,C=[];++p<y;){var M=o[p],B=l?l(M):M;if(!p||!Dr(B,Z)){var Z=B;C[b++]=M===0?0:M}}return C}function xg(o){return typeof o=="number"?o:Qi(o)?Mt:+o}function Zi(o){if(typeof o=="string")return o;if(he(o))return ze(o,Zi)+"";if(Qi(o))return Ha?Ha.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}function Oo(o,l,p){var y=-1,b=Cr,C=o.length,M=!0,B=[],Z=B;if(p)M=!1,b=Jr;else if(C>=s){var ut=l?null:sP(o);if(ut)return Di(ut);M=!1,b=Mi,Z=new qa}else Z=l?[]:B;t:for(;++y<C;){var ct=o[y],gt=l?l(ct):ct;if(ct=p||ct!==0?ct:0,M&&gt===gt){for(var St=Z.length;St--;)if(Z[St]===gt)continue t;l&&Z.push(gt),B.push(ct)}else b(Z,gt,p)||(Z!==B&&Z.push(gt),B.push(ct))}return B}function Gd(o,l){return l=ko(l,o),o=rv(o,l),o==null||delete o[ss(_r(l))]}function Lg(o,l,p,y){return Wl(o,l,p(ja(o,l)),y)}function mh(o,l,p,y){for(var b=o.length,C=y?b:-1;(y?C--:++C<b)&&l(o[C],C,o););return p?mr(o,y?0:C,y?C+1:b):mr(o,y?C+1:0,y?b:C)}function Og(o,l){var p=o;return p instanceof Ie&&(p=p.value()),Ki(l,function(y,b){return b.func.apply(b.thisArg,Oi([y],b.args))},p)}function Zd(o,l,p){var y=o.length;if(y<2)return y?Oo(o[0]):[];for(var b=-1,C=tt(y);++b<y;)for(var M=o[b],B=-1;++B<y;)B!=b&&(C[b]=Bl(C[b]||M,o[B],l,p));return Oo(Gn(C,1),l,p)}function kg(o,l,p){for(var y=-1,b=o.length,C=l.length,M={};++y<b;){var B=y<C?l[y]:e;p(M,o[y],B)}return M}function Qd(o){return bn(o)?o:[]}function Jd(o){return typeof o=="function"?o:Ui}function ko(o,l){return he(o)?o:op(o,l)?[o]:uv(We(o))}var ZA=be;function Mo(o,l,p){var y=o.length;return p=p===e?y:p,!l&&p>=y?o:mr(o,l,p)}var Mg=ah||function(o){return un.clearTimeout(o)};function Dg(o,l){if(l)return o.slice();var p=o.length,y=sh?sh(p):new o.constructor(p);return o.copy(y),y}function Yd(o){var l=new o.constructor(o.byteLength);return new es(l).set(new es(o)),l}function QA(o,l){var p=l?Yd(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function JA(o){var l=new o.constructor(o.source,Ri.exec(o));return l.lastIndex=o.lastIndex,l}function YA(o){return tn?He(tn.call(o)):{}}function Ng(o,l){var p=l?Yd(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function Vg(o,l){if(o!==l){var p=o!==e,y=o===null,b=o===o,C=Qi(o),M=l!==e,B=l===null,Z=l===l,ut=Qi(l);if(!B&&!ut&&!C&&o>l||C&&M&&Z&&!B&&!ut||y&&M&&Z||!p&&Z||!b)return 1;if(!y&&!C&&!ut&&o<l||ut&&p&&b&&!y&&!C||B&&p&&b||!M&&b||!Z)return-1}return 0}function XA(o,l,p){for(var y=-1,b=o.criteria,C=l.criteria,M=b.length,B=p.length;++y<M;){var Z=Vg(b[y],C[y]);if(Z){if(y>=B)return Z;var ut=p[y];return Z*(ut=="desc"?-1:1)}}return o.index-l.index}function Fg(o,l,p,y){for(var b=-1,C=o.length,M=p.length,B=-1,Z=l.length,ut=T(C-M,0),ct=tt(Z+ut),gt=!y;++B<Z;)ct[B]=l[B];for(;++b<M;)(gt||b<C)&&(ct[p[b]]=o[b]);for(;ut--;)ct[B++]=o[b++];return ct}function Ug(o,l,p,y){for(var b=-1,C=o.length,M=-1,B=p.length,Z=-1,ut=l.length,ct=T(C-B,0),gt=tt(ct+ut),St=!y;++b<ct;)gt[b]=o[b];for(var Ft=b;++Z<ut;)gt[Ft+Z]=l[Z];for(;++M<B;)(St||b<C)&&(gt[Ft+p[M]]=o[b++]);return gt}function Ni(o,l){var p=-1,y=o.length;for(l||(l=tt(y));++p<y;)l[p]=o[p];return l}function rs(o,l,p,y){var b=!p;p||(p={});for(var C=-1,M=l.length;++C<M;){var B=l[C],Z=y?y(p[B],o[B],B,p,o):e;Z===e&&(Z=o[B]),b?Vs(p,B,Z):Ul(p,B,Z)}return p}function tP(o,l){return rs(o,sp(o),l)}function eP(o,l){return rs(o,Yg(o),l)}function _h(o,l){return function(p,y){var b=he(p)?Cs:IA,C=l?l():{};return b(p,o,Zt(y,2),C)}}function zu(o){return be(function(l,p){var y=-1,b=p.length,C=b>1?p[b-1]:e,M=b>2?p[2]:e;for(C=o.length>3&&typeof C=="function"?(b--,C):e,M&&Ei(p[0],p[1],M)&&(C=b<3?e:C,b=1),l=He(l);++y<b;){var B=p[y];B&&o(l,B,y,C)}return l})}function Bg(o,l){return function(p,y){if(p==null)return p;if(!Vi(p))return o(p,y);for(var b=p.length,C=l?b:-1,M=He(p);(l?C--:++C<b)&&y(M[C],C,M)!==!1;);return p}}function zg(o){return function(l,p,y){for(var b=-1,C=He(l),M=y(l),B=M.length;B--;){var Z=M[o?B:++b];if(p(C[Z],Z,C)===!1)break}return l}}function nP(o,l,p){var y=l&K,b=ql(o);function C(){var M=this&&this!==un&&this instanceof C?b:o;return M.apply(y?p:this,arguments)}return C}function Hg(o){return function(l){l=We(l);var p=bo(l)?ii(l):e,y=p?p[0]:l.charAt(0),b=p?Mo(p,1).join(""):l.slice(1);return y[o]()+b}}function Hu(o){return function(l){return Ki(Bv(Uv(l).replace(Be,"")),o,"")}}function ql(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var p=xo(o.prototype),y=o.apply(p,l);return fn(y)?y:p}}function iP(o,l,p){var y=ql(o);function b(){for(var C=arguments.length,M=tt(C),B=C,Z=Wu(b);B--;)M[B]=arguments[B];var ut=C<3&&M[0]!==Z&&M[C-1]!==Z?[]:ts(M,Z);if(C-=ut.length,C<p)return Kg(o,l,gh,b.placeholder,e,M,ut,e,e,p-C);var ct=this&&this!==un&&this instanceof b?y:o;return Qe(ct,this,M)}return b}function Wg(o){return function(l,p,y){var b=He(l);if(!Vi(l)){var C=Zt(p,3);l=$n(l),p=function(B){return C(b[B],B,b)}}var M=o(l,p,y);return M>-1?b[C?l[M]:M]:e}}function qg(o){return Us(function(l){var p=l.length,y=p,b=ri.prototype.thru;for(o&&l.reverse();y--;){var C=l[y];if(typeof C!="function")throw new Kn(c);if(b&&!M&&Th(C)=="wrapper")var M=new ri([],!0)}for(y=M?y:p;++y<p;){C=l[y];var B=Th(C),Z=B=="wrapper"?ip(C):e;Z&&ap(Z[0])&&Z[1]==(U|at|xt|O)&&!Z[4].length&&Z[9]==1?M=M[Th(Z[0])].apply(M,Z[3]):M=C.length==1&&ap(C)?M[B]():M.thru(C)}return function(){var ut=arguments,ct=ut[0];if(M&&ut.length==1&&he(ct))return M.plant(ct).value();for(var gt=0,St=p?l[gt].apply(this,ut):ct;++gt<p;)St=l[gt].call(this,St);return St}})}function gh(o,l,p,y,b,C,M,B,Z,ut){var ct=l&U,gt=l&K,St=l&ht,Ft=l&(at|vt),Qt=l&N,Te=St?e:ql(o);function Jt(){for(var Re=arguments.length,ke=tt(Re),Ji=Re;Ji--;)ke[Ji]=arguments[Ji];if(Ft)var Ii=Wu(Jt),Yi=fr(ke,Ii);if(y&&(ke=Fg(ke,y,b,Ft)),C&&(ke=Ug(ke,C,M,Ft)),Re-=Yi,Ft&&Re<ut){var An=ts(ke,Ii);return Kg(o,l,gh,Jt.placeholder,p,ke,An,B,Z,ut-Re)}var Nr=gt?p:this,Ws=St?Nr[o]:o;return Re=ke.length,B?ke=IP(ke,B):Qt&&Re>1&&ke.reverse(),ct&&Z<Re&&(ke.length=Z),this&&this!==un&&this instanceof Jt&&(Ws=Te||ql(Ws)),Ws.apply(Nr,ke)}return Jt}function $g(o,l){return function(p,y){return LA(p,o,l(y),{})}}function vh(o,l){return function(p,y){var b;if(p===e&&y===e)return l;if(p!==e&&(b=p),y!==e){if(b===e)return y;typeof p=="string"||typeof y=="string"?(p=Zi(p),y=Zi(y)):(p=xg(p),y=xg(y)),b=o(p,y)}return b}}function Xd(o){return Us(function(l){return l=ze(l,de(Zt())),be(function(p){var y=this;return o(l,function(b){return Qe(b,y,p)})})})}function yh(o,l){l=l===e?" ":Zi(l);var p=l.length;if(p<2)return p?jd(l,o):l;var y=jd(l,Ua(o/ni(l)));return bo(l)?Mo(ii(y),0,o).join(""):y.slice(0,o)}function rP(o,l,p,y){var b=l&K,C=ql(o);function M(){for(var B=-1,Z=arguments.length,ut=-1,ct=y.length,gt=tt(ct+Z),St=this&&this!==un&&this instanceof M?C:o;++ut<ct;)gt[ut]=y[ut];for(;Z--;)gt[ut++]=arguments[++B];return Qe(St,b?p:this,gt)}return M}function jg(o){return function(l,p,y){return y&&typeof y!="number"&&Ei(l,p,y)&&(p=y=e),l=Hs(l),p===e?(p=l,l=0):p=Hs(p),y=y===e?l<p?1:-1:Hs(y),WA(l,p,y,o)}}function wh(o){return function(l,p){return typeof l=="string"&&typeof p=="string"||(l=gr(l),p=gr(p)),o(l,p)}}function Kg(o,l,p,y,b,C,M,B,Z,ut){var ct=l&at,gt=ct?M:e,St=ct?e:M,Ft=ct?C:e,Qt=ct?e:C;l|=ct?xt:Ut,l&=~(ct?Ut:xt),l&lt||(l&=-4);var Te=[o,l,b,Ft,gt,Qt,St,B,Z,ut],Jt=p.apply(e,Te);return ap(o)&&sv(Jt,Te),Jt.placeholder=y,ov(Jt,o,l)}function tp(o){var l=In[o];return function(p,y){if(p=gr(p),y=y==null?0:A(ge(y),292),y&&u(p)){var b=(We(p)+"e").split("e"),C=l(b[0]+"e"+(+b[1]+y));return b=(We(C)+"e").split("e"),+(b[0]+"e"+(+b[1]-y))}return l(p)}}var sP=yn&&1/Di(new yn([,-0]))[1]==ae?function(o){return new yn(o)}:Ep;function Gg(o){return function(l){var p=si(l);return p==j?Ol(l):p==dt?Ad(l):vn(l,o(l))}}function Fs(o,l,p,y,b,C,M,B){var Z=l&ht;if(!Z&&typeof o!="function")throw new Kn(c);var ut=y?y.length:0;if(ut||(l&=-97,y=b=e),M=M===e?M:T(ge(M),0),B=B===e?B:ge(B),ut-=b?b.length:0,l&Ut){var ct=y,gt=b;y=b=e}var St=Z?e:ip(o),Ft=[o,l,p,y,b,ct,gt,C,M,B];if(St&&wP(Ft,St),o=Ft[0],l=Ft[1],p=Ft[2],y=Ft[3],b=Ft[4],B=Ft[9]=Ft[9]===e?Z?0:o.length:T(Ft[9]-ut,0),!B&&l&(at|vt)&&(l&=-25),!l||l==K)var Qt=nP(o,l,p);else l==at||l==vt?Qt=iP(o,l,B):(l==xt||l==(K|xt))&&!b.length?Qt=rP(o,l,p,y):Qt=gh.apply(e,Ft);var Te=St?Rg:sv;return ov(Te(Qt,Ft),o,l)}function Zg(o,l,p,y){return o===e||Dr(o,So[p])&&!Oe.call(y,p)?l:o}function Qg(o,l,p,y,b,C){return fn(o)&&fn(l)&&(C.set(l,o),dh(o,l,e,Qg,C),C.delete(l)),o}function oP(o){return Kl(o)?e:o}function Jg(o,l,p,y,b,C){var M=p&z,B=o.length,Z=l.length;if(B!=Z&&!(M&&Z>B))return!1;var ut=C.get(o),ct=C.get(l);if(ut&&ct)return ut==l&&ct==o;var gt=-1,St=!0,Ft=p&q?new qa:e;for(C.set(o,l),C.set(l,o);++gt<B;){var Qt=o[gt],Te=l[gt];if(y)var Jt=M?y(Te,Qt,gt,l,o,C):y(Qt,Te,gt,o,l,C);if(Jt!==e){if(Jt)continue;St=!1;break}if(Ft){if(!Yr(l,function(Re,ke){if(!Mi(Ft,ke)&&(Qt===Re||b(Qt,Re,p,y,C)))return Ft.push(ke)})){St=!1;break}}else if(!(Qt===Te||b(Qt,Te,p,y,C))){St=!1;break}}return C.delete(o),C.delete(l),St}function aP(o,l,p,y,b,C,M){switch(p){case le:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case Kt:return!(o.byteLength!=l.byteLength||!C(new es(o),new es(l)));case It:case bt:case st:return Dr(+o,+l);case _e:return o.name==l.name&&o.message==l.message;case yt:case Dt:return o==l+"";case j:var B=Ol;case dt:var Z=y&z;if(B||(B=Di),o.size!=l.size&&!Z)return!1;var ut=M.get(o);if(ut)return ut==l;y|=q,M.set(o,l);var ct=Jg(B(o),B(l),y,b,C,M);return M.delete(o),ct;case Pt:if(tn)return tn.call(o)==tn.call(l)}return!1}function uP(o,l,p,y,b,C){var M=p&z,B=ep(o),Z=B.length,ut=ep(l),ct=ut.length;if(Z!=ct&&!M)return!1;for(var gt=Z;gt--;){var St=B[gt];if(!(M?St in l:Oe.call(l,St)))return!1}var Ft=C.get(o),Qt=C.get(l);if(Ft&&Qt)return Ft==l&&Qt==o;var Te=!0;C.set(o,l),C.set(l,o);for(var Jt=M;++gt<Z;){St=B[gt];var Re=o[St],ke=l[St];if(y)var Ji=M?y(ke,Re,St,l,o,C):y(Re,ke,St,o,l,C);if(!(Ji===e?Re===ke||b(Re,ke,p,y,C):Ji)){Te=!1;break}Jt||(Jt=St=="constructor")}if(Te&&!Jt){var Ii=o.constructor,Yi=l.constructor;Ii!=Yi&&"constructor"in o&&"constructor"in l&&!(typeof Ii=="function"&&Ii instanceof Ii&&typeof Yi=="function"&&Yi instanceof Yi)&&(Te=!1)}return C.delete(o),C.delete(l),Te}function Us(o){return lp(iv(o,e,fv),o+"")}function ep(o){return gg(o,$n,sp)}function np(o){return gg(o,Fi,Yg)}var ip=Dn?function(o){return Dn.get(o)}:Ep;function Th(o){for(var l=o.name+"",p=Gi[l],y=Oe.call(Gi,l)?p.length:0;y--;){var b=p[y],C=b.func;if(C==null||C==o)return b.name}return l}function Wu(o){var l=Oe.call(P,"placeholder")?P:o;return l.placeholder}function Zt(){var o=P.iteratee||wp;return o=o===wp?wg:o,arguments.length?o(arguments[0],arguments[1]):o}function Eh(o,l){var p=o.__data__;return _P(l)?p[typeof l=="string"?"string":"hash"]:p.map}function rp(o){for(var l=$n(o),p=l.length;p--;){var y=l[p],b=o[y];l[p]=[y,b,ev(b)]}return l}function Ka(o,l){var p=Ou(o,l);return yg(p)?p:e}function lP(o){var l=Oe.call(o,ns),p=o[ns];try{o[ns]=e;var y=!0}catch{}var b=Da.call(o);return y&&(l?o[ns]=p:delete o[ns]),b}var sp=Fl?function(o){return o==null?[]:(o=He(o),yi(Fl(o),function(l){return Vl.call(o,l)}))}:Ip,Yg=Fl?function(o){for(var l=[];o;)Oi(l,sp(o)),o=Ms(o);return l}:Ip,si=Ti;(Rt&&si(new Rt(new ArrayBuffer(1)))!=le||Ht&&si(new Ht)!=j||pe&&si(pe.resolve())!=At||yn&&si(new yn)!=dt||cn&&si(new cn)!=zt)&&(si=function(o){var l=Ti(o),p=l==ot?o.constructor:e,y=p?Ga(p):"";if(y)switch(y){case xd:return le;case Ld:return j;case Od:return At;case lh:return dt;case kd:return zt}return l});function cP(o,l,p){for(var y=-1,b=p.length;++y<b;){var C=p[y],M=C.size;switch(C.type){case"drop":o+=M;break;case"dropRight":l-=M;break;case"take":l=A(l,o+M);break;case"takeRight":o=T(o,l-M);break}}return{start:o,end:l}}function hP(o){var l=o.match(Ar);return l?l[1].split(Tu):[]}function Xg(o,l,p){l=ko(l,o);for(var y=-1,b=l.length,C=!1;++y<b;){var M=ss(l[y]);if(!(C=o!=null&&p(o,M)))break;o=o[M]}return C||++y!=b?C:(b=o==null?0:o.length,!!b&&Ch(b)&&Bs(M,b)&&(he(o)||Za(o)))}function fP(o){var l=o.length,p=new o.constructor(l);return l&&typeof o[0]=="string"&&Oe.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function tv(o){return typeof o.constructor=="function"&&!$l(o)?xo(Ms(o)):{}}function dP(o,l,p){var y=o.constructor;switch(l){case Kt:return Yd(o);case It:case bt:return new y(+o);case le:return QA(o,p);case mn:case on:case kn:case _n:case _i:case Wi:case an:case Bn:case Pi:return Ng(o,p);case j:return new y;case st:case Dt:return new y(o);case yt:return JA(o);case dt:return new y;case Pt:return YA(o)}}function pP(o,l){var p=l.length;if(!p)return o;var y=p-1;return l[y]=(p>1?"& ":"")+l[y],l=l.join(p>2?", ":" "),o.replace(Vt,`{
/* [wrapped with `+l+`] */
`)}function mP(o){return he(o)||Za(o)||!!(oh&&o&&o[oh])}function Bs(o,l){var p=typeof o;return l=l??Tt,!!l&&(p=="number"||p!="symbol"&&_a.test(o))&&o>-1&&o%1==0&&o<l}function Ei(o,l,p){if(!fn(p))return!1;var y=typeof l;return(y=="number"?Vi(p)&&Bs(l,p.length):y=="string"&&l in p)?Dr(p[l],o):!1}function op(o,l){if(he(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Qi(o)?!0:co.test(o)||!ws.test(o)||l!=null&&o in He(l)}function _P(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function ap(o){var l=Th(o),p=P[l];if(typeof p!="function"||!(l in Ie.prototype))return!1;if(o===p)return!0;var y=ip(p);return!!y&&o===y[0]}function gP(o){return!!ks&&ks in o}var vP=Ma?zs:bp;function $l(o){var l=o&&o.constructor,p=typeof l=="function"&&l.prototype||So;return o===p}function ev(o){return o===o&&!fn(o)}function nv(o,l){return function(p){return p==null?!1:p[o]===l&&(l!==e||o in He(p))}}function yP(o){var l=Sh(o,function(y){return p.size===g&&p.clear(),y}),p=l.cache;return l}function wP(o,l){var p=o[1],y=l[1],b=p|y,C=b<(K|ht|U),M=y==U&&p==at||y==U&&p==O&&o[7].length<=l[8]||y==(U|O)&&l[7].length<=l[8]&&p==at;if(!(C||M))return o;y&K&&(o[2]=l[2],b|=p&K?0:lt);var B=l[3];if(B){var Z=o[3];o[3]=Z?Fg(Z,B,l[4]):B,o[4]=Z?ts(o[3],w):l[4]}return B=l[5],B&&(Z=o[5],o[5]=Z?Ug(Z,B,l[6]):B,o[6]=Z?ts(o[5],w):l[6]),B=l[7],B&&(o[7]=B),y&U&&(o[8]=o[8]==null?l[8]:A(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=b,o}function TP(o){var l=[];if(o!=null)for(var p in He(o))l.push(p);return l}function EP(o){return Da.call(o)}function iv(o,l,p){return l=T(l===e?o.length-1:l,0),function(){for(var y=arguments,b=-1,C=T(y.length-l,0),M=tt(C);++b<C;)M[b]=y[l+b];b=-1;for(var B=tt(l+1);++b<l;)B[b]=y[b];return B[l]=p(M),Qe(o,this,B)}}function rv(o,l){return l.length<2?o:ja(o,mr(l,0,-1))}function IP(o,l){for(var p=o.length,y=A(l.length,p),b=Ni(o);y--;){var C=l[y];o[y]=Bs(C,p)?b[C]:e}return o}function up(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var sv=av(Rg),jl=Cd||function(o,l){return un.setTimeout(o,l)},lp=av(jA);function ov(o,l,p){var y=l+"";return lp(o,pP(y,bP(hP(y),p)))}function av(o){var l=0,p=0;return function(){var y=F(),b=V-(y-p);if(p=y,b>0){if(++l>=G)return arguments[0]}else l=0;return o.apply(e,arguments)}}function Ih(o,l){var p=-1,y=o.length,b=y-1;for(l=l===e?y:l;++p<l;){var C=$d(p,b),M=o[C];o[C]=o[p],o[p]=M}return o.length=l,o}var uv=yP(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(Mn,function(p,y,b,C){l.push(b?C.replace(fo,"$1"):y||p)}),l});function ss(o){if(typeof o=="string"||Qi(o))return o;var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}function Ga(o){if(o!=null){try{return Uu.call(o)}catch{}try{return o+""}catch{}}return""}function bP(o,l){return Wn(Fe,function(p){var y="_."+p[0];l&p[1]&&!Cr(o,y)&&o.push(y)}),o.sort()}function lv(o){if(o instanceof Ie)return o.clone();var l=new ri(o.__wrapped__,o.__chain__);return l.__actions__=Ni(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function AP(o,l,p){(p?Ei(o,l,p):l===e)?l=1:l=T(ge(l),0);var y=o==null?0:o.length;if(!y||l<1)return[];for(var b=0,C=0,M=tt(Ua(y/l));b<y;)M[C++]=mr(o,b,b+=l);return M}function PP(o){for(var l=-1,p=o==null?0:o.length,y=0,b=[];++l<p;){var C=o[l];C&&(b[y++]=C)}return b}function SP(){var o=arguments.length;if(!o)return[];for(var l=tt(o-1),p=arguments[0],y=o;y--;)l[y-1]=arguments[y];return Oi(he(p)?Ni(p):[p],Gn(l,1))}var RP=be(function(o,l){return bn(o)?Bl(o,Gn(l,1,bn,!0)):[]}),CP=be(function(o,l){var p=_r(l);return bn(p)&&(p=e),bn(o)?Bl(o,Gn(l,1,bn,!0),Zt(p,2)):[]}),xP=be(function(o,l){var p=_r(l);return bn(p)&&(p=e),bn(o)?Bl(o,Gn(l,1,bn,!0),e,p):[]});function LP(o,l,p){var y=o==null?0:o.length;return y?(l=p||l===e?1:ge(l),mr(o,l<0?0:l,y)):[]}function OP(o,l,p){var y=o==null?0:o.length;return y?(l=p||l===e?1:ge(l),l=y-l,mr(o,0,l<0?0:l)):[]}function kP(o,l){return o&&o.length?mh(o,Zt(l,3),!0,!0):[]}function MP(o,l){return o&&o.length?mh(o,Zt(l,3),!0):[]}function DP(o,l,p,y){var b=o==null?0:o.length;return b?(p&&typeof p!="number"&&Ei(o,l,p)&&(p=0,y=b),SA(o,l,p,y)):[]}function cv(o,l,p){var y=o==null?0:o.length;if(!y)return-1;var b=p==null?0:ge(p);return b<0&&(b=T(y+b,0)),wi(o,Zt(l,3),b)}function hv(o,l,p){var y=o==null?0:o.length;if(!y)return-1;var b=y-1;return p!==e&&(b=ge(p),b=p<0?T(y+b,0):A(b,y-1)),wi(o,Zt(l,3),b,!0)}function fv(o){var l=o==null?0:o.length;return l?Gn(o,1):[]}function NP(o){var l=o==null?0:o.length;return l?Gn(o,ae):[]}function VP(o,l){var p=o==null?0:o.length;return p?(l=l===e?1:ge(l),Gn(o,l)):[]}function FP(o){for(var l=-1,p=o==null?0:o.length,y={};++l<p;){var b=o[l];y[b[0]]=b[1]}return y}function dv(o){return o&&o.length?o[0]:e}function UP(o,l,p){var y=o==null?0:o.length;if(!y)return-1;var b=p==null?0:ge(p);return b<0&&(b=T(y+b,0)),xr(o,l,b)}function BP(o){var l=o==null?0:o.length;return l?mr(o,0,-1):[]}var zP=be(function(o){var l=ze(o,Qd);return l.length&&l[0]===o[0]?Bd(l):[]}),HP=be(function(o){var l=_r(o),p=ze(o,Qd);return l===_r(p)?l=e:p.pop(),p.length&&p[0]===o[0]?Bd(p,Zt(l,2)):[]}),WP=be(function(o){var l=_r(o),p=ze(o,Qd);return l=typeof l=="function"?l:e,l&&p.pop(),p.length&&p[0]===o[0]?Bd(p,e,l):[]});function qP(o,l){return o==null?"":f.call(o,l)}function _r(o){var l=o==null?0:o.length;return l?o[l-1]:e}function $P(o,l,p){var y=o==null?0:o.length;if(!y)return-1;var b=y;return p!==e&&(b=ge(p),b=b<0?T(y+b,0):A(b,y-1)),l===l?Pd(o,l,b):wi(o,h,b,!0)}function jP(o,l){return o&&o.length?bg(o,ge(l)):e}var KP=be(pv);function pv(o,l){return o&&o.length&&l&&l.length?qd(o,l):o}function GP(o,l,p){return o&&o.length&&l&&l.length?qd(o,l,Zt(p,2)):o}function ZP(o,l,p){return o&&o.length&&l&&l.length?qd(o,l,e,p):o}var QP=Us(function(o,l){var p=o==null?0:o.length,y=Nd(o,l);return Sg(o,ze(l,function(b){return Bs(b,p)?+b:b}).sort(Vg)),y});function JP(o,l){var p=[];if(!(o&&o.length))return p;var y=-1,b=[],C=o.length;for(l=Zt(l,3);++y<C;){var M=o[y];l(M,y,o)&&(p.push(M),b.push(y))}return Sg(o,b),p}function cp(o){return o==null?o:_t.call(o)}function YP(o,l,p){var y=o==null?0:o.length;return y?(p&&typeof p!="number"&&Ei(o,l,p)?(l=0,p=y):(l=l==null?0:ge(l),p=p===e?y:ge(p)),mr(o,l,p)):[]}function XP(o,l){return ph(o,l)}function tS(o,l,p){return Kd(o,l,Zt(p,2))}function eS(o,l){var p=o==null?0:o.length;if(p){var y=ph(o,l);if(y<p&&Dr(o[y],l))return y}return-1}function nS(o,l){return ph(o,l,!0)}function iS(o,l,p){return Kd(o,l,Zt(p,2),!0)}function rS(o,l){var p=o==null?0:o.length;if(p){var y=ph(o,l,!0)-1;if(Dr(o[y],l))return y}return-1}function sS(o){return o&&o.length?Cg(o):[]}function oS(o,l){return o&&o.length?Cg(o,Zt(l,2)):[]}function aS(o){var l=o==null?0:o.length;return l?mr(o,1,l):[]}function uS(o,l,p){return o&&o.length?(l=p||l===e?1:ge(l),mr(o,0,l<0?0:l)):[]}function lS(o,l,p){var y=o==null?0:o.length;return y?(l=p||l===e?1:ge(l),l=y-l,mr(o,l<0?0:l,y)):[]}function cS(o,l){return o&&o.length?mh(o,Zt(l,3),!1,!0):[]}function hS(o,l){return o&&o.length?mh(o,Zt(l,3)):[]}var fS=be(function(o){return Oo(Gn(o,1,bn,!0))}),dS=be(function(o){var l=_r(o);return bn(l)&&(l=e),Oo(Gn(o,1,bn,!0),Zt(l,2))}),pS=be(function(o){var l=_r(o);return l=typeof l=="function"?l:e,Oo(Gn(o,1,bn,!0),e,l)});function mS(o){return o&&o.length?Oo(o):[]}function _S(o,l){return o&&o.length?Oo(o,Zt(l,2)):[]}function gS(o,l){return l=typeof l=="function"?l:e,o&&o.length?Oo(o,e,l):[]}function hp(o){if(!(o&&o.length))return[];var l=0;return o=yi(o,function(p){if(bn(p))return l=T(p.length,l),!0}),Ve(l,function(p){return ze(o,I(p))})}function mv(o,l){if(!(o&&o.length))return[];var p=hp(o);return l==null?p:ze(p,function(y){return Qe(l,e,y)})}var vS=be(function(o,l){return bn(o)?Bl(o,l):[]}),yS=be(function(o){return Zd(yi(o,bn))}),wS=be(function(o){var l=_r(o);return bn(l)&&(l=e),Zd(yi(o,bn),Zt(l,2))}),TS=be(function(o){var l=_r(o);return l=typeof l=="function"?l:e,Zd(yi(o,bn),e,l)}),ES=be(hp);function IS(o,l){return kg(o||[],l||[],Ul)}function bS(o,l){return kg(o||[],l||[],Wl)}var AS=be(function(o){var l=o.length,p=l>1?o[l-1]:e;return p=typeof p=="function"?(o.pop(),p):e,mv(o,p)});function _v(o){var l=P(o);return l.__chain__=!0,l}function PS(o,l){return l(o),o}function bh(o,l){return l(o)}var SS=Us(function(o){var l=o.length,p=l?o[0]:0,y=this.__wrapped__,b=function(C){return Nd(C,o)};return l>1||this.__actions__.length||!(y instanceof Ie)||!Bs(p)?this.thru(b):(y=y.slice(p,+p+(l?1:0)),y.__actions__.push({func:bh,args:[b],thisArg:e}),new ri(y,this.__chain__).thru(function(C){return l&&!C.length&&C.push(e),C}))});function RS(){return _v(this)}function CS(){return new ri(this.value(),this.__chain__)}function xS(){this.__values__===e&&(this.__values__=xv(this.value()));var o=this.__index__>=this.__values__.length,l=o?e:this.__values__[this.__index__++];return{done:o,value:l}}function LS(){return this}function OS(o){for(var l,p=this;p instanceof Bu;){var y=lv(p);y.__index__=0,y.__values__=e,l?b.__wrapped__=y:l=y;var b=y;p=p.__wrapped__}return b.__wrapped__=o,l}function kS(){var o=this.__wrapped__;if(o instanceof Ie){var l=o;return this.__actions__.length&&(l=new Ie(this)),l=l.reverse(),l.__actions__.push({func:bh,args:[cp],thisArg:e}),new ri(l,this.__chain__)}return this.thru(cp)}function MS(){return Og(this.__wrapped__,this.__actions__)}var DS=_h(function(o,l,p){Oe.call(o,p)?++o[p]:Vs(o,p,1)});function NS(o,l,p){var y=he(o)?xs:PA;return p&&Ei(o,l,p)&&(l=e),y(o,Zt(l,3))}function VS(o,l){var p=he(o)?yi:mg;return p(o,Zt(l,3))}var FS=Wg(cv),US=Wg(hv);function BS(o,l){return Gn(Ah(o,l),1)}function zS(o,l){return Gn(Ah(o,l),ae)}function HS(o,l,p){return p=p===e?1:ge(p),Gn(Ah(o,l),p)}function gv(o,l){var p=he(o)?Wn:Lo;return p(o,Zt(l,3))}function vv(o,l){var p=he(o)?ji:pg;return p(o,Zt(l,3))}var WS=_h(function(o,l,p){Oe.call(o,p)?o[p].push(l):Vs(o,p,[l])});function qS(o,l,p,y){o=Vi(o)?o:$u(o),p=p&&!y?ge(p):0;var b=o.length;return p<0&&(p=T(b+p,0)),xh(o)?p<=b&&o.indexOf(l,p)>-1:!!b&&xr(o,l,p)>-1}var $S=be(function(o,l,p){var y=-1,b=typeof l=="function",C=Vi(o)?tt(o.length):[];return Lo(o,function(M){C[++y]=b?Qe(l,M,p):zl(M,l,p)}),C}),jS=_h(function(o,l,p){Vs(o,p,l)});function Ah(o,l){var p=he(o)?ze:Tg;return p(o,Zt(l,3))}function KS(o,l,p,y){return o==null?[]:(he(l)||(l=l==null?[]:[l]),p=y?e:p,he(p)||(p=p==null?[]:[p]),Ag(o,l,p))}var GS=_h(function(o,l,p){o[p?0:1].push(l)},function(){return[[],[]]});function ZS(o,l,p){var y=he(o)?Ki:Q,b=arguments.length<3;return y(o,Zt(l,4),p,b,Lo)}function QS(o,l,p){var y=he(o)?xu:Q,b=arguments.length<3;return y(o,Zt(l,4),p,b,pg)}function JS(o,l){var p=he(o)?yi:mg;return p(o,Rh(Zt(l,3)))}function YS(o){var l=he(o)?cg:qA;return l(o)}function XS(o,l,p){(p?Ei(o,l,p):l===e)?l=1:l=ge(l);var y=he(o)?TA:$A;return y(o,l)}function tR(o){var l=he(o)?EA:KA;return l(o)}function eR(o){if(o==null)return 0;if(Vi(o))return xh(o)?ni(o):o.length;var l=si(o);return l==j||l==dt?o.size:Hd(o).length}function nR(o,l,p){var y=he(o)?Yr:GA;return p&&Ei(o,l,p)&&(l=e),y(o,Zt(l,3))}var iR=be(function(o,l){if(o==null)return[];var p=l.length;return p>1&&Ei(o,l[0],l[1])?l=[]:p>2&&Ei(l[0],l[1],l[2])&&(l=[l[0]]),Ag(o,Gn(l,1),[])}),Ph=uh||function(){return un.Date.now()};function rR(o,l){if(typeof l!="function")throw new Kn(c);return o=ge(o),function(){if(--o<1)return l.apply(this,arguments)}}function yv(o,l,p){return l=p?e:l,l=o&&l==null?o.length:l,Fs(o,U,e,e,e,e,l)}function wv(o,l){var p;if(typeof l!="function")throw new Kn(c);return o=ge(o),function(){return--o>0&&(p=l.apply(this,arguments)),o<=1&&(l=e),p}}var fp=be(function(o,l,p){var y=K;if(p.length){var b=ts(p,Wu(fp));y|=xt}return Fs(o,y,l,p,b)}),Tv=be(function(o,l,p){var y=K|ht;if(p.length){var b=ts(p,Wu(Tv));y|=xt}return Fs(l,y,o,p,b)});function Ev(o,l,p){l=p?e:l;var y=Fs(o,at,e,e,e,e,e,l);return y.placeholder=Ev.placeholder,y}function Iv(o,l,p){l=p?e:l;var y=Fs(o,vt,e,e,e,e,e,l);return y.placeholder=Iv.placeholder,y}function bv(o,l,p){var y,b,C,M,B,Z,ut=0,ct=!1,gt=!1,St=!0;if(typeof o!="function")throw new Kn(c);l=gr(l)||0,fn(p)&&(ct=!!p.leading,gt="maxWait"in p,C=gt?T(gr(p.maxWait)||0,l):C,St="trailing"in p?!!p.trailing:St);function Ft(An){var Nr=y,Ws=b;return y=b=e,ut=An,M=o.apply(Ws,Nr),M}function Qt(An){return ut=An,B=jl(Re,l),ct?Ft(An):M}function Te(An){var Nr=An-Z,Ws=An-ut,Wv=l-Nr;return gt?A(Wv,C-Ws):Wv}function Jt(An){var Nr=An-Z,Ws=An-ut;return Z===e||Nr>=l||Nr<0||gt&&Ws>=C}function Re(){var An=Ph();if(Jt(An))return ke(An);B=jl(Re,Te(An))}function ke(An){return B=e,St&&y?Ft(An):(y=b=e,M)}function Ji(){B!==e&&Mg(B),ut=0,y=Z=b=B=e}function Ii(){return B===e?M:ke(Ph())}function Yi(){var An=Ph(),Nr=Jt(An);if(y=arguments,b=this,Z=An,Nr){if(B===e)return Qt(Z);if(gt)return Mg(B),B=jl(Re,l),Ft(Z)}return B===e&&(B=jl(Re,l)),M}return Yi.cancel=Ji,Yi.flush=Ii,Yi}var sR=be(function(o,l){return dg(o,1,l)}),oR=be(function(o,l,p){return dg(o,gr(l)||0,p)});function aR(o){return Fs(o,N)}function Sh(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new Kn(c);var p=function(){var y=arguments,b=l?l.apply(this,y):y[0],C=p.cache;if(C.has(b))return C.get(b);var M=o.apply(this,y);return p.cache=C.set(b,M)||C,M};return p.cache=new(Sh.Cache||Ns),p}Sh.Cache=Ns;function Rh(o){if(typeof o!="function")throw new Kn(c);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function uR(o){return wv(2,o)}var lR=ZA(function(o,l){l=l.length==1&&he(l[0])?ze(l[0],de(Zt())):ze(Gn(l,1),de(Zt()));var p=l.length;return be(function(y){for(var b=-1,C=A(y.length,p);++b<C;)y[b]=l[b].call(this,y[b]);return Qe(o,this,y)})}),dp=be(function(o,l){var p=ts(l,Wu(dp));return Fs(o,xt,e,l,p)}),Av=be(function(o,l){var p=ts(l,Wu(Av));return Fs(o,Ut,e,l,p)}),cR=Us(function(o,l){return Fs(o,O,e,e,e,l)});function hR(o,l){if(typeof o!="function")throw new Kn(c);return l=l===e?l:ge(l),be(o,l)}function fR(o,l){if(typeof o!="function")throw new Kn(c);return l=l==null?0:T(ge(l),0),be(function(p){var y=p[l],b=Mo(p,0,l);return y&&Oi(b,y),Qe(o,this,b)})}function dR(o,l,p){var y=!0,b=!0;if(typeof o!="function")throw new Kn(c);return fn(p)&&(y="leading"in p?!!p.leading:y,b="trailing"in p?!!p.trailing:b),bv(o,l,{leading:y,maxWait:l,trailing:b})}function pR(o){return yv(o,1)}function mR(o,l){return dp(Jd(l),o)}function _R(){if(!arguments.length)return[];var o=arguments[0];return he(o)?o:[o]}function gR(o){return pr(o,x)}function vR(o,l){return l=typeof l=="function"?l:e,pr(o,x,l)}function yR(o){return pr(o,E|x)}function wR(o,l){return l=typeof l=="function"?l:e,pr(o,E|x,l)}function TR(o,l){return l==null||fg(o,l,$n(l))}function Dr(o,l){return o===l||o!==o&&l!==l}var ER=wh(Ud),IR=wh(function(o,l){return o>=l}),Za=vg(function(){return arguments}())?vg:function(o){return wn(o)&&Oe.call(o,"callee")&&!Vl.call(o,"callee")},he=tt.isArray,bR=xa?de(xa):OA;function Vi(o){return o!=null&&Ch(o.length)&&!zs(o)}function bn(o){return wn(o)&&Vi(o)}function AR(o){return o===!0||o===!1||wn(o)&&Ti(o)==It}var Do=r||bp,PR=Ss?de(Ss):kA;function SR(o){return wn(o)&&o.nodeType===1&&!Kl(o)}function RR(o){if(o==null)return!0;if(Vi(o)&&(he(o)||typeof o=="string"||typeof o.splice=="function"||Do(o)||qu(o)||Za(o)))return!o.length;var l=si(o);if(l==j||l==dt)return!o.size;if($l(o))return!Hd(o).length;for(var p in o)if(Oe.call(o,p))return!1;return!0}function CR(o,l){return Hl(o,l)}function xR(o,l,p){p=typeof p=="function"?p:e;var y=p?p(o,l):e;return y===e?Hl(o,l,e,p):!!y}function pp(o){if(!wn(o))return!1;var l=Ti(o);return l==_e||l==Lt||typeof o.message=="string"&&typeof o.name=="string"&&!Kl(o)}function LR(o){return typeof o=="number"&&u(o)}function zs(o){if(!fn(o))return!1;var l=Ti(o);return l==k||l==D||l==it||l==Et}function Pv(o){return typeof o=="number"&&o==ge(o)}function Ch(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Tt}function fn(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function wn(o){return o!=null&&typeof o=="object"}var Sv=Rs?de(Rs):DA;function OR(o,l){return o===l||zd(o,l,rp(l))}function kR(o,l,p){return p=typeof p=="function"?p:e,zd(o,l,rp(l),p)}function MR(o){return Rv(o)&&o!=+o}function DR(o){if(vP(o))throw new oe(a);return yg(o)}function NR(o){return o===null}function VR(o){return o==null}function Rv(o){return typeof o=="number"||wn(o)&&Ti(o)==st}function Kl(o){if(!wn(o)||Ti(o)!=ot)return!1;var l=Ms(o);if(l===null)return!0;var p=Oe.call(l,"constructor")&&l.constructor;return typeof p=="function"&&p instanceof p&&Uu.call(p)==rh}var mp=La?de(La):NA;function FR(o){return Pv(o)&&o>=-9007199254740991&&o<=Tt}var Cv=Rr?de(Rr):VA;function xh(o){return typeof o=="string"||!he(o)&&wn(o)&&Ti(o)==Dt}function Qi(o){return typeof o=="symbol"||wn(o)&&Ti(o)==Pt}var qu=Cu?de(Cu):FA;function UR(o){return o===e}function BR(o){return wn(o)&&si(o)==zt}function zR(o){return wn(o)&&Ti(o)==Bt}var HR=wh(Wd),WR=wh(function(o,l){return o<=l});function xv(o){if(!o)return[];if(Vi(o))return xh(o)?ii(o):Ni(o);if(Co&&o[Co])return ku(o[Co]());var l=si(o),p=l==j?Ol:l==dt?Di:$u;return p(o)}function Hs(o){if(!o)return o===0?o:0;if(o=gr(o),o===ae||o===-1/0){var l=o<0?-1:1;return l*Un}return o===o?o:0}function ge(o){var l=Hs(o),p=l%1;return l===l?p?l-p:l:0}function Lv(o){return o?$a(ge(o),0,ie):0}function gr(o){if(typeof o=="number")return o;if(Qi(o))return Mt;if(fn(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=fn(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=Se(o);var p=Iu.test(o);return p||ma.test(o)?Ru(o.slice(2),p?2:8):qi.test(o)?Mt:+o}function Ov(o){return rs(o,Fi(o))}function qR(o){return o?$a(ge(o),-9007199254740991,Tt):o===0?o:0}function We(o){return o==null?"":Zi(o)}var $R=zu(function(o,l){if($l(l)||Vi(l)){rs(l,$n(l),o);return}for(var p in l)Oe.call(l,p)&&Ul(o,p,l[p])}),kv=zu(function(o,l){rs(l,Fi(l),o)}),Lh=zu(function(o,l,p,y){rs(l,Fi(l),o,y)}),jR=zu(function(o,l,p,y){rs(l,$n(l),o,y)}),KR=Us(Nd);function GR(o,l){var p=xo(o);return l==null?p:hg(p,l)}var ZR=be(function(o,l){o=He(o);var p=-1,y=l.length,b=y>2?l[2]:e;for(b&&Ei(l[0],l[1],b)&&(y=1);++p<y;)for(var C=l[p],M=Fi(C),B=-1,Z=M.length;++B<Z;){var ut=M[B],ct=o[ut];(ct===e||Dr(ct,So[ut])&&!Oe.call(o,ut))&&(o[ut]=C[ut])}return o}),QR=be(function(o){return o.push(e,Qg),Qe(Mv,e,o)});function JR(o,l){return En(o,Zt(l,3),is)}function YR(o,l){return En(o,Zt(l,3),Fd)}function XR(o,l){return o==null?o:Vd(o,Zt(l,3),Fi)}function tC(o,l){return o==null?o:_g(o,Zt(l,3),Fi)}function eC(o,l){return o&&is(o,Zt(l,3))}function nC(o,l){return o&&Fd(o,Zt(l,3))}function iC(o){return o==null?[]:fh(o,$n(o))}function rC(o){return o==null?[]:fh(o,Fi(o))}function _p(o,l,p){var y=o==null?e:ja(o,l);return y===e?p:y}function sC(o,l){return o!=null&&Xg(o,l,RA)}function gp(o,l){return o!=null&&Xg(o,l,CA)}var oC=$g(function(o,l,p){l!=null&&typeof l.toString!="function"&&(l=Da.call(l)),o[l]=p},yp(Ui)),aC=$g(function(o,l,p){l!=null&&typeof l.toString!="function"&&(l=Da.call(l)),Oe.call(o,l)?o[l].push(p):o[l]=[p]},Zt),uC=be(zl);function $n(o){return Vi(o)?lg(o):Hd(o)}function Fi(o){return Vi(o)?lg(o,!0):UA(o)}function lC(o,l){var p={};return l=Zt(l,3),is(o,function(y,b,C){Vs(p,l(y,b,C),y)}),p}function cC(o,l){var p={};return l=Zt(l,3),is(o,function(y,b,C){Vs(p,b,l(y,b,C))}),p}var hC=zu(function(o,l,p){dh(o,l,p)}),Mv=zu(function(o,l,p,y){dh(o,l,p,y)}),fC=Us(function(o,l){var p={};if(o==null)return p;var y=!1;l=ze(l,function(C){return C=ko(C,o),y||(y=C.length>1),C}),rs(o,np(o),p),y&&(p=pr(p,E|S|x,oP));for(var b=l.length;b--;)Gd(p,l[b]);return p});function dC(o,l){return Dv(o,Rh(Zt(l)))}var pC=Us(function(o,l){return o==null?{}:zA(o,l)});function Dv(o,l){if(o==null)return{};var p=ze(np(o),function(y){return[y]});return l=Zt(l),Pg(o,p,function(y,b){return l(y,b[0])})}function mC(o,l,p){l=ko(l,o);var y=-1,b=l.length;for(b||(b=1,o=e);++y<b;){var C=o==null?e:o[ss(l[y])];C===e&&(y=b,C=p),o=zs(C)?C.call(o):C}return o}function _C(o,l,p){return o==null?o:Wl(o,l,p)}function gC(o,l,p,y){return y=typeof y=="function"?y:e,o==null?o:Wl(o,l,p,y)}var Nv=Gg($n),Vv=Gg(Fi);function vC(o,l,p){var y=he(o),b=y||Do(o)||qu(o);if(l=Zt(l,4),p==null){var C=o&&o.constructor;b?p=y?new C:[]:fn(o)?p=zs(C)?xo(Ms(o)):{}:p={}}return(b?Wn:is)(o,function(M,B,Z){return l(p,M,B,Z)}),p}function yC(o,l){return o==null?!0:Gd(o,l)}function wC(o,l,p){return o==null?o:Lg(o,l,Jd(p))}function TC(o,l,p,y){return y=typeof y=="function"?y:e,o==null?o:Lg(o,l,Jd(p),y)}function $u(o){return o==null?[]:Je(o,$n(o))}function EC(o){return o==null?[]:Je(o,Fi(o))}function IC(o,l,p){return p===e&&(p=l,l=e),p!==e&&(p=gr(p),p=p===p?p:0),l!==e&&(l=gr(l),l=l===l?l:0),$a(gr(o),l,p)}function bC(o,l,p){return l=Hs(l),p===e?(p=l,l=0):p=Hs(p),o=gr(o),xA(o,l,p)}function AC(o,l,p){if(p&&typeof p!="boolean"&&Ei(o,l,p)&&(l=p=e),p===e&&(typeof l=="boolean"?(p=l,l=e):typeof o=="boolean"&&(p=o,o=e)),o===e&&l===e?(o=0,l=1):(o=Hs(o),l===e?(l=o,o=0):l=Hs(l)),o>l){var y=o;o=l,l=y}if(p||o%1||l%1){var b=X();return A(o+b*(l-o+Ra("1e-"+((b+"").length-1))),l)}return $d(o,l)}var PC=Hu(function(o,l,p){return l=l.toLowerCase(),o+(p?Fv(l):l)});function Fv(o){return vp(We(o).toLowerCase())}function Uv(o){return o=We(o),o&&o.replace(ga,bd).replace(Pu,"")}function SC(o,l,p){o=We(o),l=Zi(l);var y=o.length;p=p===e?y:$a(ge(p),0,y);var b=p;return p-=l.length,p>=0&&o.slice(p,b)==l}function RC(o){return o=We(o),o&&Ir.test(o)?o.replace(ys,ka):o}function CC(o){return o=We(o),o&&Ts.test(o)?o.replace(ho,"\\$&"):o}var xC=Hu(function(o,l,p){return o+(p?"-":"")+l.toLowerCase()}),LC=Hu(function(o,l,p){return o+(p?" ":"")+l.toLowerCase()}),OC=Hg("toLowerCase");function kC(o,l,p){o=We(o),l=ge(l);var y=l?ni(o):0;if(!l||y>=l)return o;var b=(l-y)/2;return yh(Ba(b),p)+o+yh(Ua(b),p)}function MC(o,l,p){o=We(o),l=ge(l);var y=l?ni(o):0;return l&&y<l?o+yh(l-y,p):o}function DC(o,l,p){o=We(o),l=ge(l);var y=l?ni(o):0;return l&&y<l?yh(l-y,p)+o:o}function NC(o,l,p){return p||l==null?l=0:l&&(l=+l),Y(We(o).replace(br,""),l||0)}function VC(o,l,p){return(p?Ei(o,l,p):l===e)?l=1:l=ge(l),jd(We(o),l)}function FC(){var o=arguments,l=We(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var UC=Hu(function(o,l,p){return o+(p?"_":"")+l.toLowerCase()});function BC(o,l,p){return p&&typeof p!="number"&&Ei(o,l,p)&&(l=p=e),p=p===e?ie:p>>>0,p?(o=We(o),o&&(typeof l=="string"||l!=null&&!mp(l))&&(l=Zi(l),!l&&bo(o))?Mo(ii(o),0,p):o.split(l,p)):[]}var zC=Hu(function(o,l,p){return o+(p?" ":"")+vp(l)});function HC(o,l,p){return o=We(o),p=p==null?0:$a(ge(p),0,o.length),l=Zi(l),o.slice(p,p+l.length)==l}function WC(o,l,p){var y=P.templateSettings;p&&Ei(o,l,p)&&(l=e),o=We(o),l=Lh({},l,y,Zg);var b=Lh({},l.imports,y.imports,Zg),C=$n(b),M=Je(b,C),B,Z,ut=0,ct=l.interpolate||Is,gt="__p += '",St=Nl((l.escape||Is).source+"|"+ct.source+"|"+(ct===pa?po:Is).source+"|"+(l.evaluate||Is).source+"|$","g"),Ft="//# sourceURL="+(Oe.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qr+"]")+`
`;o.replace(St,function(Jt,Re,ke,Ji,Ii,Yi){return ke||(ke=Ji),gt+=o.slice(ut,Yi).replace(mo,ih),Re&&(B=!0,gt+=`' +
__e(`+Re+`) +
'`),Ii&&(Z=!0,gt+=`';
`+Ii+`;
__p += '`),ke&&(gt+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),ut=Yi+Jt.length,Jt}),gt+=`';
`;var Qt=Oe.call(l,"variable")&&l.variable;if(!Qt)gt=`with (obj) {
`+gt+`
}
`;else if(Es.test(Qt))throw new oe(d);gt=(Z?gt.replace(ha,""):gt).replace(yu,"$1").replace(fa,"$1;"),gt="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gt+`return __p
}`;var Te=zv(function(){return De(C,Ft+"return "+gt).apply(e,M)});if(Te.source=gt,pp(Te))throw Te;return Te}function qC(o){return We(o).toLowerCase()}function $C(o){return We(o).toUpperCase()}function jC(o,l,p){if(o=We(o),o&&(p||l===e))return Se(o);if(!o||!(l=Zi(l)))return o;var y=ii(o),b=ii(l),C=ln(y,b),M=Os(y,b)+1;return Mo(y,C,M).join("")}function KC(o,l,p){if(o=We(o),o&&(p||l===e))return o.slice(0,kl(o)+1);if(!o||!(l=Zi(l)))return o;var y=ii(o),b=Os(y,ii(l))+1;return Mo(y,0,b).join("")}function GC(o,l,p){if(o=We(o),o&&(p||l===e))return o.replace(br,"");if(!o||!(l=Zi(l)))return o;var y=ii(o),b=ln(y,ii(l));return Mo(y,b).join("")}function ZC(o,l){var p=H,y=W;if(fn(l)){var b="separator"in l?l.separator:b;p="length"in l?ge(l.length):p,y="omission"in l?Zi(l.omission):y}o=We(o);var C=o.length;if(bo(o)){var M=ii(o);C=M.length}if(p>=C)return o;var B=p-ni(y);if(B<1)return y;var Z=M?Mo(M,0,B).join(""):o.slice(0,B);if(b===e)return Z+y;if(M&&(B+=Z.length-B),mp(b)){if(o.slice(B).search(b)){var ut,ct=Z;for(b.global||(b=Nl(b.source,We(Ri.exec(b))+"g")),b.lastIndex=0;ut=b.exec(ct);)var gt=ut.index;Z=Z.slice(0,gt===e?B:gt)}}else if(o.indexOf(Zi(b),B)!=B){var St=Z.lastIndexOf(b);St>-1&&(Z=Z.slice(0,St))}return Z+y}function QC(o){return o=We(o),o&&da.test(o)?o.replace(Er,Ml):o}var JC=Hu(function(o,l,p){return o+(p?" ":"")+l.toUpperCase()}),vp=Hg("toUpperCase");function Bv(o,l,p){return o=We(o),l=p?e:l,l===e?Xr(o)?Nu(o):Ls(o):o.match(l)||[]}var zv=be(function(o,l){try{return Qe(o,e,l)}catch(p){return pp(p)?p:new oe(p)}}),YC=Us(function(o,l){return Wn(l,function(p){p=ss(p),Vs(o,p,fp(o[p],o))}),o});function XC(o){var l=o==null?0:o.length,p=Zt();return o=l?ze(o,function(y){if(typeof y[1]!="function")throw new Kn(c);return[p(y[0]),y[1]]}):[],be(function(y){for(var b=-1;++b<l;){var C=o[b];if(Qe(C[0],this,y))return Qe(C[1],this,y)}})}function tx(o){return AA(pr(o,E))}function yp(o){return function(){return o}}function ex(o,l){return o==null||o!==o?l:o}var nx=qg(),ix=qg(!0);function Ui(o){return o}function wp(o){return wg(typeof o=="function"?o:pr(o,E))}function rx(o){return Eg(pr(o,E))}function sx(o,l){return Ig(o,pr(l,E))}var ox=be(function(o,l){return function(p){return zl(p,o,l)}}),ax=be(function(o,l){return function(p){return zl(o,p,l)}});function Tp(o,l,p){var y=$n(l),b=fh(l,y);p==null&&!(fn(l)&&(b.length||!y.length))&&(p=l,l=o,o=this,b=fh(l,$n(l)));var C=!(fn(p)&&"chain"in p)||!!p.chain,M=zs(o);return Wn(b,function(B){var Z=l[B];o[B]=Z,M&&(o.prototype[B]=function(){var ut=this.__chain__;if(C||ut){var ct=o(this.__wrapped__),gt=ct.__actions__=Ni(this.__actions__);return gt.push({func:Z,args:arguments,thisArg:o}),ct.__chain__=ut,ct}return Z.apply(o,Oi([this.value()],arguments))})}),o}function ux(){return un._===this&&(un._=Rd),this}function Ep(){}function lx(o){return o=ge(o),be(function(l){return bg(l,o)})}var cx=Xd(ze),hx=Xd(xs),fx=Xd(Yr);function Hv(o){return op(o)?I(ss(o)):HA(o)}function dx(o){return function(l){return o==null?e:ja(o,l)}}var px=jg(),mx=jg(!0);function Ip(){return[]}function bp(){return!1}function _x(){return{}}function gx(){return""}function vx(){return!0}function yx(o,l){if(o=ge(o),o<1||o>Tt)return[];var p=ie,y=A(o,ie);l=Zt(l),o-=ie;for(var b=Ve(y,l);++p<o;)l(p);return b}function wx(o){return he(o)?ze(o,ss):Qi(o)?[o]:Ni(uv(We(o)))}function Tx(o){var l=++Sd;return We(o)+l}var Ex=vh(function(o,l){return o+l},0),Ix=tp("ceil"),bx=vh(function(o,l){return o/l},1),Ax=tp("floor");function Px(o){return o&&o.length?hh(o,Ui,Ud):e}function Sx(o,l){return o&&o.length?hh(o,Zt(l,2),Ud):e}function Rx(o){return v(o,Ui)}function Cx(o,l){return v(o,Zt(l,2))}function xx(o){return o&&o.length?hh(o,Ui,Wd):e}function Lx(o,l){return o&&o.length?hh(o,Zt(l,2),Wd):e}var Ox=vh(function(o,l){return o*l},1),kx=tp("round"),Mx=vh(function(o,l){return o-l},0);function Dx(o){return o&&o.length?wt(o,Ui):0}function Nx(o,l){return o&&o.length?wt(o,Zt(l,2)):0}return P.after=rR,P.ary=yv,P.assign=$R,P.assignIn=kv,P.assignInWith=Lh,P.assignWith=jR,P.at=KR,P.before=wv,P.bind=fp,P.bindAll=YC,P.bindKey=Tv,P.castArray=_R,P.chain=_v,P.chunk=AP,P.compact=PP,P.concat=SP,P.cond=XC,P.conforms=tx,P.constant=yp,P.countBy=DS,P.create=GR,P.curry=Ev,P.curryRight=Iv,P.debounce=bv,P.defaults=ZR,P.defaultsDeep=QR,P.defer=sR,P.delay=oR,P.difference=RP,P.differenceBy=CP,P.differenceWith=xP,P.drop=LP,P.dropRight=OP,P.dropRightWhile=kP,P.dropWhile=MP,P.fill=DP,P.filter=VS,P.flatMap=BS,P.flatMapDeep=zS,P.flatMapDepth=HS,P.flatten=fv,P.flattenDeep=NP,P.flattenDepth=VP,P.flip=aR,P.flow=nx,P.flowRight=ix,P.fromPairs=FP,P.functions=iC,P.functionsIn=rC,P.groupBy=WS,P.initial=BP,P.intersection=zP,P.intersectionBy=HP,P.intersectionWith=WP,P.invert=oC,P.invertBy=aC,P.invokeMap=$S,P.iteratee=wp,P.keyBy=jS,P.keys=$n,P.keysIn=Fi,P.map=Ah,P.mapKeys=lC,P.mapValues=cC,P.matches=rx,P.matchesProperty=sx,P.memoize=Sh,P.merge=hC,P.mergeWith=Mv,P.method=ox,P.methodOf=ax,P.mixin=Tp,P.negate=Rh,P.nthArg=lx,P.omit=fC,P.omitBy=dC,P.once=uR,P.orderBy=KS,P.over=cx,P.overArgs=lR,P.overEvery=hx,P.overSome=fx,P.partial=dp,P.partialRight=Av,P.partition=GS,P.pick=pC,P.pickBy=Dv,P.property=Hv,P.propertyOf=dx,P.pull=KP,P.pullAll=pv,P.pullAllBy=GP,P.pullAllWith=ZP,P.pullAt=QP,P.range=px,P.rangeRight=mx,P.rearg=cR,P.reject=JS,P.remove=JP,P.rest=hR,P.reverse=cp,P.sampleSize=XS,P.set=_C,P.setWith=gC,P.shuffle=tR,P.slice=YP,P.sortBy=iR,P.sortedUniq=sS,P.sortedUniqBy=oS,P.split=BC,P.spread=fR,P.tail=aS,P.take=uS,P.takeRight=lS,P.takeRightWhile=cS,P.takeWhile=hS,P.tap=PS,P.throttle=dR,P.thru=bh,P.toArray=xv,P.toPairs=Nv,P.toPairsIn=Vv,P.toPath=wx,P.toPlainObject=Ov,P.transform=vC,P.unary=pR,P.union=fS,P.unionBy=dS,P.unionWith=pS,P.uniq=mS,P.uniqBy=_S,P.uniqWith=gS,P.unset=yC,P.unzip=hp,P.unzipWith=mv,P.update=wC,P.updateWith=TC,P.values=$u,P.valuesIn=EC,P.without=vS,P.words=Bv,P.wrap=mR,P.xor=yS,P.xorBy=wS,P.xorWith=TS,P.zip=ES,P.zipObject=IS,P.zipObjectDeep=bS,P.zipWith=AS,P.entries=Nv,P.entriesIn=Vv,P.extend=kv,P.extendWith=Lh,Tp(P,P),P.add=Ex,P.attempt=zv,P.camelCase=PC,P.capitalize=Fv,P.ceil=Ix,P.clamp=IC,P.clone=gR,P.cloneDeep=yR,P.cloneDeepWith=wR,P.cloneWith=vR,P.conformsTo=TR,P.deburr=Uv,P.defaultTo=ex,P.divide=bx,P.endsWith=SC,P.eq=Dr,P.escape=RC,P.escapeRegExp=CC,P.every=NS,P.find=FS,P.findIndex=cv,P.findKey=JR,P.findLast=US,P.findLastIndex=hv,P.findLastKey=YR,P.floor=Ax,P.forEach=gv,P.forEachRight=vv,P.forIn=XR,P.forInRight=tC,P.forOwn=eC,P.forOwnRight=nC,P.get=_p,P.gt=ER,P.gte=IR,P.has=sC,P.hasIn=gp,P.head=dv,P.identity=Ui,P.includes=qS,P.indexOf=UP,P.inRange=bC,P.invoke=uC,P.isArguments=Za,P.isArray=he,P.isArrayBuffer=bR,P.isArrayLike=Vi,P.isArrayLikeObject=bn,P.isBoolean=AR,P.isBuffer=Do,P.isDate=PR,P.isElement=SR,P.isEmpty=RR,P.isEqual=CR,P.isEqualWith=xR,P.isError=pp,P.isFinite=LR,P.isFunction=zs,P.isInteger=Pv,P.isLength=Ch,P.isMap=Sv,P.isMatch=OR,P.isMatchWith=kR,P.isNaN=MR,P.isNative=DR,P.isNil=VR,P.isNull=NR,P.isNumber=Rv,P.isObject=fn,P.isObjectLike=wn,P.isPlainObject=Kl,P.isRegExp=mp,P.isSafeInteger=FR,P.isSet=Cv,P.isString=xh,P.isSymbol=Qi,P.isTypedArray=qu,P.isUndefined=UR,P.isWeakMap=BR,P.isWeakSet=zR,P.join=qP,P.kebabCase=xC,P.last=_r,P.lastIndexOf=$P,P.lowerCase=LC,P.lowerFirst=OC,P.lt=HR,P.lte=WR,P.max=Px,P.maxBy=Sx,P.mean=Rx,P.meanBy=Cx,P.min=xx,P.minBy=Lx,P.stubArray=Ip,P.stubFalse=bp,P.stubObject=_x,P.stubString=gx,P.stubTrue=vx,P.multiply=Ox,P.nth=jP,P.noConflict=ux,P.noop=Ep,P.now=Ph,P.pad=kC,P.padEnd=MC,P.padStart=DC,P.parseInt=NC,P.random=AC,P.reduce=ZS,P.reduceRight=QS,P.repeat=VC,P.replace=FC,P.result=mC,P.round=kx,P.runInContext=$,P.sample=YS,P.size=eR,P.snakeCase=UC,P.some=nR,P.sortedIndex=XP,P.sortedIndexBy=tS,P.sortedIndexOf=eS,P.sortedLastIndex=nS,P.sortedLastIndexBy=iS,P.sortedLastIndexOf=rS,P.startCase=zC,P.startsWith=HC,P.subtract=Mx,P.sum=Dx,P.sumBy=Nx,P.template=WC,P.times=yx,P.toFinite=Hs,P.toInteger=ge,P.toLength=Lv,P.toLower=qC,P.toNumber=gr,P.toSafeInteger=qR,P.toString=We,P.toUpper=$C,P.trim=jC,P.trimEnd=KC,P.trimStart=GC,P.truncate=ZC,P.unescape=QC,P.uniqueId=Tx,P.upperCase=JC,P.upperFirst=vp,P.each=gv,P.eachRight=vv,P.first=dv,Tp(P,function(){var o={};return is(P,function(l,p){Oe.call(P.prototype,p)||(o[p]=l)}),o}(),{chain:!1}),P.VERSION=i,Wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){P[o].placeholder=P}),Wn(["drop","take"],function(o,l){Ie.prototype[o]=function(p){p=p===e?1:T(ge(p),0);var y=this.__filtered__&&!l?new Ie(this):this.clone();return y.__filtered__?y.__takeCount__=A(p,y.__takeCount__):y.__views__.push({size:A(p,ie),type:o+(y.__dir__<0?"Right":"")}),y},Ie.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),Wn(["filter","map","takeWhile"],function(o,l){var p=l+1,y=p==Ze||p==Ce;Ie.prototype[o]=function(b){var C=this.clone();return C.__iteratees__.push({iteratee:Zt(b,3),type:p}),C.__filtered__=C.__filtered__||y,C}}),Wn(["head","last"],function(o,l){var p="take"+(l?"Right":"");Ie.prototype[o]=function(){return this[p](1).value()[0]}}),Wn(["initial","tail"],function(o,l){var p="drop"+(l?"":"Right");Ie.prototype[o]=function(){return this.__filtered__?new Ie(this):this[p](1)}}),Ie.prototype.compact=function(){return this.filter(Ui)},Ie.prototype.find=function(o){return this.filter(o).head()},Ie.prototype.findLast=function(o){return this.reverse().find(o)},Ie.prototype.invokeMap=be(function(o,l){return typeof o=="function"?new Ie(this):this.map(function(p){return zl(p,o,l)})}),Ie.prototype.reject=function(o){return this.filter(Rh(Zt(o)))},Ie.prototype.slice=function(o,l){o=ge(o);var p=this;return p.__filtered__&&(o>0||l<0)?new Ie(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),l!==e&&(l=ge(l),p=l<0?p.dropRight(-l):p.take(l-o)),p)},Ie.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Ie.prototype.toArray=function(){return this.take(ie)},is(Ie.prototype,function(o,l){var p=/^(?:filter|find|map|reject)|While$/.test(l),y=/^(?:head|last)$/.test(l),b=P[y?"take"+(l=="last"?"Right":""):l],C=y||/^find/.test(l);b&&(P.prototype[l]=function(){var M=this.__wrapped__,B=y?[1]:arguments,Z=M instanceof Ie,ut=B[0],ct=Z||he(M),gt=function(Re){var ke=b.apply(P,Oi([Re],B));return y&&St?ke[0]:ke};ct&&p&&typeof ut=="function"&&ut.length!=1&&(Z=ct=!1);var St=this.__chain__,Ft=!!this.__actions__.length,Qt=C&&!St,Te=Z&&!Ft;if(!C&&ct){M=Te?M:new Ie(this);var Jt=o.apply(M,B);return Jt.__actions__.push({func:bh,args:[gt],thisArg:e}),new ri(Jt,St)}return Qt&&Te?o.apply(this,B):(Jt=this.thru(gt),Qt?y?Jt.value()[0]:Jt.value():Jt)})}),Wn(["pop","push","shift","sort","splice","unshift"],function(o){var l=Vu[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",y=/^(?:pop|shift)$/.test(o);P.prototype[o]=function(){var b=arguments;if(y&&!this.__chain__){var C=this.value();return l.apply(he(C)?C:[],b)}return this[p](function(M){return l.apply(he(M)?M:[],b)})}}),is(Ie.prototype,function(o,l){var p=P[l];if(p){var y=p.name+"";Oe.call(Gi,y)||(Gi[y]=[]),Gi[y].push({name:l,func:p})}}),Gi[gh(e,ht).name]=[{name:"wrapper",func:e}],Ie.prototype.clone=Md,Ie.prototype.reverse=Jb,Ie.prototype.value=Yb,P.prototype.at=SS,P.prototype.chain=RS,P.prototype.commit=CS,P.prototype.next=xS,P.prototype.plant=OS,P.prototype.reverse=kS,P.prototype.toJSON=P.prototype.valueOf=P.prototype.value=MS,P.prototype.first=P.prototype.head,Co&&(P.prototype[Co]=LS),P},Lr=Po();hn?((hn.exports=Lr)._=Lr,Hn._=Lr):un._=Lr}).call(Bz)}(oc,oc.exports)),oc.exports}var Hz=zz();const Wz={name:"TravelPoints",props:["trip"],data(){return{travelPoints:[],newPoint:"",suggestions:[],map:null,marker:null}},methods:{searchPlaces:Hz.debounce(async function(){if(this.newPoint.trim().length>2)try{const n=await Sn.get("https://nominatim.openstreetmap.org/search",{params:{q:this.newPoint,format:"json",addressdetails:1,limit:5}});this.suggestions=n.data||[]}catch(n){console.error("Błąd podczas wyszukiwania miejsc:",n)}else this.suggestions=[]},500),selectPlace(n){this.newPoint=n.display_name,this.suggestions=[];const t=parseFloat(n.lat),e=parseFloat(n.lon);this.addMarker(t,e)},addPoint(){if(this.newPoint.trim()&&this.marker){const n={name:this.newPoint.trim(),lat:this.marker.getLatLng().lat,lng:this.marker.getLatLng().lng};this.travelPoints.push(n),this.addMarker(n.lat,n.lng),this.savePointToFirebase(n),this.newPoint=""}},addMarker(n,t){if(!this.map)return;const e=Hh.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]});this.marker?this.marker.setLatLng([n,t]):this.marker=Hh.marker([n,t],{icon:e}).addTo(this.map),this.map.setView([n,t],13)},async savePointToFirebase(n){await Vc.collection("trips").doc(this.trip.id).collection("points").add({name:n.name,lat:n.lat,lng:n.lng})},async fetchTravelPoints(){(await Vc.collection("trips").doc(this.trip.id).collection("points").get()).forEach(e=>{const i=e.data();this.travelPoints.push({name:i.name,lat:i.lat,lng:i.lng}),this.addMarker(i.lat,i.lng)})}},mounted(){this.map=Hh.map("map").setView([52.2297,21.0122],13),Hh.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map),this.fetchTravelPoints()}},qz={class:"container"},$z={class:"mb-3"},jz={key:0,class:"list-group"},Kz=["onClick"],Gz={key:0,class:"mb-3"},Zz={class:"list-group"};function Qz(n,t,e,i,s,a){return Wt(),jt("div",qz,[J("h3",null,"Punkty do zwiedzenia - "+Me(e.trip.name),1),J("div",$z,[t[3]||(t[3]=J("label",{for:"newPoint",class:"form-label"},"Nowy punkt do zwiedzenia",-1)),Tn(J("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>s.newPoint=c),type:"text",id:"newPoint",class:"form-control",placeholder:"Wpisz nazwę miejsca, które chcesz odwiedzić",onInput:t[1]||(t[1]=(...c)=>a.searchPlaces&&a.searchPlaces(...c))},null,544),[[Nn,s.newPoint]]),s.suggestions.length>0?(Wt(),jt("ul",jz,[(Wt(!0),jt(Qn,null,Xo(s.suggestions,(c,d)=>(Wt(),jt("li",{key:d,class:"list-group-item",onClick:m=>a.selectPlace(c)},Me(c.display_name),9,Kz))),128))])):dn("",!0),J("button",{class:"btn btn-primary mt-2",onClick:t[2]||(t[2]=(...c)=>a.addPoint&&a.addPoint(...c))},"Dodaj punkt")]),s.travelPoints.length?(Wt(),jt("div",Gz,[t[4]||(t[4]=J("h4",null,"Punkty:",-1)),J("ul",Zz,[(Wt(!0),jt(Qn,null,Xo(s.travelPoints,(c,d)=>(Wt(),jt("li",{key:d,class:"list-group-item"},Me(c.name)+" ("+Me(c.lat.toFixed(4))+", "+Me(c.lng.toFixed(4))+") ",1))),128))])])):dn("",!0),t[5]||(t[5]=J("div",{id:"map",style:{height:"400px"}},null,-1))])}const Jz=or(Wz,[["render",Qz],["__scopeId","data-v-ba23d575"]]),Yz={name:"BudgetPlanner",props:["trip"],data(){return{totalBudget:0,expenses:[],newExpense:{name:"",amount:0,persons:0,description:"",date:"",file:null,paid:!1}}},computed:{totalSpent(){return this.expenses.reduce((n,t)=>n+Number(t.amount),0)},remainingBudget(){return(this.totalBudget-this.totalSpent).toFixed(2)}},methods:{handleFileUpload(n){const t=n.target.files[0];t&&(this.newExpense.file=URL.createObjectURL(t))},addExpense(){this.newExpense.name.trim()&&this.newExpense.amount>0?(this.expenses.push({...this.newExpense}),this.newExpense={name:"",amount:0,persons:0,description:"",date:"",file:null,paid:!1}):alert("Wprowadź nazwę wydatku i kwotę większą od 0!")}}},Xz={class:"container py-4"},t4={class:"row mb-4"},e4={class:"col-md-4"},n4={class:"card text-white bg-success mb-3"},i4={class:"card-body"},r4={class:"card-text"},s4={class:"col-md-4"},o4={class:"card text-white bg-danger mb-3"},a4={class:"card-body"},u4={class:"card-text"},l4={class:"col-md-4"},c4={class:"card text-white bg-info mb-3"},h4={class:"card-body"},f4={class:"mb-4"},d4={class:"mb-2"},p4={class:"mb-2"},m4={class:"mb-2"},_4={key:0,class:"text-muted"},g4={class:"mb-2"},v4={class:"mb-2"},y4={class:"mb-2"},w4={key:0},T4={class:"list-group"},E4={class:"d-flex justify-content-between align-items-center flex-wrap"},I4={class:"text-muted"},b4={key:0},A4={key:1},P4={key:2},S4={key:0},R4=["href"],C4={class:"form-check"},x4=["onUpdate:modelValue","id"],L4=["for"];function O4(n,t,e,i,s,a){return Wt(),jt("div",Xz,[J("h3",null,"Budżet podróży - "+Me(e.trip.name),1),J("div",t4,[J("div",e4,[J("div",n4,[J("div",i4,[t[8]||(t[8]=J("h5",{class:"card-title"},"Pozostało",-1)),J("p",r4,Me(a.remainingBudget)+" PLN ",1)])])]),J("div",s4,[J("div",o4,[J("div",a4,[t[9]||(t[9]=J("h5",{class:"card-title"},"Wydatki",-1)),J("p",u4,Me(a.totalSpent)+" PLN ",1)])])]),J("div",l4,[J("div",c4,[J("div",h4,[t[10]||(t[10]=J("h5",{class:"card-title"},"Całkowity budżet",-1)),Tn(J("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>s.totalBudget=c),type:"number",class:"form-control"},null,512),[[Nn,s.totalBudget,void 0,{number:!0}]]),t[11]||(t[11]=$o(" PLN "))])])])]),J("div",f4,[t[13]||(t[13]=J("h4",null,"Dodaj nowy wydatek",-1)),J("div",d4,[Tn(J("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>s.newExpense.name=c),placeholder:"Nazwa wydatku (wymagane)",class:"form-control"},null,512),[[Nn,s.newExpense.name]])]),J("div",p4,[Tn(J("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>s.newExpense.amount=c),placeholder:"Kwota wydatku (PLN, wymagana)",type:"number",class:"form-control"},null,512),[[Nn,s.newExpense.amount,void 0,{number:!0}]])]),J("div",m4,[Tn(J("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>s.newExpense.persons=c),placeholder:"Liczba osób do podziału (opcjonalnie)",type:"number",class:"form-control"},null,512),[[Nn,s.newExpense.persons,void 0,{number:!0}]]),s.newExpense.persons>0?(Wt(),jt("small",_4," Równy podział: "+Me((s.newExpense.amount/s.newExpense.persons).toFixed(2))+" PLN na osobę ",1)):dn("",!0)]),J("div",g4,[Tn(J("input",{"onUpdate:modelValue":t[4]||(t[4]=c=>s.newExpense.description=c),placeholder:"Opis wydatku (opcjonalnie)",class:"form-control"},null,512),[[Nn,s.newExpense.description]])]),J("div",v4,[Tn(J("input",{"onUpdate:modelValue":t[5]||(t[5]=c=>s.newExpense.date=c),type:"date",class:"form-control",placeholder:"Data wydatku (opcjonalnie)"},null,512),[[Nn,s.newExpense.date]])]),J("div",y4,[J("input",{type:"file",onChange:t[6]||(t[6]=(...c)=>a.handleFileUpload&&a.handleFileUpload(...c)),class:"form-control"},null,32),t[12]||(t[12]=J("small",{class:"text-muted"},"Załącz zdjęcie/plik (opcjonalnie)",-1))]),J("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...c)=>a.addExpense&&a.addExpense(...c))},"Dodaj wydatek")]),s.expenses.length?(Wt(),jt("div",w4,[t[14]||(t[14]=J("h4",null,"Wydatki",-1)),J("ul",T4,[(Wt(!0),jt(Qn,null,Xo(s.expenses,(c,d)=>(Wt(),jt("li",{key:d,class:"list-group-item"},[J("div",E4,[J("div",null,[J("strong",null,Me(c.name),1),$o(" - "+Me(c.amount)+" PLN ",1),J("div",I4,[c.date?(Wt(),jt("span",b4,"Data: "+Me(c.date)+" | ",1)):dn("",!0),c.description?(Wt(),jt("span",A4,"Opis: "+Me(c.description)+" | ",1)):dn("",!0),c.persons?(Wt(),jt("span",P4," Podzielone między: "+Me(c.persons)+" ("+Me((c.amount/c.persons).toFixed(2))+" PLN/os.) | ",1)):dn("",!0)]),c.file?(Wt(),jt("div",S4,[J("a",{href:c.file,target:"_blank"},"Zobacz załącznik",8,R4)])):dn("",!0)]),J("div",C4,[Tn(J("input",{type:"checkbox","onUpdate:modelValue":m=>c.paid=m,class:"form-check-input",id:"paid-"+d},null,8,x4),[[DE,c.paid]]),J("label",{for:"paid-"+d,class:"form-check-label"},"Opłacone",8,L4)])])]))),128))])])):dn("",!0)])}const k4=or(Yz,[["render",O4],["__scopeId","data-v-5eac2e31"]]),M4={name:"PackingList",props:["trip"],data(){return{categories:[{name:"Clothing",items:[]},{name:"Essentials",items:[]},{name:"Toiletries",items:[]},{name:"Other",items:[]}],selectedCategory:null,showAddCategory:!1,showAddItem:!1,newCategory:"",newItem:""}},methods:{selectCategory(n){this.selectedCategory=n,this.showAddItem=!1},addCategory(){this.newCategory.trim()&&(this.categories.push({name:this.newCategory.trim(),items:[]}),this.newCategory="",this.showAddCategory=!1)},addItem(){const n=this.categories.find(t=>t.name===this.selectedCategory);n&&this.newItem.trim()&&(n.items.push({name:this.newItem.trim(),checked:!1}),this.newItem="",this.showAddItem=!1)},getItemsForCategory(n){const t=this.categories.find(e=>e.name===n);return t?t.items:[]},countRemaining(n){const t=this.categories.find(e=>e.name===n);return t?t.items.filter(e=>!e.checked).length:0}}},D4={class:"container py-4"},N4={class:"row mb-4"},V4=["onClick"],F4={class:"card-body text-center"},U4={class:"card-title"},B4={class:"card-text"},z4={class:"mb-4 d-flex gap-3"},H4=["disabled"],W4={key:0,class:"mb-3"},q4={key:1,class:"mb-3"},$4={key:2},j4={class:"list-group w-75"},K4=["onUpdate:modelValue"];function G4(n,t,e,i,s,a){return Wt(),jt("div",D4,[J("h3",null,"Lista pakowania - "+Me(e.trip.name),1),J("div",N4,[(Wt(!0),jt(Qn,null,Xo(s.categories,(c,d)=>(Wt(),jt("div",{key:d,class:"col-md-3 mb-3"},[J("div",{class:"card h-100",onClick:m=>a.selectCategory(c.name),style:{cursor:"pointer"}},[J("div",F4,[J("h5",U4,Me(c.name),1),J("p",B4," Do odhaczenia: "+Me(a.countRemaining(c.name))+" / "+Me(c.items.length),1)])],8,V4)]))),128))]),J("div",z4,[J("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=c=>s.showAddCategory=!0)},"Dodaj kategorię"),J("button",{class:"btn btn-success",onClick:t[1]||(t[1]=c=>s.showAddItem=!0),disabled:!s.selectedCategory},"Dodaj rzecz do "+Me(s.selectedCategory),9,H4)]),s.showAddCategory?(Wt(),jt("div",W4,[Tn(J("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>s.newCategory=c),placeholder:"Nazwa kategorii",class:"form-control w-50 d-inline"},null,512),[[Nn,s.newCategory]]),J("button",{class:"btn btn-secondary ms-2",onClick:t[3]||(t[3]=(...c)=>a.addCategory&&a.addCategory(...c))},"Dodaj")])):dn("",!0),s.showAddItem&&s.selectedCategory?(Wt(),jt("div",q4,[Tn(J("input",{"onUpdate:modelValue":t[4]||(t[4]=c=>s.newItem=c),placeholder:"Nazwa rzeczy",class:"form-control w-50 d-inline"},null,512),[[Nn,s.newItem]]),J("button",{class:"btn btn-secondary ms-2",onClick:t[5]||(t[5]=(...c)=>a.addItem&&a.addItem(...c))},"Dodaj")])):dn("",!0),s.selectedCategory?(Wt(),jt("div",$4,[J("h4",null,"Rzeczy w kategorii: "+Me(s.selectedCategory),1),J("ul",j4,[(Wt(!0),jt(Qn,null,Xo(a.getItemsForCategory(s.selectedCategory),(c,d)=>(Wt(),jt("li",{key:d,class:"list-group-item d-flex justify-content-between align-items-center"},[J("div",null,[Tn(J("input",{type:"checkbox","onUpdate:modelValue":m=>c.checked=m,class:"form-check-input me-2"},null,8,K4),[[DE,c.checked]]),J("span",{class:Hf({"text-decoration-line-through":c.checked})},Me(c.name),3)])]))),128))])])):dn("",!0)])}const Z4=or(M4,[["render",G4],["__scopeId","data-v-3e25a0d7"]]),Q4={name:"Reservations",props:["trip"],data(){return{newReservation:{name:"",link:"",file:null},reservations:[]}},methods:{handleFileUpload(n){const t=n.target.files[0];t&&(this.newReservation.file=URL.createObjectURL(t))},addReservation(){this.newReservation.name.trim()&&(this.reservations.push({name:this.newReservation.name.trim(),link:this.newReservation.link.trim(),file:this.newReservation.file}),this.newReservation={name:"",link:"",file:null})}}},J4={class:"container py-4"},Y4={class:"mb-3"},X4={key:0},t9={class:"list-group"},e9={key:0},n9=["href"],i9={key:1},r9=["href"];function s9(n,t,e,i,s,a){return Wt(),jt("div",J4,[J("h3",null,"Rezerwacje - "+Me(e.trip.name),1),J("div",Y4,[Tn(J("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>s.newReservation.name=c),placeholder:"Nazwa rezerwacji (np. Lot do Paryża)",class:"form-control mb-2"},null,512),[[Nn,s.newReservation.name]]),Tn(J("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>s.newReservation.link=c),placeholder:"Link do rezerwacji (opcjonalnie)",class:"form-control mb-2"},null,512),[[Nn,s.newReservation.link]]),J("input",{type:"file",onChange:t[2]||(t[2]=(...c)=>a.handleFileUpload&&a.handleFileUpload(...c)),class:"form-control mb-2"},null,32),J("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...c)=>a.addReservation&&a.addReservation(...c))},"Dodaj rezerwację")]),s.reservations.length?(Wt(),jt("div",X4,[t[4]||(t[4]=J("h4",null,"Lista rezerwacji",-1)),J("ul",t9,[(Wt(!0),jt(Qn,null,Xo(s.reservations,(c,d)=>(Wt(),jt("li",{key:d,class:"list-group-item"},[J("strong",null,Me(c.name),1),c.link?(Wt(),jt("div",e9,[J("a",{href:c.link,target:"_blank"},"Otwórz link",8,n9)])):dn("",!0),c.file?(Wt(),jt("div",i9,[J("a",{href:c.file,target:"_blank"},"Zobacz załącznik",8,r9)])):dn("",!0)]))),128))])])):dn("",!0)])}const o9=or(Q4,[["render",s9],["__scopeId","data-v-8254bed2"]]),a9={name:"TripDetails",components:{TravelPoints:Jz,Budget:k4,PackingList:Z4,Reservations:o9},props:["id"],setup(n){const t=Cn(null),e=Cn(!1),i=Cn(!1),s=Cn(!1),a=Cn(!1),c=async()=>{try{const S=kI(Vc,"trips",n.id),x=await h2(S);x.exists()?t.value=x.data():console.log("Brak podróży o tym id")}catch(S){console.error("Błąd podczas ładowania podróży:",S)}};return Kf(()=>{c()}),{trip:t,isTravelPointsVisible:e,isBudgetVisible:i,isPackingListVisible:s,isReservationsVisible:a,addTravelPoints:()=>{e.value=!0,i.value=!1,s.value=!1,a.value=!1},planBudget:()=>{e.value=!1,i.value=!0,s.value=!1,a.value=!1},addPackingList:()=>{e.value=!1,i.value=!1,s.value=!0,a.value=!1},addReservations:()=>{e.value=!1,i.value=!1,s.value=!1,a.value=!0},closeSection:()=>{e.value=!1,i.value=!1,s.value=!1,a.value=!1}}}},u9={class:"container py-5"},l9={class:"d-flex gap-3 my-4"},c9={key:0},h9={key:1},f9={key:2},d9={key:3};function p9(n,t,e,i,s,a){const c=Zs("router-link"),d=Zs("TravelPoints"),m=Zs("Budget"),g=Zs("PackingList"),w=Zs("Reservations");return Wt(),jt("div",u9,[xn(c,{to:"/",class:"btn btn-outline-secondary mb-3"},{default:o_(()=>t[4]||(t[4]=[$o("Powrót")])),_:1}),J("h2",null,Me(i.trip.name)+" - Szczegóły",1),J("p",null,[t[5]||(t[5]=J("strong",null,"Kraj:",-1)),$o(" "+Me(i.trip.country),1)]),J("p",null,[t[6]||(t[6]=J("strong",null,"Data wyjazdu:",-1)),$o(" "+Me(i.trip.departureDate||"Brak danych"),1)]),J("p",null,[t[7]||(t[7]=J("strong",null,"Data przyjazdu:",-1)),$o(" "+Me(i.trip.arrivalDate||"Brak danych"),1)]),J("div",l9,[J("button",{class:"btn btn-green",onClick:t[0]||(t[0]=(...E)=>i.addTravelPoints&&i.addTravelPoints(...E))},"Dodaj punkty podróży"),J("button",{class:"btn btn-green",onClick:t[1]||(t[1]=(...E)=>i.planBudget&&i.planBudget(...E))},"Planowanie budżetu"),J("button",{class:"btn btn-green",onClick:t[2]||(t[2]=(...E)=>i.addPackingList&&i.addPackingList(...E))},"Dodaj do listy pakowania"),J("button",{class:"btn btn-green",onClick:t[3]||(t[3]=(...E)=>i.addReservations&&i.addReservations(...E))},"Rezerwacje")]),i.isTravelPointsVisible?(Wt(),jt("div",c9,[xn(d,{trip:i.trip,onClose:i.closeSection},null,8,["trip","onClose"])])):dn("",!0),i.isBudgetVisible?(Wt(),jt("div",h9,[xn(m,{trip:i.trip,onClose:i.closeSection},null,8,["trip","onClose"])])):dn("",!0),i.isPackingListVisible?(Wt(),jt("div",f9,[xn(g,{trip:i.trip,onClose:i.closeSection},null,8,["trip","onClose"])])):dn("",!0),i.isReservationsVisible?(Wt(),jt("div",d9,[xn(w,{trip:i.trip,onClose:i.closeSection},null,8,["trip","onClose"])])):dn("",!0)])}const m9=or(a9,[["render",p9],["__scopeId","data-v-30ffedc6"]]),_9={name:"Login",setup(){const n=Cn(""),t=Cn(""),e=Cn(""),i=f_();return{email:n,password:t,loginWithEmail:async()=>{try{const d=await gF(Fc,n.value,t.value);console.log("User logged in:",d.user),i.push("/home")}catch(d){e.value="Login failed: "+d.message,console.error("Error during login",d)}},loginWithGoogle:async()=>{try{const d=new Qs,m=await BF(Fc,d);console.log("User logged in with Google:",m.user),i.push("/home")}catch(d){e.value="Google login failed: "+d.message,console.error("Error during Google login",d)}},errorMessage:e,cancelLogin:()=>{i.push("/")}}}},g9={class:"login-page"},v9={key:0,class:"error"},y9={class:"input-group"},w9={class:"input-group"},T9={class:"action-buttons"};function E9(n,t,e,i,s,a){return Wt(),jt("div",g9,[t[8]||(t[8]=J("h1",null,"Welcome to Trip Master!",-1)),i.errorMessage?(Wt(),jt("div",v9,Me(i.errorMessage),1)):dn("",!0),J("form",{onSubmit:t[2]||(t[2]=c_((...c)=>i.loginWithEmail&&i.loginWithEmail(...c),["prevent"]))},[J("div",y9,[t[5]||(t[5]=J("label",{for:"email"},"Email:",-1)),Tn(J("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=c=>i.email=c),id:"email",required:""},null,512),[[Nn,i.email]])]),J("div",w9,[t[6]||(t[6]=J("label",{for:"password"},"Password:",-1)),Tn(J("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=c=>i.password=c),id:"password",required:""},null,512),[[Nn,i.password]])]),t[7]||(t[7]=J("button",{type:"submit"},"Login",-1))],32),J("div",T9,[J("button",{class:"google-login",onClick:t[3]||(t[3]=(...c)=>i.loginWithGoogle&&i.loginWithGoogle(...c))},"Login with Google"),J("button",{class:"cancel",onClick:t[4]||(t[4]=(...c)=>i.cancelLogin&&i.cancelLogin(...c))},"Cancel")])])}const I9=or(_9,[["render",E9],["__scopeId","data-v-26069678"]]),b9={setup(){const n=Cn(""),t=Cn(""),e=Cn(""),i=Cn(""),s=f_();return{email:n,password:t,confirmPassword:e,errorMessage:i,registerUser:async()=>{if(t.value!==e.value){i.value="Passwords do not match.";return}try{await _F(Fc,n.value,t.value),s.push("/login")}catch(d){i.value=d.message}},cancelRegistration:()=>{s.push("/")}}}},A9={class:"register"},P9={class:"input-group"},S9={class:"input-group"},R9={class:"input-group"},C9={key:0,class:"error"};function x9(n,t,e,i,s,a){return Wt(),jt("div",A9,[t[9]||(t[9]=J("h2",null,"Create an Account",-1)),J("form",{onSubmit:t[3]||(t[3]=c_((...c)=>i.registerUser&&i.registerUser(...c),["prevent"]))},[J("div",P9,[t[5]||(t[5]=J("label",{for:"email"},"Email:",-1)),Tn(J("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=c=>i.email=c),id:"email",required:""},null,512),[[Nn,i.email]])]),J("div",S9,[t[6]||(t[6]=J("label",{for:"password"},"Password:",-1)),Tn(J("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=c=>i.password=c),id:"password",required:""},null,512),[[Nn,i.password]])]),J("div",R9,[t[7]||(t[7]=J("label",{for:"confirmPassword"},"Confirm Password:",-1)),Tn(J("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=c=>i.confirmPassword=c),id:"confirmPassword",required:""},null,512),[[Nn,i.confirmPassword]])]),t[8]||(t[8]=J("button",{type:"submit"},"Register",-1))],32),i.errorMessage?(Wt(),jt("p",C9,Me(i.errorMessage),1)):dn("",!0),J("button",{class:"cancel",onClick:t[4]||(t[4]=(...c)=>i.cancelRegistration&&i.cancelRegistration(...c))},"Cancel")])}const L9=or(b9,[["render",x9],["__scopeId","data-v-23f089d2"]]),O9={},k9={class:"info-page"};function M9(n,t){return Wt(),jt("div",k9,t[0]||(t[0]=[J("div",{class:"about-app"},[J("h2",null,"About App"),J("p",null," Planning a trip can be overwhelming, but with TripMaster, organizing your adventures has never been easier. TripMaster is a comprehensive travel planning app designed to simplify every step of your journey—from choosing a destination to packing your bags. Whether you’re a spontaneous explorer or a meticulous planner, this app ensures that you can focus on the excitement of travel rather than the hassle of logistics. ")],-1),J("div",{class:"authors"},[J("h2",null,"Authors"),J("ul",null,[J("li",null,"Amanda Miśkiewicz"),J("li",null,"Julia Mieszaniec"),J("li",null,"Jan Paluch")])],-1)]))}const D9=or(O9,[["render",M9],["__scopeId","data-v-8cfbe2a5"]]),N9=[{path:"/",name:"Home",component:_k},{path:"/info",name:"Info",component:D9},{path:"/login",name:"Login",component:I9},{path:"/register",name:"Register",component:L9},{path:"/home",name:"HomeView",component:dT,meta:{requiresAuth:!0}},{path:"/trips",name:"Trips",component:dT,meta:{requiresAuth:!0}},{path:"/trip/:id",name:"TripDetails",component:m9,props:!0,meta:{requiresAuth:!0}}],Qb=uk({history:VO(),routes:N9});Qb.beforeEach((n,t,e)=>{const i=bb(),s=n.matched.some(c=>c.meta.requiresAuth),a=i.currentUser;s&&!a?e("/login"):e()});const V9="modulepreload",F9=function(n){return"/"+n},CT={},U9=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(e.map(m=>{if(m=F9(m),m in CT)return;CT[m]=!0;const g=m.endsWith(".css"),w=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const E=document.createElement("link");if(E.rel=g?"stylesheet":V9,g||(E.as="script"),E.crossOrigin="",E.href=m,d&&E.setAttribute("nonce",d),document.head.appendChild(E),g)return new Promise((S,x)=>{E.addEventListener("load",S),E.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return s.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};function B9(n={}){const{immediate:t=!1,onNeedRefresh:e,onOfflineReady:i,onRegistered:s,onRegisteredSW:a,onRegisterError:c}=n;let d,m;const g=async(E=!0)=>{await m};async function w(){if("serviceWorker"in navigator){if(d=await U9(async()=>{const{Workbox:E}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:E}},[]).then(({Workbox:E})=>new E("/sw.js",{scope:"/",type:"classic"})).catch(E=>{c==null||c(E)}),!d)return;d.addEventListener("activated",E=>{(E.isUpdate||E.isExternal)&&window.location.reload()}),d.addEventListener("installed",E=>{E.isUpdate||i==null||i()}),d.register({immediate:t}).then(E=>{a?a("/sw.js",E):s==null||s(E)}).catch(E=>{c==null||c(E)})}}return m=w(),g}eO(oO).use(Qb).mount("#app");B9({onNeedRefresh(){console.log("Nowa wersja dostępna. Odśwież stronę!")},onOfflineReady(){console.log("Aplikacja jest teraz dostępna offline!")}});
